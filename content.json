{"meta":{"title":"Suave's Blog","subtitle":"","description":"","author":"Suave","url":"https://suavess.github.io","root":"/"},"pages":[{"title":"","date":"2022-06-16T02:01:19.362Z","updated":"2022-06-16T02:01:19.362Z","comments":true,"path":"404.html","permalink":"https://suavess.github.io/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2022-06-16T02:01:19.366Z","updated":"2022-06-16T02:01:19.366Z","comments":true,"path":"categories/index.html","permalink":"https://suavess.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2022-06-16T02:01:19.366Z","updated":"2022-06-16T02:01:19.366Z","comments":true,"path":"about/index.html","permalink":"https://suavess.github.io/about/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2022-06-16T02:01:19.366Z","updated":"2022-06-16T02:01:19.366Z","comments":true,"path":"friends/index.html","permalink":"https://suavess.github.io/friends/index.html","excerpt":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚","text":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚ è¿™é‡Œå¯ä»¥å†™å‹é“¾é¡µé¢ä¸‹æ–¹çš„æ–‡å­—å¤‡æ³¨ï¼Œä¾‹å¦‚è‡ªå·±çš„å‹é“¾è§„èŒƒã€ç¤ºä¾‹ç­‰ã€‚"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2022-06-16T02:01:19.367Z","updated":"2022-06-16T02:01:19.367Z","comments":true,"path":"tags/index.html","permalink":"https://suavess.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2022-06-16T02:01:19.366Z","updated":"2022-06-16T02:01:19.366Z","comments":true,"path":"mylist/index.html","permalink":"https://suavess.github.io/mylist/index.html","excerpt":"","text":""}],"posts":[{"title":"Javaä¸­transientå…³é”®å­—çš„ä½¿ç”¨","slug":"Javaä¸­transientå…³é”®å­—çš„ä½¿ç”¨","date":"2022-06-28T07:48:00.000Z","updated":"2022-06-28T09:27:48.740Z","comments":true,"path":"2022/06/28/Javaä¸­transientå…³é”®å­—çš„ä½¿ç”¨/","link":"","permalink":"https://suavess.github.io/2022/06/28/Java%E4%B8%ADtransient%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³•â€‹ æˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªå¯¹è±¡åªè¦å®ç°äº†Serilizableæ¥å£ï¼Œè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œjavaçš„è¿™ç§åºåˆ—åŒ–æ¨¡å¼ä¸ºå¼€å‘è€…æä¾›äº†å¾ˆå¤šä¾¿åˆ©ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¿…å…³ç³»å…·ä½“åºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œåªè¦è¿™ä¸ªç±»å®ç°äº†Serilizableæ¥å£ï¼Œè¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè‡ªåŠ¨åºåˆ—åŒ–ã€‚ ç„¶è€Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œè¿™ä¸ªç±»çš„æœ‰äº›å±æ€§éœ€è¦åºåˆ—åŒ–ï¼Œè€Œå…¶ä»–å±æ€§ä¸éœ€è¦è¢«åºåˆ—åŒ–ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·æœ‰ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼Œé“¶è¡Œå¡å·ç­‰ï¼‰ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¸å¸Œæœ›åœ¨ç½‘ç»œæ“ä½œï¼ˆä¸»è¦æ¶‰åŠåˆ°åºåˆ—åŒ–æ“ä½œï¼Œæœ¬åœ°åºåˆ—åŒ–ç¼“å­˜ä¹Ÿé€‚ç”¨ï¼‰ä¸­è¢«ä¼ è¾“ï¼Œè¿™äº›ä¿¡æ¯å¯¹åº”çš„å˜é‡å°±å¯ä»¥åŠ ä¸Štransientå…³é”®å­—ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªå­—æ®µçš„ç”Ÿå‘½å‘¨æœŸä»…å­˜äºè°ƒç”¨è€…çš„å†…å­˜ä¸­è€Œä¸ä¼šå†™åˆ°ç£ç›˜é‡ŒæŒä¹…åŒ–ã€‚ æ€»ä¹‹ï¼Œjava çš„transientå…³é”®å­—ä¸ºæˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ï¼Œä½ åªéœ€è¦å®ç°Serilizableæ¥å£ï¼Œå°†ä¸éœ€è¦åºåˆ—åŒ–çš„å±æ€§å‰æ·»åŠ å…³é”®å­—transientï¼Œåºåˆ—åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå±æ€§å°±ä¸ä¼šåºåˆ—åŒ–åˆ°æŒ‡å®šçš„ç›®çš„åœ°ä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.example.demo;import java.io.IOException;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.io.Serializable;import java.nio.file.Files;import java.nio.file.Paths;/** * @author Suave * @date 2022/6/16 10:18 */public class Test &#123; public static void main(String[] args) &#123; User user = new User(); user.setUsername(&quot;Suave&quot;); user.setPassword(&quot;123456&quot;); System.out.println(&quot;read before Serializable: &quot;); System.out.println(&quot;username: &quot; + user.getUsername()); System.out.println(&quot;password: &quot; + user.getPassword()); try &#123; ObjectOutputStream os = new ObjectOutputStream( Files.newOutputStream(Paths.get(&quot;/Users/suave/test.txt&quot;))); os.writeObject(user); os.flush(); os.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; ObjectInputStream is = new ObjectInputStream(Files.newInputStream(Paths.get(&quot;/Users/suave/test.txt&quot;))); user = (User) is.readObject(); is.close(); System.out.println(&quot;read after Serializable: &quot;); System.out.println(&quot;username: &quot; + user.getUsername()); System.out.println(&quot;password: &quot; + user.getPassword()); &#125; catch (IOException | ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class User implements Serializable &#123; private static final long serialVersionUID = 8294180014912103005L; private String username; private transient String password; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125;&#125; è¾“å‡ºç»“æœä¸º 123456read before Serializable: username: Suavepassword: 123456read after Serializable: username: Suavepassword: null å¯†ç å­—æ®µä¸ºnullï¼Œè¯´æ˜ååºåˆ—åŒ–æ—¶æ ¹æœ¬æ²¡æœ‰ä»æ–‡ä»¶ä¸­è·å–åˆ°ä¿¡æ¯ã€‚ transientä½¿ç”¨æ€»ç»“ ä¸€æ—¦å˜é‡è¢«transientä¿®é¥°ï¼Œå˜é‡å°†ä¸å†æ˜¯å¯¹è±¡æŒä¹…åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å˜é‡å†…å®¹åœ¨åºåˆ—åŒ–åæ— æ³•è·å¾—è®¿é—®ã€‚ transientå…³é”®å­—åªèƒ½ä¿®é¥°å˜é‡ï¼Œè€Œä¸èƒ½ä¿®é¥°æ–¹æ³•å’Œç±»ã€‚æ³¨æ„ï¼Œæœ¬åœ°å˜é‡æ˜¯ä¸èƒ½è¢«transientå…³é”®å­—ä¿®é¥°çš„ã€‚å˜é‡å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å˜é‡ï¼Œåˆ™è¯¥ç±»éœ€è¦å®ç°Serializableæ¥å£ã€‚ è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸å†èƒ½è¢«åºåˆ—åŒ–ï¼Œä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ã€‚ ç¬¬ä¸‰ç‚¹å¯èƒ½æœ‰äº›è¿·æƒ‘ï¼Œå› ä¸ºå‘ç°åœ¨Userç±»ä¸­çš„usernameå­—æ®µå‰åŠ ä¸Šstaticå…³é”®å­—åï¼Œç¨‹åºè¿è¡Œç»“æœä¾ç„¶ä¸å˜ï¼Œå³staticç±»å‹çš„usernameä¹Ÿè¯»å‡ºæ¥ä¸ºâ€œSuaveâ€äº†ï¼Œè¿™ä¸ä¸ç¬¬ä¸‰ç‚¹è¯´çš„çŸ›ç›¾å—ï¼Ÿå®é™…ä¸Šæ˜¯è¿™æ ·çš„ï¼šç¬¬ä¸‰ç‚¹ç¡®å®æ²¡é”™ï¼ˆä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ï¼‰ï¼Œååºåˆ—åŒ–åç±»ä¸­staticå‹å˜é‡usernameçš„å€¼ä¸ºå½“å‰JVMä¸­å¯¹åº”staticå˜é‡çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯JVMä¸­çš„ä¸æ˜¯ååºåˆ—åŒ–å¾—å‡ºçš„ï¼Œå¯ä»¥æ¥ç®€å•è¯æ˜ä¸€ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class Test &#123; public static void main(String[] args) &#123; User user = new User(); user.setUsername(&quot;Suave&quot;); user.setPassword(&quot;123456&quot;); System.out.println(&quot;read before Serializable: &quot;); System.out.println(&quot;username: &quot; + user.getUsername()); System.out.println(&quot;password: &quot; + user.getPassword()); try &#123; ObjectOutputStream os = new ObjectOutputStream( Files.newOutputStream(Paths.get(&quot;/Users/suave/test.txt&quot;))); os.writeObject(user); os.flush(); os.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; User.username = &quot;abcde&quot;; ObjectInputStream is = new ObjectInputStream(Files.newInputStream(Paths.get(&quot;/Users/suave/test.txt&quot;))); user = (User) is.readObject(); is.close(); System.out.println(&quot;\\nread after Serializable: &quot;); System.out.println(&quot;username: &quot; + user.getUsername()); System.out.println(&quot;password: &quot; + user.getPassword()); &#125; catch (IOException | ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;class User implements Serializable &#123; private static final long serialVersionUID = 8294180014912103005L; public static String username; private transient String password; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125;&#125; è¿è¡Œç»“æœ: 1234567read before Serializable: username: Suavepassword: 123456read after Serializable: username: abcdepassword: null è¿™è¯´æ˜ååºåˆ—åŒ–åç±»ä¸­staticå‹å˜é‡usernameçš„å€¼ä¸ºå½“å‰JVMä¸­å¯¹åº”staticå˜é‡çš„å€¼ï¼Œä¸ºä¿®æ”¹åjmwangï¼Œè€Œä¸æ˜¯åºåˆ—åŒ–æ—¶çš„å€¼Alexiaã€‚ è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡çœŸçš„ä¸èƒ½è¢«åºåˆ—åŒ–å—ï¼Ÿä¸¾ä¸ªğŸŒ° 1234567891011121314151617181920212223242526272829public class Test implements Externalizable &#123; private transient String content = &quot;æˆ‘å°†ä¼šè¢«åºåˆ—åŒ–ï¼Œä¸ç®¡æˆ‘æ˜¯å¦è¢«transientå…³é”®å­—ä¿®é¥°&quot;; @Override public void writeExternal(ObjectOutput out) throws IOException &#123; out.writeObject(content); &#125; @Override public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException &#123; content = (String) in.readObject(); &#125; public static void main(String[] args) throws Exception &#123; Test test = new Test(); ObjectOutput out = new ObjectOutputStream(Files.newOutputStream(new File(&quot;test&quot;).toPath())); out.writeObject(test); ObjectInput in = new ObjectInputStream(Files.newInputStream(new File( &quot;test&quot;).toPath())); test = (Test) in.readObject(); System.out.println(test.content); out.close(); in.close(); &#125;&#125; è¿è¡Œç»“æœæ˜¯: 1æˆ‘å°†ä¼šè¢«åºåˆ—åŒ–ï¼Œä¸ç®¡æˆ‘æ˜¯å¦è¢«transientå…³é”®å­—ä¿®é¥° â€‹ è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œä¸æ˜¯è¯´ç±»çš„å˜é‡è¢«transientå…³é”®å­—ä¿®é¥°ä»¥åå°†ä¸èƒ½åºåˆ—åŒ–äº†å—ï¼Ÿ æˆ‘ä»¬çŸ¥é“åœ¨Javaä¸­ï¼Œå¯¹è±¡çš„åºåˆ—åŒ–å¯ä»¥é€šè¿‡å®ç°ä¸¤ç§æ¥å£æ¥å®ç°ï¼Œè‹¥å®ç°çš„æ˜¯Serializableæ¥å£ï¼Œåˆ™æ‰€æœ‰çš„åºåˆ—åŒ–å°†ä¼šè‡ªåŠ¨è¿›è¡Œï¼Œè‹¥å®ç°çš„æ˜¯Externalizableæ¥å£ï¼Œåˆ™æ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥è‡ªåŠ¨åºåˆ—åŒ–ï¼Œéœ€è¦åœ¨writeExternalæ–¹æ³•ä¸­è¿›è¡Œæ‰‹å·¥æŒ‡å®šæ‰€è¦åºåˆ—åŒ–çš„å˜é‡ï¼Œè¿™ä¸æ˜¯å¦è¢«transientä¿®é¥°æ— å…³ã€‚å› æ­¤ç¬¬äºŒä¸ªä¾‹å­è¾“å‡ºçš„æ˜¯å˜é‡contentåˆå§‹åŒ–çš„å†…å®¹ï¼Œè€Œä¸æ˜¯nullã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://suavess.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å…³é”®å­—","slug":"å…³é”®å­—","permalink":"https://suavess.github.io/tags/%E5%85%B3%E9%94%AE%E5%AD%97/"}]},{"title":"Javaä¸­switchå…³é”®å­—å¯¹Stringç±»å‹çš„æ”¯æŒ","slug":"Javaä¸­switchå…³é”®å­—å¯¹Stringç±»å‹çš„æ”¯æŒ","date":"2022-06-16T12:09:14.000Z","updated":"2022-06-16T12:45:42.845Z","comments":true,"path":"2022/06/16/Javaä¸­switchå…³é”®å­—å¯¹Stringç±»å‹çš„æ”¯æŒ/","link":"","permalink":"https://suavess.github.io/2022/06/16/Java%E4%B8%ADswitch%E5%85%B3%E9%94%AE%E5%AD%97%E5%AF%B9String%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%94%AF%E6%8C%81/","excerpt":"","text":"åœ¨java7ä»¥åï¼Œswitchçš„å‚æ•°å¯ä»¥æ˜¯Stringç±»å‹äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢switchæ”¯æŒè¿™æ ·å‡ ç§æ•°æ®ç±»å‹ï¼šbyte short int char String ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹ï¼Œswitchåˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„ã€‚ ps: æœ¬æ–‡ä½¿ç”¨çš„åç¼–è¯‘å·¥å…·ä¸ºjadx switchå¯¹æ•´å‹çš„æ”¯æŒä¸€æ®µå¾ˆç®€å•çš„é€šè¿‡æ•´å‹è¿›è¡Œswitchçš„ä»£ç  123456789101112131415public class Test &#123; public static void main(String[] args) &#123; int a = 1; switch (a) &#123; case 1: System.out.println(&quot;hello&quot;); break; case 2: System.out.println(&quot;world&quot;); break; default: break; &#125; &#125;&#125; ç»è¿‡åç¼–è¯‘å 12345678910111213141516package com.example.demo;/* loaded from: Test.class */public class Test &#123; public static void main(String[] args) &#123; switch (1) &#123; case 1: System.out.println(&quot;hello&quot;); return; case 2: System.out.println(&quot;world&quot;); return; default: return; &#125; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡åç¼–è¯‘åçš„ä»£ç åŸºæœ¬æ²¡æœ‰å˜åŒ–ï¼Œå› æ­¤switchå¯¹intçš„åˆ¤æ–­æ˜¯ç›´æ¥æ¯”è¾ƒæ•´æ•°çš„å€¼ã€‚ switchå¯¹å­—ç¬¦ç±»å‹çš„æ”¯æŒ123456789101112131415public class Test &#123; public static void main(String[] args) &#123; char a = &#x27;b&#x27;; switch (a) &#123; case &#x27;a&#x27;: System.out.println(&quot;hello&quot;); break; case &#x27;b&#x27;: System.out.println(&quot;world&quot;); break; default: break; &#125; &#125;&#125; ç»è¿‡åç¼–è¯‘ä¹‹å 12345678910111213141516package com.example.demo;/* loaded from: Test.class */public class Test &#123; public static void main(String[] args) &#123; switch (98) &#123; case 97: System.out.println(&quot;hello&quot;); return; case 98: System.out.println(&quot;world&quot;); return; default: return; &#125; &#125;&#125; é€šè¿‡ä»¥ä¸Šçš„ä»£ç ä½œæ¯”è¾ƒæˆ‘ä»¬å‘ç°ï¼šå¯¹charç±»å‹è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯asciiç ï¼Œç¼–è¯‘å™¨ä¼šæŠŠcharå‹å˜é‡è½¬æ¢æˆå¯¹åº”çš„intå‹å˜é‡ switchå¯¹å­—ç¬¦ä¸²æ”¯æŒçš„å®ç°12345678910111213public static void main(String[] args) &#123; String str = &quot;world&quot;; switch (str) &#123; case &quot;hello&quot;: System.out.println(&quot;hello&quot;); break; case &quot;world&quot;: System.out.println(&quot;world&quot;); break; default: break; &#125;&#125; ç»è¿‡åç¼–è¯‘ä¹‹å 12345678910111213141516171819202122232425262728293031package com.example.demo;/* loaded from: Test.class */public class Test &#123; public static void main(String[] args) &#123; char c = 65535; switch (&quot;world&quot;.hashCode()) &#123; case 99162322: if (&quot;world&quot;.equals(&quot;hello&quot;)) &#123; c = 0; break; &#125; break; case 113318802: if (&quot;world&quot;.equals(&quot;world&quot;)) &#123; c = 1; break; &#125; break; &#125; switch (c) &#123; case 0: System.out.println(&quot;hello&quot;); return; case 1: System.out.println(&quot;world&quot;); return; default: return; &#125; &#125;&#125; åŸæ¥å­—ç¬¦ä¸²çš„switchæ˜¯é€šè¿‡equals()å’ŒhashCode()æ–¹æ³•æ¥å®ç°çš„ã€‚è®°ä½ï¼Œswitchä¸­åªèƒ½ä½¿ç”¨æ•´å‹ï¼Œæ¯”å¦‚byteã€‚shortï¼Œchar(ackiiç æ˜¯æ•´å‹)ä»¥åŠintã€‚è¿˜å¥½hashCode()æ–¹æ³•è¿”å›çš„æ˜¯intï¼Œè€Œä¸æ˜¯longã€‚é€šè¿‡è¿™ä¸ªå¾ˆå®¹æ˜“è®°ä½hashCodeè¿”å›çš„æ˜¯intè¿™ä¸ªäº‹å®ã€‚ä»”ç»†çœ‹ä¸‹å¯ä»¥å‘ç°ï¼Œè¿›è¡Œswitchçš„å®é™…æ˜¯å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå“ˆå¸Œå¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ã€‚å› æ­¤å®ƒçš„æ€§èƒ½æ˜¯ä¸å¦‚ä½¿ç”¨æšä¸¾è¿›è¡Œswitchæˆ–è€…ä½¿ç”¨çº¯æ•´æ•°å¸¸é‡ï¼Œä½†è¿™ä¹Ÿä¸æ˜¯å¾ˆå·®ã€‚å› ä¸ºJavaç¼–è¯‘å™¨åªå¢åŠ äº†ä¸€ä¸ªequalsæ–¹æ³•ï¼Œå¦‚æœä½ æ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è¯ä¼šéå¸¸å¿«ï¼Œæ¯”å¦‚â€abcâ€ ==â€abcâ€ã€‚å¦‚æœä½ æŠŠhashCode()æ–¹æ³•çš„è°ƒç”¨ä¹Ÿè€ƒè™‘è¿›æ¥äº†ï¼Œé‚£ä¹ˆè¿˜ä¼šå†å¤šä¸€æ¬¡çš„è°ƒç”¨å¼€é”€ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºäº†ï¼Œå®ƒå°±ä¼šæŠŠå“ˆå¸Œå€¼ç¼“å­˜èµ·æ¥ã€‚å› æ­¤å¦‚æœè¿™ä¸ªswitchè¯­å¥æ˜¯ç”¨åœ¨ä¸€ä¸ªå¾ªç¯é‡Œçš„ï¼Œæ¯”å¦‚é€é¡¹å¤„ç†æŸä¸ªå€¼ï¼Œæˆ–è€…æ¸¸æˆå¼•æ“å¾ªç¯åœ°æ¸²æŸ“å±å¹•ï¼Œè¿™é‡ŒhashCode()æ–¹æ³•çš„è°ƒç”¨å¼€é”€å…¶å®ä¸ä¼šå¾ˆå¤§ã€‚ æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå…¶å®switchåªæ”¯æŒä¸€ç§æ•°æ®ç±»å‹ï¼Œé‚£å°±æ˜¯æ•´å‹ï¼Œå…¶ä»–æ•°æ®ç±»å‹éƒ½æ˜¯è½¬æ¢æˆæ•´å‹ä¹‹åå†ä½¿ç”¨switchçš„ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"åç¼–è¯‘","slug":"åç¼–è¯‘","permalink":"https://suavess.github.io/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/"}]},{"title":"Javaç¼–è¯‘å™¨å¯¹'+'çš„é‡è½½","slug":"Javaç¼–è¯‘å™¨å¯¹'+'çš„é‡è½½","date":"2022-06-16T02:03:21.000Z","updated":"2022-06-16T06:10:00.912Z","comments":true,"path":"2022/06/16/Javaç¼–è¯‘å™¨å¯¹'+'çš„é‡è½½/","link":"","permalink":"https://suavess.github.io/2022/06/16/Java%E7%BC%96%E8%AF%91%E5%99%A8%E5%AF%B9'+'%E7%9A%84%E9%87%8D%E8%BD%BD/","excerpt":"","text":"Javaä¸­å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡Stirng.concat()æ–¹æ³•è¿›è¡Œæ‹¼æ¥ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨+å·æ‹¼æ¥ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚ æœ‰äººæŠŠJavaä¸­ä½¿ç”¨+æ‹¼æ¥å­—ç¬¦ä¸²çš„åŠŸèƒ½ç†è§£ä¸ºè¿ç®—ç¬¦é‡è½½ã€‚å…¶å®å¹¶ä¸æ˜¯ï¼ŒJavaæ˜¯ä¸æ”¯æŒè¿ç®—ç¬¦é‡è½½çš„ã€‚è¿™å…¶å®åªæ˜¯Javaæä¾›çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚ è¿ç®—ç¬¦é‡è½½ï¼šåœ¨è®¡ç®—æœºç¨‹åºè®¾è®¡ä¸­ï¼Œè¿ç®—ç¬¦é‡è½½ï¼ˆè‹±è¯­ï¼šoperator overloadingï¼‰æ˜¯å¤šæ€çš„ä¸€ç§ã€‚è¿ç®—ç¬¦é‡è½½ï¼Œå°±æ˜¯å¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ã€‚ è¯­æ³•ç³–ï¼šè¯­æ³•ç³–ï¼ˆSyntactic sugarï¼‰ï¼Œä¹Ÿè¯‘ä¸ºç³–è¡£è¯­æ³•ï¼Œæ˜¯ç”±è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶å½¼å¾—Â·å…°ä¸å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚è¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚ è¿™æ ·çš„ä¸€æ®µä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åç¼–è¯‘åçš„ç»“æœ ä½¿ç”¨IDEAç›´æ¥æŸ¥çœ‹ç¼–è¯‘åçš„classæ–‡ä»¶ é€šè¿‡æŸ¥çœ‹åç¼–è¯‘ä»¥åçš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒåŸæ¥å­—ç¬¦ä¸²å¸¸é‡åœ¨æ‹¼æ¥è¿‡ç¨‹ä¸­ï¼Œæ˜¯å°†Stringè½¬æˆäº†StringBuilderåï¼Œä½¿ç”¨å…¶appendæ–¹æ³•è¿›è¡Œå¤„ç†çš„ã€‚ é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaä¸­çš„+å¯¹å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œå…¶å®ç°åŸç†æ˜¯ä½¿ç”¨StringBuilder.appendã€‚ ä½†æ˜¯ï¼ŒStringçš„ä½¿ç”¨+å­—ç¬¦ä¸²æ‹¼æ¥ä¹Ÿä¸å…¨éƒ½æ˜¯åŸºäºStringBuilder.appendï¼Œè¿˜æœ‰ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœæ˜¯ä¸¤ä¸ªå›ºå®šçš„å­—é¢é‡æ‹¼æ¥ï¼Œå¦‚ï¼š 1String ab = &quot;a&quot; + &quot;b&quot;; åç¼–è¯‘å è¿™ä¸»è¦æ˜¯å› ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œç¼–è¯‘æœŸå¯çŸ¥ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šè¿›è¡Œå¸¸é‡æŠ˜å ï¼Œç›´æ¥å˜æˆ String s = â€œabâ€ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"åç¼–è¯‘","slug":"åç¼–è¯‘","permalink":"https://suavess.github.io/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/"}]},{"title":"MySQLé”ç›¸å…³ï¼ˆäºŒï¼‰","slug":"MySQLé”ç›¸å…³ï¼ˆäºŒï¼‰","date":"2022-02-28T02:57:32.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2022/02/28/MySQLé”ç›¸å…³ï¼ˆäºŒï¼‰/","link":"","permalink":"https://suavess.github.io/2022/02/28/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"","text":"Innodbè¡Œé” è¡Œé”ç‰¹ç‚¹ ï¼šåå‘InnoDB å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½,å¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚ InnoDB ä¸ MyISAM çš„æœ€å¤§ä¸åŒæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯æ”¯æŒäº‹åŠ¡ï¼›äºŒæ˜¯ é‡‡ç”¨äº†è¡Œçº§é”ã€‚ èƒŒæ™¯äº‹åŠ¡åŠå…¶ACIDå±æ€§äº‹åŠ¡æ˜¯ç”±ä¸€ç»„SQLè¯­å¥ç»„æˆçš„é€»è¾‘å¤„ç†å•å…ƒã€‚ äº‹åŠ¡å…·æœ‰ä»¥ä¸‹4ä¸ªç‰¹æ€§ï¼Œç®€ç§°ä¸ºäº‹åŠ¡ACIDå±æ€§ã€‚ ACIDå±æ€§ å«ä¹‰ åŸå­æ€§ï¼ˆAtomicityï¼‰ äº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œå•å…ƒï¼Œå…¶å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚ ä¸€è‡´æ€§ï¼ˆConsistentï¼‰ åœ¨äº‹åŠ¡å¼€å§‹å’Œå®Œæˆæ—¶ï¼Œæ•°æ®éƒ½å¿…é¡»ä¿æŒä¸€è‡´çŠ¶æ€ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ æ•°æ®åº“ç³»ç»Ÿæä¾›ä¸€å®šçš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ â€œç‹¬ç«‹â€ ç¯å¢ƒä¸‹è¿è¡Œã€‚ æŒä¹…æ€§ï¼ˆDurableï¼‰ äº‹åŠ¡å®Œæˆä¹‹åï¼Œå¯¹äºæ•°æ®çš„ä¿®æ”¹æ˜¯æ°¸ä¹…çš„ã€‚ å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜ é—®é¢˜ å«ä¹‰ ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰ å½“ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡é€‰æ‹©åŒä¸€è¡Œï¼Œæœ€åˆçš„äº‹åŠ¡ä¿®æ”¹çš„å€¼ï¼Œä¼šè¢«åé¢çš„äº‹åŠ¡ä¿®æ”¹çš„å€¼è¦†ç›–ã€‚ è„è¯»ï¼ˆDirty Readsï¼‰ å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®ï¼Œå¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚ ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Readsï¼‰ ä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–æŸäº›æ•°æ®åçš„æŸä¸ªæ—¶é—´ï¼Œå†æ¬¡è¯»å–ä»¥å‰è¯»è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å’Œä»¥å‰è¯»å‡ºçš„æ•°æ®ä¸ä¸€è‡´ã€‚ å¹»è¯»ï¼ˆPhantom Readsï¼‰ ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶é‡æ–°è¯»å–ä»¥å‰æŸ¥è¯¢è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å…¶ä»–äº‹åŠ¡æ’å…¥äº†æ»¡è¶³å…¶æŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®ã€‚ äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ºäº†è§£å†³ä¸Šè¿°æåˆ°çš„äº‹åŠ¡å¹¶å‘é—®é¢˜ï¼Œæ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»è¶Šä¸¥æ ¼ï¼Œå¹¶å‘å‰¯ä½œç”¨è¶Šå°ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·ä¹Ÿå°±è¶Šå¤§ï¼Œå› ä¸ºäº‹åŠ¡éš”ç¦»å®è´¨ä¸Šå°±æ˜¯ä½¿ç”¨äº‹åŠ¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šâ€œä¸²è¡ŒåŒ–â€ è¿›è¡Œï¼Œè¿™æ˜¾ç„¶ä¸â€œå¹¶å‘â€ æ˜¯çŸ›ç›¾çš„ã€‚ æ•°æ®åº“çš„éš”ç¦»çº§åˆ«æœ‰4ä¸ªï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸ºRead uncommittedã€Read committedã€Repeatable readã€Serializableï¼Œè¿™å››ä¸ªçº§åˆ«å¯ä»¥é€ä¸ªè§£å†³è„å†™ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»è¿™å‡ ç±»é—®é¢˜ã€‚ éš”ç¦»çº§åˆ« ä¸¢å¤±æ›´æ–° è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» Read uncommitted Ã— âˆš âˆš âˆš Read committed Ã— Ã— âˆš âˆš Repeatable readï¼ˆé»˜è®¤ï¼‰ Ã— Ã— Ã— âˆš Serializable Ã— Ã— Ã— Ã— PS ï¼š âˆš ä»£è¡¨å¯èƒ½å‡ºç° ï¼Œ Ã— ä»£è¡¨ä¸ä¼šå‡ºç° ã€‚ Mysql çš„æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ä¸º Repeatable read ï¼Œ æŸ¥çœ‹æ–¹å¼ï¼š 12345-- MySQL8ä»¥å‰show variables like &#x27;tx_isolation&#x27;;-- MySQL8ä»¥åselect @@global.transaction_isolation,@@transaction_isolation; InnoDB çš„è¡Œé”æ¨¡å¼InnoDB å®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ã€‚ å…±äº«é”ï¼ˆSï¼‰ï¼šåˆç§°ä¸ºè¯»é”ï¼Œç®€ç§°Sé”ï¼Œå…±äº«é”å°±æ˜¯å¤šä¸ªäº‹åŠ¡å¯¹äºåŒä¸€æ•°æ®å¯ä»¥å…±äº«ä¸€æŠŠé”ï¼Œéƒ½èƒ½è®¿é—®åˆ°æ•°æ®ï¼Œä½†æ˜¯åªèƒ½è¯»ä¸èƒ½ä¿®æ”¹ã€‚ æ’ä»–é”ï¼ˆXï¼‰ï¼šåˆç§°ä¸ºå†™é”ï¼Œç®€ç§°Xé”ï¼Œæ’ä»–é”å°±æ˜¯ä¸èƒ½ä¸å…¶ä»–é”å¹¶å­˜ï¼Œå¦‚ä¸€ä¸ªäº‹åŠ¡è·å–äº†ä¸€ä¸ªæ•°æ®è¡Œçš„æ’ä»–é”ï¼Œå…¶ä»–äº‹åŠ¡å°±ä¸èƒ½å†è·å–è¯¥è¡Œçš„å…¶ä»–é”ï¼ŒåŒ…æ‹¬å…±äº«é”å’Œæ’ä»–é”ï¼Œä½†æ˜¯è·å–æ’ä»–é”çš„äº‹åŠ¡æ˜¯å¯ä»¥å¯¹æ•°æ®å°±è¡Œè¯»å–å’Œä¿®æ”¹ã€‚ å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)ï¼› å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼› å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ˜¾ç¤ºç»™è®°å½•é›†åŠ å…±äº«é”æˆ–æ’ä»–é” ã€‚ 123å…±äº«é”ï¼ˆSï¼‰ï¼šSELECT * FROM table_name WHERE ... LOCK IN SHARE MODEæ’ä»–é”ï¼ˆX) ï¼šSELECT * FROM table_name WHERE ... FOR UPDATE ï¼ˆæ‚²è§‚é”ï¼‰ æ‚²è§‚é”å’Œä¹è§‚é” æ‚²è§‚é”ï¼šäº‹åŠ¡å¿…é¡»æ’é˜Ÿæ‰§è¡Œã€‚æ•°æ®é”ä½äº†ï¼Œä¸å…è®¸å¹¶å‘ã€‚ï¼ˆè¡Œçº§é”ï¼šselectåé¢æ·»åŠ for updateï¼‰ ä¹è§‚é”ï¼šæ”¯æŒå¹¶å‘ï¼Œäº‹åŠ¡ä¹Ÿä¸éœ€è¦æ’é˜Ÿï¼Œåªä¸è¿‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬å·ã€‚ è¡Œé”æµ‹è¯• Session-1 Session-2 å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ® å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ® æŸ¥è¯¢id ä¸º3çš„æ•°æ® ï¼› è·å–idä¸º3çš„æ•°æ® ï¼› æ›´æ–°idä¸º3çš„æ•°æ®ï¼Œä½†æ˜¯ä¸æäº¤ï¼› æ–°idä¸º3 çš„æ•°æ®ï¼Œ å‡ºäºç­‰å¾…çŠ¶æ€ é€šè¿‡commitï¼Œ æäº¤äº‹åŠ¡ è§£é™¤é˜»å¡ï¼Œæ›´æ–°æ­£å¸¸è¿›è¡Œ ä»¥ä¸Šï¼Œ æ“ä½œçš„éƒ½æ˜¯åŒä¸€è¡Œçš„æ•°æ®ï¼Œæ¥ä¸‹æ¥ï¼Œæ¼”ç¤ºä¸åŒè¡Œçš„æ•°æ® ï¼š æ–°idä¸º3æ•°æ®ï¼Œæ­£å¸¸çš„è·å–åˆ°è¡Œé” ï¼Œ æ‰§è¡Œæ›´æ–° ï¼› ç”±äºä¸Session-1 æ“ä½œä¸æ˜¯åŒä¸€è¡Œï¼Œè·å–å½“å‰è¡Œé”ï¼Œæ‰§è¡Œæ›´æ–°ï¼› å¦‚æœæ‰§è¡Œäº†æ›´æ–°è¯­å¥ï¼Œä¼šå¯¹è¿™ä¸€è¡Œæ•°æ®åŠ ä¸Šæ’ä»–é”ï¼ˆå†™é”ï¼‰ï¼Œæäº¤commitä¹‹åï¼Œä¼šé‡Šæ”¾é”ã€‚å¦å¤–ä¸€ä¸ªçº¿ç¨‹updateè¯­å¥æ‰å¯ä»¥æ‰§è¡Œè§£é™¤é˜»å¡çŠ¶æ€ã€‚å‰ææ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œåŒä¸€è¡Œæ•°æ®ã€‚ æ— ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é” å¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆInnoDBå°†å¯¹è¡¨ä¸­çš„æ‰€æœ‰è®°å½•åŠ é”ï¼Œå®é™…æ•ˆæœè·Ÿè¡¨é”ä¸€æ ·ã€‚ æŸ¥çœ‹å½“å‰è¡¨çš„ç´¢å¼• ï¼š show index from test_innodb_lock\\G;ï¼ˆåŠ ä¸Š \\G è¡¨ç¤ºå°†æŸ¥è¯¢ç»“æœè¿›è¡ŒæŒ‰åˆ—æ‰“å°ï¼Œå¯ä»¥ä½¿æ¯ä¸ªå­—æ®µæ‰“å°åˆ°å•ç‹¬çš„è¡Œï¼‰ Session-1 Session-2 å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ æ‰§è¡Œæ›´æ–°è¯­å¥ ï¼š æ‰§è¡Œæ›´æ–°è¯­å¥ï¼Œ ä½†å¤„äºé˜»å¡çŠ¶æ€ï¼š æäº¤äº‹åŠ¡ï¼š è§£é™¤é˜»å¡ï¼Œæ‰§è¡Œæ›´æ–°æˆåŠŸ ï¼š ç”±äº æ‰§è¡Œæ›´æ–°æ—¶ ï¼Œ nameå­—æ®µæœ¬æ¥ä¸ºvarcharç±»å‹ï¼Œ æˆ‘ä»¬æ˜¯ä½œä¸ºæ•°ç»„ç±»å‹ä½¿ç”¨ï¼Œå­˜åœ¨ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆï¼Œæœ€ç»ˆè¡Œé”å˜ä¸ºè¡¨é” ï¼›(å­—ç¬¦ä¸²ç±»å‹ï¼Œåœ¨SQLè¯­å¥ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰åŠ å•å¼•å·ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼ŒæŸ¥è¯¢æ²¡æœ‰èµ°ç´¢å¼•ï¼Œè¿›è¡Œå…¨è¡¨æ‰«ææ˜¯ï¼Œç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”å°±å‡çº§ä¸ºè¡¨é”) é—´éš™é”å±å®³ å½“æˆ‘ä»¬ç”¨èŒƒå›´æ¡ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è¿›è¡ŒåŠ é”ï¼› å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åš â€œé—´éš™ï¼ˆGAPï¼‰â€ ï¼Œ InnoDBä¹Ÿä¼šå¯¹è¿™ä¸ª â€œé—´éš™â€ åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„ é—´éš™é”ï¼ˆNext-Keyé”ï¼‰ ã€‚ ç¤ºä¾‹ ï¼š Session-1 Session-2 å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ æ ¹æ®idèŒƒå›´æ›´æ–°æ•°æ® æ’å…¥idä¸º2çš„è®°å½•ï¼Œ å‡ºäºé˜»å¡çŠ¶æ€ æäº¤äº‹åŠ¡ ç”±äºè¡¨æ•°æ®ä¸­ä¸å­˜åœ¨id=2çš„æ•°æ®ï¼Œä½†æ˜¯id&lt;4çš„è¡Œè¢«åŠ äº†æ’ä»–é”ï¼Œæ­¤æ—¶ï¼Œè¿™è¡Œæ•°æ®å°±è¢«åŠ äº†é—´éš™é”ã€‚æ— æ³•æ’å…¥ è§£é™¤é˜»å¡ ï¼Œ æ‰§è¡Œæ’å…¥æ“ä½œ ï¼š æ€æ ·é¿å…é—´éš™é”å‘¢ï¼Ÿ åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œæˆ–è€…å¯¹æ•°æ®è¡Œè¿›è¡ŒåŠ é”çš„æ—¶å€™ï¼Œå°½é‡å»ç¼©å°æ¡ä»¶ï¼Œä½¿å¾—é—´éš™æ•°æ®å°½é‡çš„å°‘ï¼Œæœ€å¤§ç¨‹åº¦é¿å…é—´éš™é”çš„å­˜åœ¨ã€‚ InnoDB è¡Œé”äº‰ç”¨æƒ…å†µ1show status like &#x27;innodb_row_lock%&#x27;; Innodb_row_lock_current_waits: å½“å‰æ­£åœ¨ç­‰å¾…é”å®šçš„æ•°é‡ Innodb_row_lock_time: ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨é”å®šæ€»æ—¶é—´é•¿åº¦ Innodb_row_lock_time_avg:æ¯æ¬¡ç­‰å¾…æ‰€èŠ±å¹³å‡æ—¶é•¿ Innodb_row_lock_time_max:ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨ç­‰å¾…æœ€é•¿çš„ä¸€æ¬¡æ‰€èŠ±çš„æ—¶é—´ Innodb_row_lock_waits: ç³»ç»Ÿå¯åŠ¨ååˆ°ç°åœ¨æ€»å…±ç­‰å¾…çš„æ¬¡æ•° å½“ç­‰å¾…çš„æ¬¡æ•°å¾ˆé«˜ï¼Œè€Œä¸”æ¯æ¬¡ç­‰å¾…çš„æ—¶é•¿ä¹Ÿä¸å°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ†æç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆä¼šæœ‰å¦‚æ­¤å¤šçš„ç­‰å¾…ï¼Œç„¶åæ ¹æ®åˆ†æç»“æœç€æ‰‹åˆ¶å®šä¼˜åŒ–è®¡åˆ’ã€‚ æ€»ç»“ InnoDBå­˜å‚¨å¼•æ“ç”±äºå®ç°äº†è¡Œçº§é”å®šï¼Œè™½ç„¶åœ¨é”å®šæœºåˆ¶çš„å®ç°æ–¹é¢å¸¦æ¥äº†æ€§èƒ½æŸè€—å¯èƒ½æ¯”è¡¨é”ä¼šæ›´é«˜ä¸€äº›ï¼Œä½†æ˜¯åœ¨æ•´ä½“å¹¶å‘å¤„ç†èƒ½åŠ›æ–¹é¢è¦è¿œè¿œä¼˜äºMyISAMçš„è¡¨é”çš„ã€‚å½“ç³»ç»Ÿå¹¶å‘é‡è¾ƒé«˜çš„æ—¶å€™ï¼ŒInnoDBçš„æ•´ä½“æ€§èƒ½å’ŒMyISAMç›¸æ¯”å°±ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚ ä½†æ˜¯ï¼ŒInnoDBçš„è¡Œçº§é”åŒæ ·ä¹Ÿæœ‰å…¶è„†å¼±çš„ä¸€é¢ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸å½“çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè®©InnoDBçš„æ•´ä½“æ€§èƒ½è¡¨ç°ä¸ä»…ä¸èƒ½æ¯”MyISAMé«˜ï¼Œç”šè‡³å¯èƒ½ä¼šæ›´å·®ã€‚ ä¼˜åŒ–å»ºè®®ï¼š å°½å¯èƒ½è®©æ‰€æœ‰æ•°æ®æ£€ç´¢éƒ½èƒ½é€šè¿‡ç´¢å¼•æ¥å®Œæˆï¼Œé¿å…æ— ç´¢å¼•è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚ åˆç†è®¾è®¡ç´¢å¼•ï¼Œå°½é‡ç¼©å°é”çš„èŒƒå›´ å°½å¯èƒ½å‡å°‘ç´¢å¼•æ¡ä»¶ï¼ŒåŠç´¢å¼•èŒƒå›´ï¼Œé¿å…é—´éš™é” å°½é‡æ§åˆ¶äº‹åŠ¡å¤§å°ï¼Œå‡å°‘é”å®šèµ„æºé‡å’Œæ—¶é—´é•¿åº¦ å°½å¯ä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»ï¼ˆä½†æ˜¯éœ€è¦ä¸šåŠ¡å±‚é¢æ»¡è¶³éœ€æ±‚ï¼‰","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"è¡Œé”","slug":"è¡Œé”","permalink":"https://suavess.github.io/tags/%E8%A1%8C%E9%94%81/"}]},{"title":"MySQLé”ç›¸å…³ï¼ˆä¸€ï¼‰","slug":"MySQLé”ç›¸å…³ï¼ˆä¸€ï¼‰","date":"2022-02-27T08:07:46.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2022/02/27/MySQLé”ç›¸å…³ï¼ˆä¸€ï¼‰/","link":"","permalink":"https://suavess.github.io/2022/02/27/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"é”åˆ†ç±»ä»å¯¹æ•°æ®æ“ä½œçš„ç²’åº¦åˆ† ï¼š 1ï¼‰ è¡¨é”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šæ•´ä¸ªè¡¨ã€‚ 2ï¼‰ è¡Œé”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šå½“å‰æ“ä½œè¡Œã€‚ ä»å¯¹æ•°æ®æ“ä½œçš„ç±»å‹åˆ†ï¼š 1ï¼‰ è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚ 2ï¼‰ å†™é”ï¼ˆæ’å®ƒé”ï¼‰ï¼šå½“å‰æ“ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚ MySQLä¸­çš„é”ç›¸å¯¹å…¶ä»–æ•°æ®åº“è€Œè¨€ï¼ŒMySQLçš„é”æœºåˆ¶æ¯”è¾ƒç®€å•ï¼Œå…¶æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ã€‚ä¸‹è¡¨ä¸­ç½—åˆ—å‡ºäº†å„å­˜å‚¨å¼•æ“å¯¹é”çš„æ”¯æŒæƒ…å†µï¼š å­˜å‚¨å¼•æ“ è¡¨çº§é” è¡Œçº§é” é¡µé¢é” MyISAM æ”¯æŒ ä¸æ”¯æŒ ä¸æ”¯æŒ InnoDB æ”¯æŒ æ”¯æŒ(é»˜è®¤) ä¸æ”¯æŒ MEMORY æ”¯æŒ ä¸æ”¯æŒ ä¸æ”¯æŒ BDB æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ MySQLè¿™3ç§é”çš„ç‰¹æ€§å¯å¤§è‡´å½’çº³å¦‚ä¸‹ ï¼š é”ç±»å‹ ç‰¹ç‚¹ è¡¨çº§é” åå‘MyISAM å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜,å¹¶å‘åº¦æœ€ä½ã€‚ è¡Œçº§é” åå‘InnoDB å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½,å¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚ é¡µé¢é” å¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬ã€‚ ä»ä¸Šè¿°ç‰¹ç‚¹å¯è§ï¼Œå¾ˆéš¾ç¬¼ç»Ÿåœ°è¯´å“ªç§é”æ›´å¥½ï¼Œåªèƒ½å°±å…·ä½“åº”ç”¨çš„ç‰¹ç‚¹æ¥è¯´å“ªç§é”æ›´åˆé€‚ï¼ä»…ä»é”çš„è§’åº¦æ¥è¯´ï¼šè¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Web åº”ç”¨ï¼›è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ç³»ç»Ÿã€‚ MyISAMçš„è¡¨é”MyISAM å­˜å‚¨å¼•æ“åªæ”¯æŒè¡¨é”ï¼Œè¿™ä¹Ÿæ˜¯MySQLå¼€å§‹å‡ ä¸ªç‰ˆæœ¬ä¸­å”¯ä¸€æ”¯æŒçš„é”ç±»å‹ã€‚ å¦‚ä½•åŠ è¡¨é” MyISAM åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERT ç­‰ï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œå› æ­¤ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨ LOCK TABLE å‘½ä»¤ç»™ MyISAM è¡¨æ˜¾å¼åŠ é”ã€‚ æ˜¾ç¤ºåŠ è¡¨é”è¯­æ³•ï¼š 123åŠ è¯»é” ï¼š lock table table_name read;åŠ å†™é” ï¼š lock table table_name writeï¼› è¯»é”Session-1 ï¼š 1ï¼‰è·å¾—tb_book è¡¨çš„è¯»é” 1lock table tb_book read; 2ï¼‰ æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ 1select * from tb_book; å¯ä»¥æ­£å¸¸æ‰§è¡Œ ï¼Œ æŸ¥è¯¢å‡ºæ•°æ®ã€‚ Session-2ï¼š 3ï¼‰ æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ 1select * from tb_book; ä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼ŒæŸ¥è¯¢å‡ºæ•°æ®ã€‚ Session-1ï¼š 4ï¼‰æŸ¥è¯¢æœªé”å®šçš„è¡¨ 1select name from tb_seller; Session-1æŸ¥è¯¢æœªé”å®šçš„è¡¨å¤±è´¥ã€‚å› ä¸ºæŒæœ‰äº†ä¸€å¼ tb_bookçš„è¯»é”ï¼Œå¹¶æœªé‡Šæ”¾é”ã€‚ Session-2ï¼š 5ï¼‰æŸ¥è¯¢æœªé”å®šçš„è¡¨ 1select name from tb_seller; å¯ä»¥æ­£å¸¸æŸ¥è¯¢å‡ºæœªé”å®šçš„è¡¨ï¼› Session-1 ï¼š 6ï¼‰ æ‰§è¡Œæ’å…¥æ“ä½œ 1insert into tb_book values(null,&#x27;Mysqlé«˜çº§&#x27;,&#x27;2088-01-01&#x27;,&#x27;1&#x27;); æ‰§è¡Œæ’å…¥ï¼Œ ç›´æ¥æŠ¥é”™ ï¼Œ ç”±äºå½“å‰tb_book è·å¾—çš„æ˜¯ è¯»é”ï¼Œ ä¸èƒ½æ‰§è¡Œæ›´æ–°æ“ä½œã€‚åªèƒ½è¯» Session-2 ï¼š 7ï¼‰ æ‰§è¡Œæ’å…¥æ“ä½œ 1insert into tb_book values(null,&#x27;Mysqlé«˜çº§&#x27;,&#x27;2088-01-01&#x27;,&#x27;1&#x27;); æ­¤æ—¶ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“åœ¨Session-1ä¸­é‡Šæ”¾é”æŒ‡ä»¤ unlock tables å ï¼Œ Session-2ä¸­çš„ inesrt è¯­å¥ ï¼Œ ç«‹å³æ‰§è¡Œ ï¼› å¦‚æœå¯¹æŸä¸€å¼ è¡¨åŠ äº†è¯»é”ï¼Œä¸ä¼šé˜»å¡å…¶å®ƒçº¿ç¨‹çš„è¯»æ“ä½œï¼Œä½†æ˜¯ä¼šé˜»å¡å…¶å®ƒçº¿ç¨‹çš„å†™æ“ä½œã€‚ å†™é”Session-1 : 1ï¼‰è·å¾—tb_book è¡¨çš„å†™é” 1lock table tb_book write ; 2ï¼‰æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ 1select * from tb_book ; æŸ¥è¯¢æ“ä½œæ‰§è¡ŒæˆåŠŸï¼›åŠ äº†å†™é”å¯ä»¥è¯»ã€‚ 3ï¼‰æ‰§è¡Œæ›´æ–°æ“ä½œ 1update tb_book set name = &#x27;javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬äºŒç‰ˆï¼‰&#x27; where id = 1; æ›´æ–°æ“ä½œæ‰§è¡ŒæˆåŠŸ ï¼›ï¼ˆåŠ äº†å†™é”å½“ç„¶å¯ä»¥å†™ï¼‰ Session-2 : 4ï¼‰æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ 1select * from tb_book ; å½“åœ¨Session-1ä¸­é‡Šæ”¾é”æŒ‡ä»¤ unlock tables å ï¼Œ Session-2ä¸­çš„ select è¯­å¥ ï¼Œ ç«‹å³æ‰§è¡Œ ï¼›ï¼ˆå› ä¸ºSession-1çº¿ç¨‹åŠ çš„æ˜¯å†™é”ï¼Œå†™é”æ˜¯æ’ä»–é”ï¼Œä¼šé˜»æ–­å…¶ä»–çº¿ç¨‹çš„è¯»å’Œå†™æ“ä½œï¼‰ ç»“è®ºé”æ¨¡å¼çš„ç›¸äº’å…¼å®¹æ€§å¦‚è¡¨ä¸­æ‰€ç¤ºï¼š ç”±ä¸Šè¡¨å¯è§ï¼š 1ï¼‰ å¯¹MyISAM è¡¨çš„è¯»æ“ä½œï¼Œä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»è¯·æ±‚ï¼Œä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨çš„å†™è¯·æ±‚ï¼› 2ï¼‰ å¯¹MyISAM è¡¨çš„å†™æ“ä½œï¼Œåˆ™ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼› ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯»é”ä¼šé˜»å¡å†™ï¼Œä½†æ˜¯ä¸ä¼šé˜»å¡è¯»ã€‚è€Œå†™é”ï¼Œåˆ™æ—¢ä¼šé˜»å¡è¯»ï¼Œåˆä¼šé˜»å¡å†™ã€‚ æ­¤å¤–ï¼ŒMyISAM çš„è¯»å†™é”è°ƒåº¦æ˜¯å†™ä¼˜å…ˆï¼Œè¿™ä¹Ÿæ˜¯MyISAMä¸é€‚åˆåšå†™ä¸ºä¸»çš„è¡¨çš„å­˜å‚¨å¼•æ“çš„åŸå› ã€‚å› ä¸ºå†™é”åï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½åšä»»ä½•æ“ä½œï¼Œå¤§é‡çš„æ›´æ–°ä¼šä½¿æŸ¥è¯¢å¾ˆéš¾å¾—åˆ°é”ï¼Œä»è€Œé€ æˆæ°¸è¿œé˜»å¡ã€‚ æŸ¥çœ‹é”çš„äº‰ç”¨æƒ…å†µ1show open tablesï¼› In_user : è¡¨å½“å‰è¢«æŸ¥è¯¢ä½¿ç”¨çš„æ¬¡æ•°ã€‚å¦‚æœè¯¥æ•°ä¸ºé›¶ï¼Œåˆ™è¡¨æ˜¯æ‰“å¼€çš„ï¼Œä½†æ˜¯å½“å‰æ²¡æœ‰è¢«ä½¿ç”¨ã€‚ Name_lockedï¼šè¡¨åç§°æ˜¯å¦è¢«é”å®šã€‚åç§°é”å®šç”¨äºå–æ¶ˆè¡¨æˆ–å¯¹è¡¨è¿›è¡Œé‡å‘½åç­‰æ“ä½œã€‚ 1show status like &#x27;Table_locks%&#x27;; Table_locks_immediate ï¼š æŒ‡çš„æ˜¯èƒ½å¤Ÿç«‹å³è·å¾—è¡¨çº§é”çš„æ¬¡æ•°ï¼Œæ¯ç«‹å³è·å–é”ï¼Œå€¼åŠ 1ã€‚ Table_locks_waited ï¼š æŒ‡çš„æ˜¯ä¸èƒ½ç«‹å³è·å–è¡¨çº§é”è€Œéœ€è¦ç­‰å¾…çš„æ¬¡æ•°ï¼Œæ¯ç­‰å¾…ä¸€æ¬¡ï¼Œè¯¥å€¼åŠ 1ï¼Œæ­¤å€¼é«˜è¯´æ˜å­˜åœ¨ç€è¾ƒä¸ºä¸¥é‡çš„è¡¨çº§é”äº‰ç”¨æƒ…å†µã€‚","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"è¡¨é”","slug":"è¡¨é”","permalink":"https://suavess.github.io/tags/%E8%A1%A8%E9%94%81/"}]},{"title":"MySQLç´¢å¼•çš„å¤±æ•ˆåœºæ™¯","slug":"MySQLç´¢å¼•çš„å¤±æ•ˆåœºæ™¯","date":"2022-02-25T02:23:52.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2022/02/25/MySQLç´¢å¼•çš„å¤±æ•ˆåœºæ™¯/","link":"","permalink":"https://suavess.github.io/2022/02/25/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E5%A4%B1%E6%95%88%E5%9C%BA%E6%99%AF/","excerpt":"","text":"ç´¢å¼•è®¾ç½® 1. æœ€å·¦å‰ç¼€æ³•åˆ™ æœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚ åŒ¹é…æœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œwhereæ¡ä»¶ä¸­çš„é¡ºåºä¸å½±å“ä½¿ç”¨ç´¢å¼•ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨é€‰æ‹© è¿åæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæ­¤æ—¶ä¸èµ°ç´¢å¼• ç¬¦åˆæœ€å·¦ç´¢å¼•ï¼Œä½†ä¸­é—´æœ‰è·³è·ƒï¼Œæ­¤æ—¶åªä¼šèµ°æœ€å·¦è¾¹çš„éƒ¨åˆ†ç´¢å¼•ï¼Œå¯ä»¥çœ‹åˆ°key_lenï¼ˆå³ä½¿ç”¨çš„ç´¢å¼•é•¿åº¦ï¼‰æ˜¯æ¯”ç¬¬ä¸€å¼ å›¾ä¸­çš„key_lenå°çš„ 2. èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ— éƒ½èµ°ç´¢å¼•æ—¶ï¼Œkey_lenå­—æ®µä¸º456 ç¬¬äºŒä¸ªæ¡ä»¶ä½¿ç”¨èŒƒå›´æœç´¢æ—¶ï¼Œæ­¤æ—¶key_lenæ˜¯304ï¼Œä¸åªä½¿ç”¨ä¸¤ä¸ªå­—æ®µæŸ¥è¯¢çš„key_lenç›¸åŒï¼Œè¯´æ˜åé¢çš„data_idå­—æ®µæ²¡æœ‰èµ°ç´¢å¼• 3.åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æ“ä½œ 4.å­—æ®µç±»å‹éšå¼è½¬æ¢ ç”±äºcorpidå­—æ®µæ˜¯varcharç±»å‹ï¼Œå½“whereæ¡ä»¶ä¸­ä¸åŠ å¼•å·æ—¶ï¼Œmysqlä¼šè¿›è¡Œéšå¼è½¬æ¢ï¼Œæ­¤æ—¶ç´¢å¼•ä¼šå¤±æ•ˆ 5.ç”¨oråˆ†å‰²çš„å­—æ®µæ¡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼• corpidä¸ºç´¢å¼•å­—æ®µï¼Œè€Œdelä¸ºéç´¢å¼•å­—æ®µ 6. MySQLä¼˜åŒ–å™¨åˆ¤æ–­ç´¢å¼•æŸ¥è¯¢æ›´æ…¢ å½“è¡¨ä¸­æ•°æ®è¾ƒå°‘ï¼Œæˆ–è€…æŸ¥è¯¢çš„æ¡ä»¶å è¡¨ä¸­æ•°æ®çš„æå¤§éƒ¨åˆ†æ—¶ï¼Œæ­¤æ—¶ç´¢å¼•æ•ˆç‡å¯èƒ½ä¸å¦‚å…¨è¡¨æ‰«æï¼ŒMySQLä¼šé€‰æ‹©å…¨è¡¨æ‰«æ 7.ä»¥%å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢ å¦‚æœåªæ˜¯å°¾éƒ¨çš„æ¨¡ç³ŠæŸ¥è¯¢æ˜¯ä¸ä¼šå¤±æ•ˆçš„ ä¸‹å›¾ä¸­ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•æ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå› ä¸ºè¡¨ä¸­æ•°æ®è¾ƒå°‘ï¼Œmysqlåˆ¤æ–­ç´¢å¼•é€Ÿåº¦ä¸å¦‚å…¨è¡¨æ‰«ææ‰€ä»¥é»˜è®¤èµ°äº†å…¨è¡¨æ‰«æ å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥è§£å†³è¯¥é—®é¢˜ï¼Œå³æŸ¥è¯¢çš„åˆ—å¯ä»¥åœ¨ç´¢å¼•ä¸­æ‰¾åˆ°","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"ç´¢å¼•å¤±æ•ˆ","slug":"ç´¢å¼•å¤±æ•ˆ","permalink":"https://suavess.github.io/tags/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/"}]},{"title":"MySQLä¸­çš„è§¦å‘å™¨","slug":"MySQLä¸­çš„è§¦å‘å™¨","date":"2022-02-24T11:36:53.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2022/02/24/MySQLä¸­çš„è§¦å‘å™¨/","link":"","permalink":"https://suavess.github.io/2022/02/24/MySQL%E4%B8%AD%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8/","excerpt":"","text":"1. ä»‹ç» è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼ŒæŒ‡åœ¨ insert/update/delete ä¹‹å‰æˆ–ä¹‹åï¼Œè§¦å‘å¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„SQLè¯­å¥é›†åˆã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ , æ—¥å¿—è®°å½• , æ•°æ®æ ¡éªŒç­‰æ“ä½œ ã€‚ ä½¿ç”¨åˆ«å OLD å’Œ NEW æ¥å¼•ç”¨è§¦å‘å™¨ä¸­å‘ç”Ÿå˜åŒ–çš„è®°å½•å†…å®¹ï¼Œè¿™ä¸å…¶ä»–çš„æ•°æ®åº“æ˜¯ç›¸ä¼¼çš„ã€‚ç°åœ¨è§¦å‘å™¨è¿˜åªæ”¯æŒè¡Œçº§è§¦å‘ï¼Œä¸æ”¯æŒè¯­å¥çº§è§¦å‘ã€‚ï¼ˆOracleæ—¢æœ‰è¡Œçº§è§¦å‘å™¨ï¼Œåˆæœ‰è¯­å¥çº§è§¦å‘å™¨ï¼‰ è§¦å‘å™¨ç±»å‹ NEW å’Œ OLDçš„ä½¿ç”¨ INSERT å‹è§¦å‘å™¨ NEW è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»æ–°å¢çš„æ•°æ® UPDATE å‹è§¦å‘å™¨ OLD è¡¨ç¤ºä¿®æ”¹ä¹‹å‰çš„æ•°æ® , NEW è¡¨ç¤ºå°†è¦æˆ–å·²ç»ä¿®æ”¹åçš„æ•°æ® DELETE å‹è§¦å‘å™¨ OLD è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»åˆ é™¤çš„æ•°æ® 2. åˆ›å»ºè§¦å‘å™¨2.1 è¯­æ³•ç»“æ„ :1CREATE TRIGGER trigger_name trigger_time trigger_event ON tb_name FOR EACH ROW trigger_stmt tb_name ï¼šéœ€è¦å»ºç«‹è§¦å‘å™¨çš„è¡¨å(åªèƒ½æ˜¯æ°¸ä¹…è¡¨ï¼Œä¸èƒ½å¯¹ä¸´æ—¶è¡¨åˆ›å»ºè§¦å‘å™¨) trigger_name ï¼šè§¦å‘å™¨åç§°ï¼Œè‡ªè¡ŒæŒ‡å®š trigger_timeï¼šè§¦å‘æ—¶æœºï¼Œå–å€¼BEFOREã€AFTER trigger_event ï¼šè§¦å‘äº‹ä»¶ï¼ŒINSERTã€UPDATEã€DELETE trigger_stmt ï¼š è§¦å‘ç¨‹åºä½“ï¼Œå¯ä»¥æ˜¯ä¸€æ¡SQLè¯­å¥æˆ–æ˜¯BEGINå’ŒENDåŒ…å«çš„å¤šæ¡è¯­å¥ 2.2 ç¤ºä¾‹2.2.1 éœ€æ±‚1é€šè¿‡è§¦å‘å™¨è®°å½• emp è¡¨çš„æ•°æ®å˜æ›´æ—¥å¿— , åŒ…å«å¢åŠ , ä¿®æ”¹ , åˆ é™¤ ; 2.2.2 é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨ :12345678create table emp_logs( id int(11) not null auto_increment, operation varchar(20) not null comment &#x27;æ“ä½œç±»å‹, insert/update/delete&#x27;, operate_time datetime not null comment &#x27;æ“ä½œæ—¶é—´&#x27;, operate_id int(11) not null comment &#x27;æ“ä½œè¡¨çš„ID&#x27;, operate_params varchar(500) comment &#x27;æ“ä½œå‚æ•°&#x27;, primary key(`id`))engine=innodb default charset=utf8; 2.2.3 åˆ›å»º insert å‹è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :1234567891011DELIMITER $create trigger emp_logs_insert_triggerafter insert on emp for each row begin insert into emp_logs (id,operation,operate_time,operate_id,operate_params) values(null,&#x27;insert&#x27;,now(),new.id,concat(&#x27;æ’å…¥å(id:&#x27;,new.id,&#x27;, name:&#x27;,new.name,&#x27;, age:&#x27;,new.age,&#x27;, salary:&#x27;,new.salary,&#x27;)&#x27;)); end $DELIMITER ; 2.2.4 åˆ›å»º update å‹è§¦å‘å™¨ï¼Œå®Œæˆæ›´æ–°æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :1234567891011DELIMITER $create trigger emp_logs_update_triggerafter update on emp for each row begin insert into emp_logs (id,operation,operate_time,operate_id,operate_params) values(null,&#x27;update&#x27;,now(),new.id,concat(&#x27;ä¿®æ”¹å‰(id:&#x27;,old.id,&#x27;, name:&#x27;,old.name,&#x27;, age:&#x27;,old.age,&#x27;, salary:&#x27;,old.salary,&#x27;) , ä¿®æ”¹å(id&#x27;,new.id, &#x27;name:&#x27;,new.name,&#x27;, age:&#x27;,new.age,&#x27;, salary:&#x27;,new.salary,&#x27;)&#x27;)); end $DELIMITER ; 2.2.5 åˆ›å»ºdelete è¡Œçš„è§¦å‘å™¨ , å®Œæˆåˆ é™¤æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :1234567891011DELIMITER $create trigger emp_logs_delete_triggerafter delete on emp for each row begin insert into emp_logs (id,operation,operate_time,operate_id,operate_params) values(null,&#x27;delete&#x27;,now(),old.id,concat(&#x27;åˆ é™¤å‰(id:&#x27;,old.id,&#x27;, name:&#x27;,old.name,&#x27;, age:&#x27;,old.age,&#x27;, salary:&#x27;,old.salary,&#x27;)&#x27;)); end $DELIMITER ; 2.2.6 æµ‹è¯•ï¼š123456insert into emp(id,name,age,salary) values(null, &#x27;å…‰æ˜å·¦ä½¿&#x27;,30,3500);insert into emp(id,name,age,salary) values(null, &#x27;å…‰æ˜å³ä½¿&#x27;,33,3200);update emp set age = 39 where id = 3;delete from emp where id = 5; 3. åˆ é™¤è§¦å‘å™¨è¯­æ³•ç»“æ„ : 1drop trigger [schema_name.]trigger_name å¦‚æœæ²¡æœ‰æŒ‡å®š schema_nameï¼Œé»˜è®¤ä¸ºå½“å‰æ•°æ®åº“ ã€‚ 4. æŸ¥çœ‹è§¦å‘å™¨å¯ä»¥é€šè¿‡æ‰§è¡Œ SHOW TRIGGERS å‘½ä»¤æŸ¥çœ‹è§¦å‘å™¨çš„çŠ¶æ€ã€è¯­æ³•ç­‰ä¿¡æ¯ã€‚ è¯­æ³•ç»“æ„ ï¼š 1show triggers ; 5. æ€»ç»“ ä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨æ•°æ®åº“å±‚é¢ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¹¶ä¸”å¯ä»¥å°‘å†™ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ä¾‹å¦‚è®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œå¯ä»¥èŠ‚çœæå¤§é‡çš„é€»è¾‘ä»£ç  ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé€»è¾‘åœ¨æ•°æ®åº“å±‚é¢ï¼Œåº”ç”¨å±‚è°ƒè¯•å›°éš¾ï¼Œå‡ºç°é—®é¢˜éš¾ä»¥å®šä½ æ³¨æ„ç‚¹ å¦‚æœBEFOREè§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQLæ— æ³•æ­£ç¡®æ‰§è¡Œã€‚ SQLæ‰§è¡Œå¤±è´¥æ—¶ï¼ŒAFTERå‹è§¦å‘å™¨ä¸ä¼šè§¦å‘ã€‚ AFTERç±»å‹çš„è§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQLä¼šå›æ»šã€‚","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"è§¦å‘å™¨","slug":"è§¦å‘å™¨","permalink":"https://suavess.github.io/tags/%E8%A7%A6%E5%8F%91%E5%99%A8/"}]},{"title":"MySQLç´¢å¼•ç»“æ„","slug":"MySQLç´¢å¼•ç»“æ„","date":"2022-02-22T02:38:57.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2022/02/22/MySQLç´¢å¼•ç»“æ„/","link":"","permalink":"https://suavess.github.io/2022/02/22/MySQL%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84/","excerpt":"","text":"ç´¢å¼•æ˜¯åœ¨MySQLçš„å­˜å‚¨å¼•æ“å±‚ä¸­å®ç°çš„ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨å±‚å®ç°çš„ã€‚æ‰€ä»¥æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•éƒ½ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å­˜å‚¨å¼•æ“éƒ½æ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹çš„ã€‚MySQLç›®å‰æä¾›äº†ä»¥ä¸‹4ç§ç´¢å¼•ï¼š BTREE ç´¢å¼• ï¼š æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†ç´¢å¼•éƒ½æ”¯æŒ B æ ‘ç´¢å¼•ã€‚ HASH ç´¢å¼•ï¼šåªæœ‰Memoryå¼•æ“æ”¯æŒ ï¼Œ ä½¿ç”¨åœºæ™¯ç®€å• ã€‚ R-tree ç´¢å¼•ï¼ˆç©ºé—´ç´¢å¼•ï¼‰ï¼šç©ºé—´ç´¢å¼•æ˜¯MyISAMå¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘ï¼Œä¸åšç‰¹åˆ«ä»‹ç»ã€‚ Full-text ï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰ ï¼šå…¨æ–‡ç´¢å¼•ä¹Ÿæ˜¯MyISAMçš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºå…¨æ–‡ç´¢å¼•ï¼ŒInnoDBä»Mysql5.6ç‰ˆæœ¬å¼€å§‹æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚ MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ ç´¢å¼• InnoDBå¼•æ“ MyISAMå¼•æ“ Memoryå¼•æ“ BTREEç´¢å¼• æ”¯æŒ æ”¯æŒ æ”¯æŒ HASH ç´¢å¼• ä¸æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ R-tree ç´¢å¼• ä¸æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ Full-text 5.6ç‰ˆæœ¬ä¹‹åæ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ï¼Œéƒ½æ˜¯æŒ‡B+æ ‘ï¼ˆå¤šè·¯æœç´¢æ ‘ï¼Œå¹¶ä¸ä¸€å®šæ˜¯äºŒå‰çš„ï¼‰ç»“æ„ç»„ç»‡çš„ç´¢å¼•ã€‚å…¶ä¸­èšé›†ç´¢å¼•ã€å¤åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•é»˜è®¤éƒ½æ˜¯ä½¿ç”¨ B+tree ç´¢å¼•ï¼Œç»Ÿç§°ä¸º ç´¢å¼•ã€‚ BTreeç´¢å¼•BTreeåˆå«å¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼Œä¸€é¢—må‰çš„BTreeç‰¹æ€§å¦‚ä¸‹ï¼š æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«mä¸ªå­©å­ã€‚ é™¤æ ¹èŠ‚ç‚¹ä¸å¶å­èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘æœ‰[(m/2)]ä¸ªå­©å­ã€‚ è‹¥æ ¹èŠ‚ç‚¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤ä¸ªå­©å­ã€‚ æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ã€‚ æ¯ä¸ªéå¶å­èŠ‚ç‚¹ç”±nä¸ªkeyä¸n+1ä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­[ceil(m/2)-1] &lt;= n &lt;= m-1 ä»¥5å‰BTreeä¸ºä¾‹ï¼Œkeyçš„æ•°é‡ï¼šå…¬å¼æ¨å¯¼[ceil(m/2)-1] &lt;= n &lt;= m-1ã€‚æ‰€ä»¥ 2 &lt;= n &lt;=4 ã€‚å½“n&gt;4æ—¶ï¼Œä¸­é—´èŠ‚ç‚¹åˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ï¼Œä¸¤è¾¹èŠ‚ç‚¹åˆ†è£‚ã€‚ æ’å…¥ C N G A H E K Q M F W L T Z D P R X Y S æ•°æ®ä¸ºä¾‹ã€‚ æ¼”å˜è¿‡ç¨‹å¦‚ä¸‹ï¼š 1). æ’å…¥å‰4ä¸ªå­—æ¯ C N G A 2). æ’å…¥Hï¼Œn&gt;4ï¼Œä¸­é—´å…ƒç´ Gå­—æ¯å‘ä¸Šåˆ†è£‚åˆ°æ–°çš„èŠ‚ç‚¹ 3). æ’å…¥Eï¼ŒKï¼ŒQä¸éœ€è¦åˆ†è£‚ 4). æ’å…¥Mï¼Œä¸­é—´å…ƒç´ Må­—æ¯å‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹G 5). æ’å…¥Fï¼ŒWï¼ŒLï¼ŒTä¸éœ€è¦åˆ†è£‚ 6). æ’å…¥Zï¼Œä¸­é—´å…ƒç´ Tå‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ä¸­ 7). æ’å…¥Dï¼Œä¸­é—´å…ƒç´ Då‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ä¸­ã€‚ç„¶åæ’å…¥Pï¼ŒRï¼ŒXï¼ŒYä¸éœ€è¦åˆ†è£‚ 8). æœ€åæ’å…¥Sï¼ŒNPQRèŠ‚ç‚¹n&gt;5ï¼Œä¸­é—´èŠ‚ç‚¹Qå‘ä¸Šåˆ†è£‚ï¼Œä½†åˆ†è£‚åçˆ¶èŠ‚ç‚¹DGMTçš„n&gt;5ï¼Œä¸­é—´èŠ‚ç‚¹Må‘ä¸Šåˆ†è£‚ åˆ°æ­¤ï¼Œè¯¥BTREEæ ‘å°±å·²ç»æ„å»ºå®Œæˆäº†ï¼Œ BTREEæ ‘ å’Œ äºŒå‰æ ‘ ç›¸æ¯”ï¼Œ æŸ¥è¯¢æ•°æ®çš„æ•ˆç‡æ›´é«˜ï¼Œ å› ä¸ºå¯¹äºç›¸åŒçš„æ•°æ®é‡æ¥è¯´ï¼ŒBTREEçš„å±‚çº§ç»“æ„æ¯”äºŒå‰æ ‘å°ï¼Œå› æ­¤æœç´¢é€Ÿåº¦å¿«ã€‚ B+TREE ç»“æ„B+Treeä¸ºBTreeçš„å˜ç§ï¼ŒB+Treeä¸BTreeçš„åŒºåˆ«ä¸ºï¼š 1). nå‰B+Treeæœ€å¤šå«æœ‰nä¸ªkeyï¼Œè€ŒBTreeæœ€å¤šå«æœ‰n-1ä¸ªkeyã€‚ 2). B+Treeçš„å¶å­èŠ‚ç‚¹ä¿å­˜æ‰€æœ‰çš„keyä¿¡æ¯ï¼Œä¾keyå¤§å°é¡ºåºæ’åˆ—ã€‚ 3). æ‰€æœ‰çš„éå¶å­èŠ‚ç‚¹éƒ½å¯ä»¥çœ‹ä½œæ˜¯keyçš„ç´¢å¼•éƒ¨åˆ†ã€‚ ç”±äºB+Treeåªæœ‰å¶å­èŠ‚ç‚¹ä¿å­˜keyä¿¡æ¯ï¼ŒæŸ¥è¯¢ä»»ä½•keyéƒ½è¦ä»rootèµ°åˆ°å¶å­ã€‚æ‰€ä»¥B+Treeçš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šã€‚ MySQLä¸­çš„B+TreeMySqlç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„B+Treeè¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸB+Treeçš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚ MySQLä¸­çš„ B+Tree ç´¢å¼•ç»“æ„ç¤ºæ„å›¾:","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"ç´¢å¼•","slug":"ç´¢å¼•","permalink":"https://suavess.github.io/tags/%E7%B4%A2%E5%BC%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://suavess.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"8ã€ElasticSearchç´¢å¼•Mappingæ˜ å°„å…³ç³»","slug":"8ã€ElasticSearchç´¢å¼•Mappingæ˜ å°„å…³ç³»","date":"2021-10-28T02:08:35.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/10/28/8ã€ElasticSearchç´¢å¼•Mappingæ˜ å°„å…³ç³»/","link":"","permalink":"https://suavess.github.io/2021/10/28/8%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95Mapping%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB/","excerpt":"","text":"ElasticSearchä¸­çš„æ˜ å°„å…³ç³»ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œç”¨äºè¯´æ˜è¯¥å­—æ®µçš„ç±»å‹åŠçº¦æŸæ¡ä»¶ åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•1PUT user åˆ›å»ºæ˜ å°„1234567891011121314151617PUT user/_mapping&#123; &quot;properties&quot;: &#123; &quot;name&quot;:&#123; &quot;type&quot;: &quot;text&quot;, &quot;index&quot;: true &#125;, &quot;sex&quot;:&#123; &quot;type&quot;: &quot;keyword&quot;, &quot;index&quot;: true &#125;, &quot;tel&quot;:&#123; &quot;type&quot;: &quot;keyword&quot;, &quot;index&quot;: false &#125; &#125;&#125; æŸ¥è¯¢æ˜ å°„1GET user/_mapping æ˜ å°„ä½œç”¨ å…ˆæ’å…¥ä¸€æ¡æ•°æ® 123456PUT user/_create/1001&#123; &quot;name&quot;:&quot;å°ç±³&quot;, &quot;sex&quot;:&quot;ç”·çš„&quot;, &quot;tel&quot;:&quot;1111&quot;&#125; æŸ¥è¯¢nameä¸­å«æœ‰â€œå°â€çš„æ•°æ® 12345678GET user/_search&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;name&quot;:&quot;å°&quot; &#125; &#125;&#125; æŸ¥è¯¢sexå«æœ‰â€ç”·â€œçš„æ•°æ® 12345678GET user/_search&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;sex&quot;:&quot;ç”·&quot; &#125; &#125;&#125; å¯ä»¥çœ‹åˆ°æ²¡æœ‰è¿”å›æ•°æ®ï¼ŒåŸå› æ˜¯sexè¿™ä¸ªå­—æ®µæŒ‡å®šäº†ç±»å‹ä¸ºkeywordï¼Œè€Œkeywordç±»å‹çš„å­—æ®µä¸ä¼šè¢«åˆ†è¯ï¼Œå› æ­¤éœ€è¦å®Œå…¨åŒ¹é…ä¸Šæ‰å¯ä»¥æŸ¥è¯¢å‡ºæ•°æ® æŸ¥è¯¢sexå«æœ‰â€ç”·çš„â€œçš„æ•°æ® 12345678GET user/_search&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;sex&quot;:&quot;ç”·çš„&quot; &#125; &#125;&#125; æŸ¥è¯¢ç”µè¯ 12345678GET user/_search&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;tel&quot;:&quot;11&quot; &#125; &#125;&#125; æ­¤æ—¶ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯åˆ›å»ºæ˜ å°„æ—¶ï¼ŒæŒ‡å®šäº†indexä¸ºfalseï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡è¿™ä¸ªå­—æ®µæŸ¥è¯¢æ•°æ®","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"7ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(3)","slug":"7ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(3)","date":"2021-10-27T08:56:19.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/10/27/7ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(3)/","link":"","permalink":"https://suavess.github.io/2021/10/27/7%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(3)/","excerpt":"","text":"é«˜äº®æŸ¥è¯¢12345678910111213GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match_phrase&quot;:&#123; &quot;category&quot; : &quot;ä¸º&quot; &#125; &#125;, &quot;highlight&quot;:&#123; &quot;fields&quot;:&#123; &quot;category&quot;:&#123;&#125; &#125; &#125;&#125; èšåˆæŸ¥è¯¢èšåˆæŸ¥è¯¢ç±»ä¼¼å…³ç³»å‹æ•°æ®åº“ä¸­çš„ group byï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„èšåˆï¼Œä¾‹å¦‚å–æœ€å¤§å€¼maxã€å¹³å‡å€¼avgç­‰ç­‰ã€‚ æŒ‰priceå­—æ®µè¿›è¡Œåˆ†ç»„ï¼š 12345678910GET shopping/_search&#123; &quot;aggs&quot;:&#123; &quot;price_group&quot;:&#123; &quot;terms&quot;:&#123; &quot;field&quot;:&quot;price&quot; &#125; &#125; &#125;&#125; ä¸Šè¿°çš„è¿”å›ç»“æœä¼šæºå¸¦åŸå§‹æ•°æ®ï¼Œå¦‚æœä¸æƒ³æºå¸¦å¯ä»¥æ–°å¢ä¸€ä¸ªsizeçš„å­—æ®µ 1234567891011GET shopping/_search&#123; &quot;aggs&quot;:&#123; &quot;price_group&quot;:&#123; &quot;terms&quot;:&#123; &quot;field&quot;:&quot;price&quot; &#125; &#125; &#125;, &quot;size&quot;: 0&#125; å¯¹æ‰€æœ‰æ‰‹æœºä»·æ ¼æ±‚å¹³å‡å€¼ 1234567891011GET shopping/_search&#123; &quot;aggs&quot;:&#123; &quot;price_avg&quot;:&#123; &quot;avg&quot;:&#123; &quot;field&quot;:&quot;price&quot; &#125; &#125; &#125;, &quot;size&quot;:0&#125;","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"6ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(2)","slug":"6ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(2)","date":"2021-10-27T08:14:19.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/10/27/6ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(2)/","link":"","permalink":"https://suavess.github.io/2021/10/27/6%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(2)/","excerpt":"","text":"å¤šæ¡ä»¶æŸ¥è¯¢ å‡è®¾æƒ³æ‰¾å‡ºå°ç±³ç‰Œå­ï¼Œä»·æ ¼ä¸º3999å…ƒçš„ã€‚ï¼ˆmustç›¸å½“äºæ•°æ®åº“çš„&amp;&amp;ï¼‰ 12345678910111213141516GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;bool&quot;:&#123; &quot;must&quot;:[&#123; &quot;match&quot;:&#123; &quot;category&quot;:&quot;å°ç±³&quot; &#125; &#125;,&#123; &quot;match&quot;:&#123; &quot;price&quot;:3999.00 &#125; &#125;] &#125; &#125;&#125; å‡è®¾æƒ³æ‰¾å‡ºå°ç±³å’Œåä¸ºçš„ç‰Œå­ã€‚ï¼ˆshouldç›¸å½“äºæ•°æ®åº“çš„||ï¼‰ 12345678910111213141516GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;bool&quot;:&#123; &quot;should&quot;:[&#123; &quot;match&quot;:&#123; &quot;category&quot;:&quot;å°ç±³&quot; &#125; &#125;,&#123; &quot;match&quot;:&#123; &quot;category&quot;:&quot;åä¸º&quot; &#125; &#125;] &#125;, &#125;&#125; å‡è®¾æƒ³æ‰¾å‡ºå°ç±³å’Œåä¸ºçš„ç‰Œå­ï¼Œä»·æ ¼å¤§äº4000å…ƒçš„æ‰‹æœºã€‚ 1234567891011121314151617181920212223242526GET shopping/_search&#123; &quot;query&quot;: &#123; &quot;bool&quot;: &#123; &quot;should&quot;: [ &#123; &quot;match&quot;: &#123; &quot;category&quot;: &quot;å°ç±³&quot; &#125; &#125;, &#123; &quot;match&quot;: &#123; &quot;category&quot;: &quot;åä¸º&quot; &#125; &#125; ], &quot;filter&quot;: &#123; &quot;range&quot;: &#123; &quot;price&quot;: &#123; &quot;gt&quot;: 4000 &#125; &#125; &#125; &#125; &#125;&#125; å®Œå…¨åŒ¹é…æŸ¥è¯¢å³éœ€è¦å®Œå…¨åŒ…å«æœç´¢æ¡ä»¶çš„æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åšåˆ†è¯å¤„ç† 12345678GET shopping/_search&#123; &quot;query&quot;: &#123; &quot;match_phrase&quot;: &#123; &quot;category&quot;: &quot;å°ä¸º&quot; &#125; &#125;&#125;","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"5ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(1)","slug":"5ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(1)","date":"2021-10-27T07:28:09.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/10/27/5ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(1)/","link":"","permalink":"https://suavess.github.io/2021/10/27/5%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(1)/","excerpt":"","text":"ä¸»é”®æŸ¥è¯¢1GET shopping/_doc/1 å…¨æŸ¥è¯¢1GET shopping/_search æ¡ä»¶æŸ¥è¯¢é€šè¿‡é“¾æ¥ä¸Šæ‹¼æ¥å‚æ•°çš„æ–¹å¼1GET shopping/_search?q=category:åä¸º PS:ä¸å»ºè®®å°†å‚æ•°æ‹¼æ¥åœ¨é“¾æ¥ä¸Šï¼Œå¯èƒ½ä¼šæœ‰ä¹±ç é—®é¢˜ é€šè¿‡è¯·æ±‚ä½“12345678GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;category&quot;:&quot;åä¸º&quot; &#125; &#125;&#125; é€šè¿‡è¯·æ±‚ä½“æŸ¥è¯¢æ‰€æœ‰123456GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match_all&quot;:&#123;&#125; &#125;&#125; æŸ¥è¯¢æŒ‡å®šå­—æ®µ1234567GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match_all&quot;:&#123;&#125; &#125;, &quot;_source&quot;:[&quot;title&quot;]&#125; åˆ†é¡µæŸ¥è¯¢12345678GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match_all&quot;:&#123;&#125; &#125;, &quot;from&quot;:0, &quot;size&quot;:1&#125; æŸ¥è¯¢æ’åº1234567891011GET shopping/_search&#123; &quot;query&quot;:&#123; &quot;match_all&quot;:&#123;&#125; &#125;, &quot;sort&quot;:&#123; &quot;price&quot;:&#123; &quot;order&quot;:&quot;desc&quot; &#125; &#125;&#125;","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"4ã€ElasticSearchæ–‡æ¡£çš„ä¿®æ”¹","slug":"4ã€ElasticSearchæ–‡æ¡£çš„ä¿®æ”¹","date":"2021-10-27T05:56:43.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/10/27/4ã€ElasticSearchæ–‡æ¡£çš„ä¿®æ”¹/","link":"","permalink":"https://suavess.github.io/2021/10/27/4%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E4%BF%AE%E6%94%B9/","excerpt":"","text":"å®Œå…¨è¦†ç›–ä¿®æ”¹å®Œå…¨è¦†ç›–æ“ä½œæ˜¯å¹‚ç­‰æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨PUTæ–¹æ³• 1234567PUT shopping/_doc/1&#123; &quot;title&quot;:&quot;åä¸ºæ‰‹æœº&quot;, &quot;category&quot;:&quot;åä¸º&quot;, &quot;images&quot;:&quot;http://www.gulixueyuan.com/hw.jpg&quot;, &quot;price&quot;:1999.00&#125; æ­¤æ—¶å†è·å–ä¸€ä¸‹ 1GET shopping/_doc/1 å¯ä»¥çœ‹åˆ°æ•´ä¸ªæ•°æ®ä½“è¢«å®Œå…¨è¦†ç›–äº† å±€éƒ¨ä¿®æ”¹123456POST shopping/_upodate/1&#123; &quot;doc&quot;: &#123; &quot;title&quot;:&quot;OPPOæ‰‹æœº&quot; &#125;&#125; æ­¤æ—¶å†è·å–ä¸€é","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"3ã€ElasticSearchæ–‡æ¡£çš„åˆ›å»ºåŠåˆ é™¤","slug":"3ã€ElasticSearchæ–‡æ¡£çš„åˆ›å»º","date":"2021-10-27T03:16:14.000Z","updated":"2022-06-16T02:01:19.363Z","comments":true,"path":"2021/10/27/3ã€ElasticSearchæ–‡æ¡£çš„åˆ›å»º/","link":"","permalink":"https://suavess.github.io/2021/10/27/3%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%9B%E5%BB%BA/","excerpt":"","text":"åˆ›å»ºæ–‡æ¡£åˆ›å»ºæ–‡æ¡£éœ€è¦ä½¿ç”¨POSTè¯·æ±‚ï¼Œå¦‚æœç”¨PUTè¯·æ±‚åˆ™ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯PUTè¯·æ±‚åº”å½“ä¸ºå¹‚ç­‰æ€§æ“ä½œï¼Œè€Œä¸æŒ‡å®šidç›´æ¥åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œä¼šä¸æ–­ç”Ÿæˆæ–°çš„æ–‡æ¡£ï¼Œè¯¥æ“ä½œä¸ä¸ºå¹‚ç­‰æ“ä½œï¼Œå› æ­¤æ— æ³•ä½¿ç”¨PUTè¯·æ±‚ 1234567PUT shopping/_doc&#123; &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;, &quot;category&quot;:&quot;å°ç±³&quot;, &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;, &quot;price&quot;:3999.00&#125; 1234567POST shopping/_doc&#123; &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;, &quot;category&quot;:&quot;å°ç±³&quot;, &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;, &quot;price&quot;:3999.00&#125; PS:åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œå¦‚æœæŒ‡å®šç´¢å¼•ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥ç´¢å¼• _idä¸ºElasticSearchè‡ªåŠ¨ä¸ºè¯¥æ–‡æ¡£ç”Ÿæˆçš„idï¼Œå¦‚æœæƒ³è¦è‡ªå·±æŒ‡å®šidï¼Œåˆ™éœ€è¦åœ¨urlåé¢æ‹¼æ¥ä¸Šid 1234567POST shopping/_doc/1&#123; &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;, &quot;category&quot;:&quot;å°ç±³&quot;, &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;, &quot;price&quot;:3999.00&#125; æŒ‡å®šidåï¼Œæ“ä½œå°±æ˜¯å¹‚ç­‰æ“ä½œäº†ï¼Œå› æ­¤ç†è®ºä¸Šå¯ä»¥æ¢æˆPUTæ–¹å¼è¯·æ±‚ï¼Œ 1234567PUT shopping/_doc/1&#123; &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;, &quot;category&quot;:&quot;å°ç±³&quot;, &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;, &quot;price&quot;:3999.00&#125; åˆ é™¤æ–‡æ¡£åŒç†ï¼Œåªè¦å°†è¯·æ±‚æ–¹å¼æ”¹ä¸ºDELETEå³å¯ 1DELETE shopping/_doc/1","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"2ã€ElasticSearchç´¢å¼•çš„åˆ›å»ºæŸ¥è¯¢åŠåˆ é™¤","slug":"2ã€ElasticSearchç´¢å¼•çš„åˆ›å»ºæŸ¥è¯¢åŠåˆ é™¤","date":"2021-10-27T02:30:25.000Z","updated":"2022-06-16T02:01:19.363Z","comments":true,"path":"2021/10/27/2ã€ElasticSearchç´¢å¼•çš„åˆ›å»ºæŸ¥è¯¢åŠåˆ é™¤/","link":"","permalink":"https://suavess.github.io/2021/10/27/2%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E6%9F%A5%E8%AF%A2%E5%8F%8A%E5%88%A0%E9%99%A4/","excerpt":"","text":"åç»­æ“ä½œå‡åœ¨Kibanaçš„Dev Toolsä¸­å®Œæˆ åˆ›å»ºç´¢å¼•åˆ›å»ºä½¿ç”¨PUTçš„è¯·æ±‚æ–¹å¼ å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºshoppingçš„ç´¢å¼• 1PUT shopping æ­¤æ—¶å†æ¬¡è°ƒç”¨åˆ™ä¼šæŠ¥é”™ æŸ¥è¯¢ç´¢å¼• æŸ¥è¯¢æŒ‡å®šç´¢å¼• å°†PUTæ”¹ä¸ºGETå³å¯ 1GET shopping æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼• åŠ ä¸Š?våä¼šå±•ç¤ºå­—æ®µå¤´ä¿¡æ¯ 1GET _cat/indices?v åˆ é™¤ç´¢å¼•ä¸æŸ¥è¯¢æŒ‡å®šç´¢å¼•çš„é€»è¾‘ä¸€è‡´ï¼Œå°†è¯·æ±‚æ–¹å¼æ”¹ä¸ºDELETEå³å¯ 1DELETE shopping æ­¤æ—¶å†æŸ¥è¯¢åˆ™ä¼šè¿”å›404 1GET shopping","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"}]},{"title":"1ã€Dockerå®‰è£…ElasticSearchå’ŒKibana","slug":"1ã€Dockerå®‰è£…ElasticSearchå’ŒKibana","date":"2021-10-26T13:09:45.000Z","updated":"2022-06-16T02:01:19.363Z","comments":true,"path":"2021/10/26/1ã€Dockerå®‰è£…ElasticSearchå’ŒKibana/","link":"","permalink":"https://suavess.github.io/2021/10/26/1%E3%80%81Docker%E5%AE%89%E8%A3%85ElasticSearch%E5%92%8CKibana/","excerpt":"","text":"å®‰è£…ElasticSearchå…ˆæ‹‰ä¸‹esçš„é•œåƒ 1docker pull elasticsearch:7.12.0 é•œåƒæ‹‰å–å®Œæ¯•åæ–°å»ºå®¹å™¨ 1docker run --name elasticsearch -p 9200:9200 -d elasticsearch:7.12.0 ç­‰eså¯åŠ¨å®Œæˆåï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ 1curl http://127.0.0.1:9200 æˆ–è€…åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://127.0.0.1:9200è¿™ä¸ªç½‘å€ï¼Œå¦‚æœèƒ½çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜æˆ‘ä»¬çš„esæ˜¯å·²ç»å®‰è£…å¥½äº†çš„ã€‚ 1234567891011121314151617&#123; &quot;name&quot;: &quot;e0c0b0ff715b&quot;, &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &quot;cluster_uuid&quot;: &quot;c42jGCPrRHiGTix4pUl9EQ&quot;, &quot;version&quot;: &#123; &quot;number&quot;: &quot;7.12.0&quot;, &quot;build_flavor&quot;: &quot;default&quot;, &quot;build_type&quot;: &quot;docker&quot;, &quot;build_hash&quot;: &quot;78722783c38caa25a70982b5b042074cde5d3b3a&quot;, &quot;build_date&quot;: &quot;2021-03-18T06:17:15.410153305Z&quot;, &quot;build_snapshot&quot;: false, &quot;lucene_version&quot;: &quot;8.8.0&quot;, &quot;minimum_wire_compatibility_version&quot;: &quot;6.8.0&quot;, &quot;minimum_index_compatibility_version&quot;: &quot;6.0.0-beta1&quot; &#125;, &quot;tagline&quot;: &quot;You Know, for Search&quot;&#125; å®‰è£…IKåˆ†è¯å™¨esè‡ªå¸¦çš„åˆ†è¯å™¨å¯¹ä¸­æ–‡åˆ†è¯ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸‹è½½å¼€æºçš„IKåˆ†è¯å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆè¿›å…¥å®¹å™¨ï¼Œç„¶åè¿›å…¥pluginsç›®å½•ä¸­ä¸‹è½½åˆ†è¯å™¨ï¼Œä¸‹è½½å®Œæˆåé‡å¯eså³å¯ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹: æ³¨æ„ï¼šelasticsearchçš„ç‰ˆæœ¬å’Œikåˆ†è¯å™¨çš„ç‰ˆæœ¬éœ€è¦ä¿æŒä¸€è‡´ï¼Œä¸ç„¶åœ¨é‡å¯çš„æ—¶å€™ä¼šå¤±è´¥ã€‚ 123docker exec -it elasticsearch /bin/bashcd /usr/share/elasticsearch/plugins/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.12.0/elasticsearch-analysis-ik-7.12.0.zip å®‰è£…KibanaåŒæ ·é€‚ç”¨dockerå®‰è£…kibanaå‘½ä»¤å¦‚ä¸‹: 1docker pull kibana:7.12.0 å®‰è£…å®Œæˆä»¥åéœ€è¦å¯åŠ¨kibanaå®¹å™¨ï¼Œéœ€è¦ä½¿ç”¨--linkè¿æ¥åˆ°elasticsearchå®¹å™¨ï¼Œ--linkå‘½ä»¤çš„æ ¼å¼ä¸ºname:aliasï¼Œå³éœ€è¦ç»‘å®šçš„å®¹å™¨åç§°ä»¥åŠèµ‹äºˆçš„åˆ«å 1docker run --name kibana --link=elasticsearch:es -p 5601:5601 -d kibana:7.12.0 å¯åŠ¨åéœ€è¦ä¿®æ”¹kibanaçš„é…ç½®æ–‡ä»¶ï¼Œå°†è¿æ¥esçš„åœ°å€ä¿®æ”¹ä¸ºåˆ›å»ºå®¹å™¨æ—¶å¡«å…¥çš„åˆ«å 123docker exec -it elasticsearch /bin/bashcd /usr/share/kibana/config/vi kibana.yml å°†elasticsearch.hostsé¡¹ä¿®æ”¹ä¸º [ &quot;http://es:9200&quot; ] é‡å¯kibanaååœ¨æµè§ˆå™¨ä¸­è¾“å…¥kibanaçš„åœ°å€å³å¯æ‰“å¼€kibanaçš„é¡µé¢äº†","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"},{"name":"Docker","slug":"Docker","permalink":"https://suavess.github.io/tags/Docker/"}]},{"title":"MySQL-limitæ•°æ®ä¸¢å¤±é—®é¢˜","slug":"Mysql-limitæ•°æ®ä¸¢å¤±é—®é¢˜","date":"2021-10-26T07:06:42.000Z","updated":"2022-06-16T02:01:19.366Z","comments":true,"path":"2021/10/26/Mysql-limitæ•°æ®ä¸¢å¤±é—®é¢˜/","link":"","permalink":"https://suavess.github.io/2021/10/26/Mysql-limit%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/","excerpt":"","text":"ä»Šå¤©åœ¨é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„bugï¼Œå‰ç«¯è°ƒæ¥å£åˆ†é¡µè¿”å›æ•°æ®æ—¶ï¼Œæœ‰ä¸¤æ¡æ•°æ®åœ¨ç¬¬ä¸€é¡µçš„æœ€åè¿”å›äº†ï¼Œç„¶ååˆåœ¨ç¬¬äºŒé¡µçš„å¤´è¿”å›äº†ï¼Œæœ¬ä»¥ä¸ºæ˜¯ç¨‹åºçš„é—®é¢˜ï¼Œæ’æŸ¥äº†åŠå¤©æœ€åå‘ç°æ˜¯Mysqlçš„é—®é¢˜ã€‚ Mysqlè¡¨æ•°æ® æŸ¥è¯¢æµç¨‹å…ˆå°è¯•æŸ¥è¯¢å‰äºŒåæ¡æ•°æ®1SELECT * FROM tb_customer_open_sea WHERE corpid = &#x27;1&#x27; AND del = 0 LIMIT 0,20; è¿”å›ç»“æœ å¯ä»¥çœ‹åˆ°idä¸º2å’Œ3çš„æ•°æ®ä¸¢å¤±äº†ï¼ŒåŒæ—¶è¿”å›äº†idä¸º21å’Œ22çš„æ•°æ®ï¼Œæ­¤æ—¶å†æŸ¥è¯¢ç¬¬äºŒé¡µçš„æ•°æ®æ—¶ 1SELECT * FROM tb_customer_open_sea WHERE corpid = &#x27;1&#x27; AND del = 0 LIMIT 20,20; å†æ¬¡è¿”å›äº†idä¸º21å’Œ22çš„æ•°æ®ï¼Œè¿™å°±ç¦»è°±äº†ï¼Œä¸¢äº†ä¸¤æ¡æ•°æ®ï¼Œéš¾é“æ˜¯æ²¡æ»¡è¶³whereæ¡ä»¶å—ï¼Ÿäºæ˜¯æˆ‘å»æ‰äº†limitè¯•äº†è¯• idä¸º2å’Œ3çš„æ•°æ®å‡ºç°äº†â€¦.è€Œå’Œåˆšæ‰é‚£æ¡SQLçš„åŒºåˆ«åªæ˜¯å»æ‰äº†limitï¼Œéš¾é“limitè¿˜ä¼šå½±å“æŸ¥è¯¢ç»“æœï¼Ÿï¼Ÿï¼Ÿç„¶åæˆ‘åˆåœ¨limitçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†order by æ­¤æ—¶è¿”å›çš„æ•°æ®ä¸­åŒ…å«äº†2å’Œ3ï¼Œè¯´æ˜æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œåªæ˜¯è¿”å›çš„é¡ºåºä¸å¯¹å¯èƒ½2å’Œ3çš„æ•°æ®æ’åœ¨äº†äºŒåæ¡ä»¥åï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒé¡µä¹Ÿä¸åŒ…å«è¿™ä¸¤æ¡æ•°æ®å‘¢ äºæ˜¯æˆ‘explainäº†ä¸€ä¸‹è¿™ä¸¤æ¡sqlï¼Œå‘ç°è¿™ä¸¤æ¡sqlå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸€æ¡èµ°äº†è”åˆç´¢å¼•ï¼Œç¬¬äºŒæ¡æ²¡èµ°è”åˆç´¢å¼•ï¼Œäºæ˜¯æˆ‘åˆå°è¯•äº†è®©ç¬¬äºŒæ¡sqlèµ°ç´¢å¼• æ¶ˆå¤±çš„æ•°æ®åˆå‡ºç°äº†ï¼Œæœç„¶æ˜¯ç´¢å¼•çš„é—®é¢˜(ä¸ç”¨limit 20,9æ˜¯å› ä¸ºè¡¨ä¸­ä¸€å…±å°±29æ¡æ•°æ®ï¼Œè¿™æ ·çš„è¯å°±æ˜¯å…¨è¡¨æ‰«æä¸ä¼šèµ°ç´¢å¼•äº†) æ€»ç»“å½“ä½¿ç”¨limitä¸ä½¿ç”¨order byæ—¶ï¼Œä¸”æŸ¥è¯¢æ¡ä»¶èµ°äº†æ™®é€šç´¢å¼•ï¼Œå°±å¯èƒ½ä¼šæŒ‰æ™®é€šç´¢å¼•çš„é¡ºåºè¿”å›æ•°æ®ï¼Œæ‰€ä»¥ç”¨äº†limitå°±å°½é‡åŠ ä¸Šorder by","categories":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"ç´¢å¼•","slug":"ç´¢å¼•","permalink":"https://suavess.github.io/tags/%E7%B4%A2%E5%BC%95/"}]},{"title":"Javaå¹¶å‘-CAS-ä¹è§‚é”-è§£æ","slug":"Javaå¹¶å‘-CAS-ä¹è§‚é”-è§£æ","date":"2021-05-26T10:05:24.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2021/05/26/Javaå¹¶å‘-CAS-ä¹è§‚é”-è§£æ/","link":"","permalink":"https://suavess.github.io/2021/05/26/Java%E5%B9%B6%E5%8F%91-CAS-%E4%B9%90%E8%A7%82%E9%94%81-%E8%A7%A3%E6%9E%90/","excerpt":"","text":"æœ¬æ–‡è®²è§£CASæœºåˆ¶ï¼Œä¸»è¦æ˜¯å› ä¸ºæœ€è¿‘å‡†å¤‡é¢è¯•é¢˜ï¼Œå‘ç°è¿™ä¸ªé—®é¢˜åœ¨é¢è¯•ä¸­å‡ºç°çš„é¢‘ç‡éå¸¸çš„é«˜ï¼Œå› æ­¤æŠŠè‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¸€äº›ç†è§£è®°å½•ä¸‹æ¥ã€‚ ä¹è§‚é”ä¸æ‚²è§‚é” synchronizedæ˜¯æ‚²è§‚é”ï¼Œè¿™ç§çº¿ç¨‹ä¸€æ—¦å¾—åˆ°é”ï¼Œå…¶ä»–éœ€è¦é”çš„çº¿ç¨‹å°±æŒ‚èµ·çš„æƒ…å†µå°±æ˜¯æ‚²è§‚é”ã€‚ CASæ“ä½œçš„å°±æ˜¯ä¹è§‚é”ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚ æ¨¡æ‹Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜å…ˆçœ‹ä¸‹é¢çš„ä»£ç ï¼Œæ‰§è¡Œç»“æœä¸è¨€è€Œå–»ï¼Œæœ€ç»ˆçš„ç»“æœä¸€å®šæ˜¯å°äºé¢„æœŸçš„1000 123456789101112131415161718192021222324252627282930313233343536/** * å¹¶å‘æ—¶çº¿ç¨‹å®‰å…¨é—®é¢˜ * * @author Suave * @author 2021/3/5 1:50 ä¸‹åˆ */public class Test01 &#123; static int count = 0; public static void main(String[] args) throws InterruptedException &#123; long startTime = System.currentTimeMillis(); int threadSize = 100; CountDownLatch countDownLatch = new CountDownLatch(threadSize); for (int i = 0; i &lt; threadSize; i++) &#123; new Thread(() -&gt; &#123; for (int j = 0; j &lt; 10; j++) &#123; try &#123; request(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; countDownLatch.countDown(); &#125;).start(); &#125; countDownLatch.await(); long endTime = System.currentTimeMillis(); System.out.printf(&quot;æ¶ˆè€—æ—¶é•¿: %d, ç»“æœ: %d&quot;, endTime - startTime, count); &#125; public static void request() throws InterruptedException &#123; TimeUnit.MILLISECONDS.sleep(5); count++; &#125;&#125; è¿™æ®µä»£ç çº¿ç¨‹ä¸å®‰å…¨çš„å…·ä½“åŸå› æ˜¯ count++ å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œcount++å®é™…ä¼šç»è¿‡ä¸‰ä¸ªæ­¥éª¤ è·å– count çš„å€¼ï¼Œå…ˆè®°ä¸º A A = count å°† A çš„å€¼åŠ ä¸€ï¼Œå¾—åˆ°B B = A+1 å°† B çš„å€¼èµ‹ç»™ count count = B åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶èµ°åˆ°ç¬¬ä¸€æ­¥ï¼ŒåŒæ—¶è·å–åˆ°äº†ç›¸åŒçš„A æ­¤æ—¶æ–°å¢åå°†å€¼èµ‹ç»™Bå°±ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ç»“æœcountåªåŠ äº†ä¸€çš„æƒ…å†µ çº¿ç¨‹å®‰å…¨é—®é¢˜è§£å†³ çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å¯ä»¥é€šè¿‡åŠ é”çš„æ–¹å¼è§£å†³ï¼Œå…ˆæ¥è¯•è¯•æœ€å¸¸ç”¨ä¹Ÿæœ€æ–¹ä¾¿çš„synchronizedå…³é”®å­—ï¼Œå³å‡è®¾æ¯æ¬¡éƒ½ä¼šæœ‰å†²çªï¼Œä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥çš„æ‚²è§‚é” 12345// åœ¨requestæ–¹æ³•ä¸Šé¢åŠ ä¸Šsynchronizedå…³é”®å­—public synchronized static void request() throws InterruptedException &#123; TimeUnit.MILLISECONDS.sleep(5); count++;&#125; â€‹ å†æ¥è¿è¡Œè¯•ä¸€ä¸‹ â€‹ å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ï¼Œçº¿ç¨‹å·²ç»å®‰å…¨äº†ã€‚ â€‹ ä½†æ˜¯ï¼Œè¿™ä¸ªè¿è¡Œæ•ˆç‡å°±å¾ˆæ„Ÿäººäº†â€¦â€¦â€¦ ç”¨CASä¹è§‚é”è§£å†³ å¢åŠ ä¸€ä¸ªCASæ–¹æ³•ï¼ŒåŒæ—¶æ›´æ”¹requestæ–¹æ³•ï¼Œæ¯æ¬¡èµ‹å€¼çš„æ—¶å€™å»æ¯”è¾ƒä¸€ä¸‹å€¼æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œæ”¹å˜äº†å°±é‡è¯• 123456789101112131415161718192021/** * CASæ–¹æ³• * * @param expectCount æœŸæœ›å€¼count * @param newCount éœ€è¦ç»™countèµ‹çš„æ–°å€¼ * @return true æˆåŠŸ false å¤±è´¥ */ public static synchronized boolean compareAndSwap(int expectCount, int newCount) &#123; if (count == expectCount) &#123; count = newCount; return true; &#125; return false; &#125; public static void request() throws InterruptedException &#123; TimeUnit.MILLISECONDS.sleep(5); int expectCount; // expectCountè¿”å›falseæ—¶è¦å†è·å–countçš„å€¼å¹¶é‡æ–°èµ‹å€¼ while (!compareAndSwap(expectCount=count, expectCount + 1)) &#123;&#125; &#125; å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œç»“æœä¸æˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ï¼Œæ€§èƒ½ä¹Ÿè¦å¼ºäºsynchronizedæ‚²è§‚é” é‚£ä¹ˆè¿™æ®µä¹è§‚é”çš„ä»£ç å°±ä¸€å®šä¸ä¼šå‡ºé—®é¢˜äº†å—ï¼Ÿ CPUæ‰§è¡ŒæŸä¸€æ®µä»£ç çš„æ—¶å€™ï¼Œä¼šå…ˆå°†æ•°æ®è¯»å–åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå½“è¯¥çº¿ç¨‹å°†æ•°æ®è¯»å–åˆ°é«˜é€Ÿç¼“å­˜ä¸­æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ›´æ–°äº†ä¸»å­˜ä¸­çš„å€¼ï¼Œæ­¤æ—¶æˆ‘ä»¬ç¼“å­˜ä¸­çš„å€¼å°±ä¸å‡†ç¡®äº† å½“æˆ‘ä»¬ä»¥ç¼“å­˜ä¸­çš„å€¼åšCASæ“ä½œæ—¶ï¼Œå°±ä¼šä¸é¢„æœŸå€¼ä¸ä¸€è‡´äº†ï¼Œå› æ­¤ï¼Œè¿˜è¦åœ¨ count å±æ€§ä¸ŠåŠ ä¸Š volatile å…³é”®å­—ï¼Œä¿è¯ç¨‹åºçš„å¯è§æ€§ï¼Œæ¯æ¬¡è·å–è¯¥å€¼æ—¶éƒ½å»ä¸»å­˜ä¸­è·å– CASçš„ç¼ºç‚¹å½“ç„¶ï¼ŒCASä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ CPUå¼€é”€è¾ƒå¤§åœ¨å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè®¸å¤šçº¿ç¨‹åå¤å°è¯•æ›´æ–°æŸä¸€ä¸ªå˜é‡ï¼Œå´åˆä¸€ç›´æ›´æ–°ä¸æˆåŠŸï¼Œå¾ªç¯å¾€å¤ï¼Œä¼šç»™CPUå¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ã€‚ ä¸èƒ½ä¿è¯ä»£ç å—çš„åŸå­æ€§CASæœºåˆ¶æ‰€ä¿è¯çš„åªæ˜¯ä¸€ä¸ªå˜é‡çš„åŸå­æ€§æ“ä½œï¼Œè€Œä¸èƒ½ä¿è¯æ•´ä¸ªä»£ç å—çš„åŸå­æ€§ã€‚æ¯”å¦‚éœ€è¦ä¿è¯3ä¸ªå˜é‡å…±åŒè¿›è¡ŒåŸå­æ€§çš„æ›´æ–°ï¼Œå°±ä¸å¾—ä¸ä½¿ç”¨Synchronizedäº†ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"é”æœºåˆ¶","slug":"é”æœºåˆ¶","permalink":"https://suavess.github.io/tags/%E9%94%81%E6%9C%BA%E5%88%B6/"}]},{"title":"Javaé›†åˆç±»-RandomAccessæ¥å£","slug":"Javaé›†åˆç±»-RandomAccessæ¥å£","date":"2021-04-26T04:59:21.000Z","updated":"2022-06-16T02:01:19.365Z","comments":true,"path":"2021/04/26/Javaé›†åˆç±»-RandomAccessæ¥å£/","link":"","permalink":"https://suavess.github.io/2021/04/26/Java%E9%9B%86%E5%90%88%E7%B1%BB-RandomAccess%E6%8E%A5%E5%8F%A3/","excerpt":"","text":"å‘ç°RandomAccessæ¥å£å› ä¸ºé¢è¯•çš„æ—¶å€™é—®åˆ°äº†æ€æ ·ä½¿ä¸€ä¸ª ArrayList å˜å¾—çº¿ç¨‹å®‰å…¨ ä½¿ç”¨è€ç‰Œçš„Vetor ä½¿ç”¨CopyOnWriteArrayList ä½¿ç”¨Collections.syncronizedList()æ–¹æ³•ä¼ å…¥ä¸€ä¸ªListï¼Œä¼šè¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„List ç­”å®Œåå¼•ç”³åˆ°Collections.syncronizedList()çš„å®ç°åŸç†ï¼Œå½“æ—¶æ²¡çœ‹è¿‡å…·ä½“å®ç°å¹¶æœªå›ç­”ä¸Šæ¥ã€‚å¤ç›˜æ—¶ç ”ç©¶äº†ä¸‹ï¼Œå‘ç°é¦–å…ˆä¼šå…ˆåˆ¤æ–­ä¼ è¿‡æ¥çš„Listæ˜¯å¦å®ç°äº†RandomAccessæ¥å£ RandomAccessæ¥å£è¯¦è§£ç‚¹è¿›Randomæ¥å£å‘ç°è¯¥æ¥å£å¹¶æ²¡æœ‰ä»»ä½•å±æ€§å’Œä»»ä½•æ–¹æ³• äºæ˜¯æŸ¥çœ‹jdk8å®˜æ–¹æ–‡æ¡£ å®˜æ–¹æ–‡æ¡£å†™æ˜äº†ï¼ŒRandomAccessæ¥å£ä¸»è¦æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œç”¨æ¥æ³¨æ˜è¿™ä¸ªListæ˜¯å¦æ”¯æŒéšæœºè®¿é—®ã€‚ ArrayListå®ç°äº†Randomæ¥å£è€ŒLinkedListå¹¶æœªå®ç° 12public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable &#123;&#125;public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable &#123;&#125; ArrayListåº•å±‚æ˜¯æ•°ç»„ï¼Œå ç”¨ä¸€ç‰‡è¿ç»­çš„ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—åç§»é‡æ¥ç›´æ¥è·å–å…ƒç´ ï¼Œå³æ”¯æŒéšæœºè®¿é—®ï¼Œæ­¤æ—¶ä½¿ç”¨for (int i=0, n=list.size(); i &lt; n; i++){}å¾ªç¯æ—¶çš„é€Ÿåº¦è¦å¿«äºiteratoré¡ºåºå¾ªç¯è®¿é—® LinkedListåº•å±‚æ˜¯åŒå‘é“¾è¡¨ï¼Œéå†è¦æŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹æŸ¥è¯¢ä¸‹å»ï¼Œæ­¤æ—¶iteratoré€Ÿåº¦è¦å¿«äºfor (int i=0, n=list.size(); i &lt; n; i++){} æ€§èƒ½æµ‹è¯• éšæœºå¾€æ•°ç»„å’Œé“¾è¡¨ä¸­æ’å…¥100000ä¸ªå…ƒç´ ï¼Œå¹¶åˆ†åˆ«æ‰“å°éå†æ—¶é—´ éå†ç»“æœ æ€»ç»“å¯ä»¥çœ‹åˆ°ArrayListï¼ˆå³RandomAccessæ¥å£æ ‡è¯†çš„ç±»ï¼‰ä½¿ç”¨æ™®é€šforå¾ªç¯éå†é€Ÿåº¦è¾ƒå¿« è€ŒLinkedListï¼ˆå³æœªè¢«RandomAccessæ¥å£æ ‡è¯†çš„ç±»ï¼‰ä½¿ç”¨è¿­ä»£å™¨éå†é€Ÿåº¦è¿œå¿«äºæ™®é€šforéå† åç»­éå†æ—¶å¯ä»¥æ ¹æ®æ˜¯å¦è¢«RandomAccessæ¥å£æ ‡è¯†é€‰æ‹©æ›´ä¼˜çš„éå†æ–¹å¼","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"é›†åˆ","slug":"é›†åˆ","permalink":"https://suavess.github.io/tags/%E9%9B%86%E5%90%88/"}]},{"title":"Javaä¸­çš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’","slug":"Javaä¸­çš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’","date":"2020-07-26T07:06:05.000Z","updated":"2022-06-16T02:01:19.364Z","comments":true,"path":"2020/07/26/Javaä¸­çš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’/","link":"","permalink":"https://suavess.github.io/2020/07/26/Java%E4%B8%AD%E7%9A%84%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/","excerpt":"","text":"Javaä¸­çš„å‚æ•°ä¼ é€’åˆ†ä¸ºå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ï¼ŒåŸºæœ¬ç±»å‹æ˜¯å€¼ä¼ é€’ï¼Œå°è£…ç±»æ˜¯å¼•ç”¨ä¼ é€’ã€‚ å€¼ä¼ é€’1234567891011public class Test01 &#123; public static void change(int num) &#123; num = 1; &#125; public static void main(String[] args) &#123; int num = 0; change(num); System.out.println(&quot;num=&quot; + num); &#125;&#125; ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœæ˜¯num=0ã€‚ å½“è°ƒç”¨changeæ–¹æ³•æ—¶ï¼Œjvmå®é™…ä¸Šæ˜¯å¤åˆ¶äº†ä¸€ä»½å‚æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæ— è®ºè¿™ä¸ªå¤åˆ¶åçš„å‚æ•°æ€ä¹ˆå˜ï¼Œmainæ–¹æ³•ä¸­çš„numå‚æ•°éƒ½æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚ ä»å†…å­˜åˆ†é…çš„è§’åº¦æ¥çœ‹ï¼Œæ ˆä¸­æ˜¯æœ‰ä¸¤ä¸ªå˜é‡çš„ã€‚ä¸€ä¸ªæ˜¯mainæ–¹æ³•ä¸­å®šä¹‰çš„numï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åœ¨ä¼ å‚æ—¶jvmå¤åˆ¶çš„ä¸€ä»½numå‰¯æœ¬ï¼Œæˆ‘ä»¬å°±å«å®ƒtempã€‚ä¸è®ºtempå€¼æ€ä¹ˆæ”¹å˜ï¼Œnumæ˜¯ä¸ä¼šå˜çš„ã€‚ å¼•ç”¨ä¼ å€¼1234567891011121314151617181920212223242526public class Test01 &#123; public static void changeAge(Student student) &#123; student.setAge(20); &#125; public static void main(String[] args) &#123; Student student = new Student(); student.setAge(18); changeAge(student); System.out.println(&quot;student.age=&quot; + student.getAge()); &#125; static class Student &#123; int age; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; &#125;&#125; ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœæ˜¯student.age=20ã€‚ mainæ–¹æ³•new Studentæ—¶ï¼Œjvmåœ¨å †ä¸­åˆ†é…äº†ä¸€å—å†…å­˜ç”¨äºå­˜æ”¾Studentå¯¹è±¡ã€‚å¹¶ä¸”åœ¨æ ˆä¸­å­˜æ”¾ä¸€ä¸ªstudentå¯¹è±¡ï¼Œå€¼æ˜¯æŒ‡å‘å †ä¸­Studentå¯¹è±¡çš„åœ°å€ã€‚ æŠŠstudentå˜é‡ä¼ å…¥changeAge()æ–¹æ³•æ—¶ï¼Œjvmå¤åˆ¶äº†ä¸€ä»½studentå˜é‡ã€‚ä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬å«å®ƒtempï¼Œtempçš„å€¼å’Œstudentæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŒ‡å‘å †ä¸­Studentå¯¹è±¡çš„åœ°å€ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘äº†å †ä¸­Studentå¯¹è±¡çš„åœ°å€ï¼Œæ­¤æ—¶ä¿®æ”¹çš„ä¹Ÿå°±æ˜¯å †ä¸­çš„è¯¥å¯¹è±¡ï¼Œå› æ­¤mainä¸­çš„studentå¯¹è±¡ä¹Ÿå‘ç”Ÿäº†å˜åŒ– ç‰¹æ®Šçš„String æŒ‰ç…§ä¸Šé¢çš„è¯´æ³•ï¼ŒStringä¸æ˜¯åŸºæœ¬ç±»å‹ï¼ŒæŒ‰ç†æ¥è¯´åº”è¯¥æ˜¯å¼•ç”¨ä¼ é€’ 12345678910111213public class Test01 &#123; public static void change(String str) &#123; str = &quot;456&quot;; &#125; public static void main(String[] args) &#123; String str = &quot;123&quot;; change(str); System.out.println(&quot;str = &quot; + str); &#125;&#125; å®é™…ä¸Šä¸Šé¢è¾“å‡ºçš„ç»“æœæ˜¯str = 123ã€‚ jvmåœ¨å®ä¾‹åŒ–å­—ç¬¦ä¸²æ—¶ä¼šä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ŒæŠŠsträ½œä¸ºå‚æ•°ä¼ å…¥change()æ–¹æ³•ã€‚jvmå¤åˆ¶äº†ä¸€ä»½strå˜é‡ï¼Œä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬å«å®ƒtempã€‚è¿™ä¸ªæ—¶å€™strå’Œtempéƒ½æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„&quot;123&quot;ã€‚ åç»­ç»™tempé‡æ–°èµ‹å€¼ä¸º&quot;456&quot;ï¼Œå¯ä»¥ç†è§£ä¸ºåœ¨å¸¸é‡æ± ä¸­æ–°å»ºäº†&quot;456&quot;è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†tempæŒ‡å‘å¸¸é‡æ± ä¸­çš„&quot;456&quot;ï¼Œæ­¤æ—¶strçš„æŒ‡å‘æ˜¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„ï¼Œå› æ­¤è¿˜æ˜¯&quot;123&quot;ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"}]}],"categories":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/categories/Java/"},{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/categories/MySQL/"},{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/categories/ElasticSearch/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://suavess.github.io/tags/Java/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://suavess.github.io/tags/%E5%9F%BA%E7%A1%80/"},{"name":"å…³é”®å­—","slug":"å…³é”®å­—","permalink":"https://suavess.github.io/tags/%E5%85%B3%E9%94%AE%E5%AD%97/"},{"name":"åç¼–è¯‘","slug":"åç¼–è¯‘","permalink":"https://suavess.github.io/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/"},{"name":"MySQL","slug":"MySQL","permalink":"https://suavess.github.io/tags/MySQL/"},{"name":"è¡Œé”","slug":"è¡Œé”","permalink":"https://suavess.github.io/tags/%E8%A1%8C%E9%94%81/"},{"name":"è¡¨é”","slug":"è¡¨é”","permalink":"https://suavess.github.io/tags/%E8%A1%A8%E9%94%81/"},{"name":"ç´¢å¼•å¤±æ•ˆ","slug":"ç´¢å¼•å¤±æ•ˆ","permalink":"https://suavess.github.io/tags/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/"},{"name":"è§¦å‘å™¨","slug":"è§¦å‘å™¨","permalink":"https://suavess.github.io/tags/%E8%A7%A6%E5%8F%91%E5%99%A8/"},{"name":"ç´¢å¼•","slug":"ç´¢å¼•","permalink":"https://suavess.github.io/tags/%E7%B4%A2%E5%BC%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://suavess.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"https://suavess.github.io/tags/ElasticSearch/"},{"name":"Docker","slug":"Docker","permalink":"https://suavess.github.io/tags/Docker/"},{"name":"é”æœºåˆ¶","slug":"é”æœºåˆ¶","permalink":"https://suavess.github.io/tags/%E9%94%81%E6%9C%BA%E5%88%B6/"},{"name":"é›†åˆ","slug":"é›†åˆ","permalink":"https://suavess.github.io/tags/%E9%9B%86%E5%90%88/"}]}