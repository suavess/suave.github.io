<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Javaä¸­transientå…³é”®å­—çš„ä½¿ç”¨</title>
      <link href="/2022/06/28/Java%E4%B8%ADtransient%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/06/28/Java%E4%B8%ADtransient%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³•"><a href="#transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³•" class="headerlink" title="transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³•"></a>transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³•</h2><div class="story post-story"><p>â€‹    æˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªå¯¹è±¡åªè¦å®ç°äº†Serilizableæ¥å£ï¼Œè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œjavaçš„è¿™ç§åºåˆ—åŒ–æ¨¡å¼ä¸ºå¼€å‘è€…æä¾›äº†å¾ˆå¤šä¾¿åˆ©ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¿…å…³ç³»å…·ä½“åºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œåªè¦è¿™ä¸ªç±»å®ç°äº†Serilizableæ¥å£ï¼Œè¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè‡ªåŠ¨åºåˆ—åŒ–ã€‚</p><p>   ç„¶è€Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œè¿™ä¸ªç±»çš„æœ‰äº›å±æ€§éœ€è¦åºåˆ—åŒ–ï¼Œè€Œå…¶ä»–å±æ€§ä¸éœ€è¦è¢«åºåˆ—åŒ–ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·æœ‰ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼Œé“¶è¡Œå¡å·ç­‰ï¼‰ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¸å¸Œæœ›åœ¨ç½‘ç»œæ“ä½œï¼ˆä¸»è¦æ¶‰åŠåˆ°åºåˆ—åŒ–æ“ä½œï¼Œæœ¬åœ°åºåˆ—åŒ–ç¼“å­˜ä¹Ÿé€‚ç”¨ï¼‰ä¸­è¢«ä¼ è¾“ï¼Œè¿™äº›ä¿¡æ¯å¯¹åº”çš„å˜é‡å°±å¯ä»¥åŠ ä¸Štransientå…³é”®å­—ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªå­—æ®µçš„ç”Ÿå‘½å‘¨æœŸä»…å­˜äºè°ƒç”¨è€…çš„å†…å­˜ä¸­è€Œä¸ä¼šå†™åˆ°ç£ç›˜é‡ŒæŒä¹…åŒ–ã€‚</p><p>   æ€»ä¹‹ï¼Œjava çš„transientå…³é”®å­—ä¸ºæˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ï¼Œä½ åªéœ€è¦å®ç°Serilizableæ¥å£ï¼Œå°†ä¸éœ€è¦åºåˆ—åŒ–çš„å±æ€§å‰æ·»åŠ å…³é”®å­—transientï¼Œåºåˆ—åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå±æ€§å°±ä¸ä¼šåºåˆ—åŒ–åˆ°æŒ‡å®šçš„ç›®çš„åœ°ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Suave</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/6/16 10:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">&quot;Suave&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;read before Serializable: &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">&quot;password: &quot;</span> + user.getPassword());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ObjectOutputStream os = <span class="keyword">new</span> ObjectOutputStream(</span><br><span class="line">                    Files.newOutputStream(Paths.get(<span class="string">&quot;/Users/suave/test.txt&quot;</span>)));</span><br><span class="line">            os.writeObject(user);</span><br><span class="line">            os.flush();</span><br><span class="line">            os.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ObjectInputStream is = <span class="keyword">new</span> ObjectInputStream(Files.newInputStream(Paths.get(<span class="string">&quot;/Users/suave/test.txt&quot;</span>)));</span><br><span class="line">            user = (User) is.readObject();</span><br><span class="line">            is.close();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;read after Serializable: &quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;username: &quot;</span> + user.getUsername());</span><br><span class="line">            System.out.println(<span class="string">&quot;password: &quot;</span> + user.getPassword());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">8294180014912103005L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">read before Serializable: </span><br><span class="line">username: Suave</span><br><span class="line">password: 123456</span><br><span class="line">read after Serializable: </span><br><span class="line">username: Suave</span><br><span class="line">password: null</span><br></pre></td></tr></table></figure><p>å¯†ç å­—æ®µä¸ºnullï¼Œè¯´æ˜ååºåˆ—åŒ–æ—¶æ ¹æœ¬æ²¡æœ‰ä»æ–‡ä»¶ä¸­è·å–åˆ°ä¿¡æ¯ã€‚</p></div><h2 id="transientä½¿ç”¨æ€»ç»“"><a href="#transientä½¿ç”¨æ€»ç»“" class="headerlink" title="transientä½¿ç”¨æ€»ç»“"></a>transientä½¿ç”¨æ€»ç»“</h2><div class="story post-story"><ol><li><p>ä¸€æ—¦å˜é‡è¢«transientä¿®é¥°ï¼Œå˜é‡å°†ä¸å†æ˜¯å¯¹è±¡æŒä¹…åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å˜é‡å†…å®¹åœ¨åºåˆ—åŒ–åæ— æ³•è·å¾—è®¿é—®ã€‚</p></li><li><p>transientå…³é”®å­—åªèƒ½ä¿®é¥°å˜é‡ï¼Œè€Œä¸èƒ½ä¿®é¥°æ–¹æ³•å’Œç±»ã€‚æ³¨æ„ï¼Œæœ¬åœ°å˜é‡æ˜¯ä¸èƒ½è¢«transientå…³é”®å­—ä¿®é¥°çš„ã€‚å˜é‡å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å˜é‡ï¼Œåˆ™è¯¥ç±»éœ€è¦å®ç°Serializableæ¥å£ã€‚</p></li><li><p>è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸å†èƒ½è¢«åºåˆ—åŒ–ï¼Œä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ã€‚</p></li></ol><p><code>ç¬¬ä¸‰ç‚¹å¯èƒ½æœ‰äº›è¿·æƒ‘ï¼Œå› ä¸ºå‘ç°åœ¨Userç±»ä¸­çš„usernameå­—æ®µå‰åŠ ä¸Šstaticå…³é”®å­—åï¼Œç¨‹åºè¿è¡Œç»“æœä¾ç„¶ä¸å˜ï¼Œå³staticç±»å‹çš„usernameä¹Ÿè¯»å‡ºæ¥ä¸ºâ€œSuaveâ€äº†ï¼Œè¿™ä¸ä¸ç¬¬ä¸‰ç‚¹è¯´çš„çŸ›ç›¾å—ï¼Ÿå®é™…ä¸Šæ˜¯è¿™æ ·çš„ï¼šç¬¬ä¸‰ç‚¹ç¡®å®æ²¡é”™ï¼ˆä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ï¼‰ï¼Œååºåˆ—åŒ–åç±»ä¸­staticå‹å˜é‡usernameçš„å€¼ä¸ºå½“å‰JVMä¸­å¯¹åº”staticå˜é‡çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯JVMä¸­çš„ä¸æ˜¯ååºåˆ—åŒ–å¾—å‡ºçš„ï¼Œå¯ä»¥æ¥ç®€å•è¯æ˜ä¸€ä¸‹ï¼š</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">&quot;Suave&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;read before Serializable: &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span> + user.getUsername());</span><br><span class="line">        System.out.println(<span class="string">&quot;password: &quot;</span> + user.getPassword());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ObjectOutputStream os = <span class="keyword">new</span> ObjectOutputStream(</span><br><span class="line">                    Files.newOutputStream(Paths.get(<span class="string">&quot;/Users/suave/test.txt&quot;</span>)));</span><br><span class="line">            os.writeObject(user);</span><br><span class="line">            os.flush();</span><br><span class="line">            os.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            User.username = <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line"></span><br><span class="line">            ObjectInputStream is = <span class="keyword">new</span> ObjectInputStream(Files.newInputStream(Paths.get(<span class="string">&quot;/Users/suave/test.txt&quot;</span>)));</span><br><span class="line">            user = (User) is.readObject();</span><br><span class="line">            is.close();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;\nread after Serializable: &quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;username: &quot;</span> + user.getUsername());</span><br><span class="line">            System.out.println(<span class="string">&quot;password: &quot;</span> + user.getPassword());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">8294180014912103005L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">read before Serializable: </span><br><span class="line">username: Suave</span><br><span class="line">password: 123456</span><br><span class="line"></span><br><span class="line">read after Serializable: </span><br><span class="line">username: abcde</span><br><span class="line">password: null</span><br></pre></td></tr></table></figure><p>è¿™è¯´æ˜ååºåˆ—åŒ–åç±»ä¸­staticå‹å˜é‡usernameçš„å€¼ä¸ºå½“å‰JVMä¸­å¯¹åº”staticå˜é‡çš„å€¼ï¼Œä¸ºä¿®æ”¹åjmwangï¼Œè€Œä¸æ˜¯åºåˆ—åŒ–æ—¶çš„å€¼Alexiaã€‚</p></div><h2 id="è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡çœŸçš„ä¸èƒ½è¢«åºåˆ—åŒ–å—ï¼Ÿ"><a href="#è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡çœŸçš„ä¸èƒ½è¢«åºåˆ—åŒ–å—ï¼Ÿ" class="headerlink" title="è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡çœŸçš„ä¸èƒ½è¢«åºåˆ—åŒ–å—ï¼Ÿ"></a>è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡çœŸçš„ä¸èƒ½è¢«åºåˆ—åŒ–å—ï¼Ÿ</h2><div class="story post-story"><p>ä¸¾ä¸ªğŸŒ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">implements</span> <span class="title">Externalizable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String content = <span class="string">&quot;æˆ‘å°†ä¼šè¢«åºåˆ—åŒ–ï¼Œä¸ç®¡æˆ‘æ˜¯å¦è¢«transientå…³é”®å­—ä¿®é¥°&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeExternal</span><span class="params">(ObjectOutput out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        out.writeObject(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readExternal</span><span class="params">(ObjectInput in)</span> <span class="keyword">throws</span> IOException,</span></span><br><span class="line"><span class="function">            ClassNotFoundException </span>&#123;</span><br><span class="line">        content = (String) in.readObject();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        Test test = <span class="keyword">new</span> Test();</span><br><span class="line">        ObjectOutput out = <span class="keyword">new</span> ObjectOutputStream(Files.newOutputStream(<span class="keyword">new</span> File(<span class="string">&quot;test&quot;</span>).toPath()));</span><br><span class="line">        out.writeObject(test);</span><br><span class="line"></span><br><span class="line">        ObjectInput in = <span class="keyword">new</span> ObjectInputStream(Files.newInputStream(<span class="keyword">new</span> File(</span><br><span class="line">                <span class="string">&quot;test&quot;</span>).toPath()));</span><br><span class="line">        test = (Test) in.readObject();</span><br><span class="line">        System.out.println(test.content);</span><br><span class="line"></span><br><span class="line">        out.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœæ˜¯:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘å°†ä¼šè¢«åºåˆ—åŒ–ï¼Œä¸ç®¡æˆ‘æ˜¯å¦è¢«transientå…³é”®å­—ä¿®é¥°</span><br></pre></td></tr></table></figure><p>â€‹    è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œä¸æ˜¯è¯´ç±»çš„å˜é‡è¢«transientå…³é”®å­—ä¿®é¥°ä»¥åå°†ä¸èƒ½åºåˆ—åŒ–äº†å—ï¼Ÿ</p><p>   æˆ‘ä»¬çŸ¥é“åœ¨Javaä¸­ï¼Œå¯¹è±¡çš„åºåˆ—åŒ–å¯ä»¥é€šè¿‡å®ç°ä¸¤ç§æ¥å£æ¥å®ç°ï¼Œè‹¥å®ç°çš„æ˜¯Serializableæ¥å£ï¼Œåˆ™æ‰€æœ‰çš„åºåˆ—åŒ–å°†ä¼šè‡ªåŠ¨è¿›è¡Œï¼Œè‹¥å®ç°çš„æ˜¯Externalizableæ¥å£ï¼Œåˆ™æ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥è‡ªåŠ¨åºåˆ—åŒ–ï¼Œéœ€è¦åœ¨writeExternalæ–¹æ³•ä¸­è¿›è¡Œæ‰‹å·¥æŒ‡å®šæ‰€è¦åºåˆ—åŒ–çš„å˜é‡ï¼Œè¿™ä¸æ˜¯å¦è¢«transientä¿®é¥°æ— å…³ã€‚å› æ­¤ç¬¬äºŒä¸ªä¾‹å­è¾“å‡ºçš„æ˜¯å˜é‡contentåˆå§‹åŒ–çš„å†…å®¹ï¼Œè€Œä¸æ˜¯nullã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> å…³é”®å­— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­switchå…³é”®å­—å¯¹Stringç±»å‹çš„æ”¯æŒ</title>
      <link href="/2022/06/16/Java%E4%B8%ADswitch%E5%85%B3%E9%94%AE%E5%AD%97%E5%AF%B9String%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%94%AF%E6%8C%81/"/>
      <url>/2022/06/16/Java%E4%B8%ADswitch%E5%85%B3%E9%94%AE%E5%AD%97%E5%AF%B9String%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%94%AF%E6%8C%81/</url>
      
        <content type="html"><![CDATA[<p>åœ¨java7ä»¥åï¼Œswitchçš„å‚æ•°å¯ä»¥æ˜¯Stringç±»å‹äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢switchæ”¯æŒè¿™æ ·å‡ ç§æ•°æ®ç±»å‹ï¼š<code>byte</code> <code>short</code> <code>int</code> <code>char</code> <code>String</code> ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹ï¼Œswitchåˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><blockquote><p>ps: æœ¬æ–‡ä½¿ç”¨çš„åç¼–è¯‘å·¥å…·ä¸ºjadx</p></blockquote><h3 id="switchå¯¹æ•´å‹çš„æ”¯æŒ"><a href="#switchå¯¹æ•´å‹çš„æ”¯æŒ" class="headerlink" title="switchå¯¹æ•´å‹çš„æ”¯æŒ"></a>switchå¯¹æ•´å‹çš„æ”¯æŒ</h3><p>ä¸€æ®µå¾ˆç®€å•çš„é€šè¿‡æ•´å‹è¿›è¡Œswitchçš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">switch</span> (a) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡åç¼–è¯‘å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="comment">/* loaded from: Test.class */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡åç¼–è¯‘åçš„ä»£ç åŸºæœ¬æ²¡æœ‰å˜åŒ–ï¼Œ<strong>å› æ­¤switchå¯¹intçš„åˆ¤æ–­æ˜¯ç›´æ¥æ¯”è¾ƒæ•´æ•°çš„å€¼</strong>ã€‚</p><h3 id="switchå¯¹å­—ç¬¦ç±»å‹çš„æ”¯æŒ"><a href="#switchå¯¹å­—ç¬¦ç±»å‹çš„æ”¯æŒ" class="headerlink" title="switchå¯¹å­—ç¬¦ç±»å‹çš„æ”¯æŒ"></a>switchå¯¹å­—ç¬¦ç±»å‹çš„æ”¯æŒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> a = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (a) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡åç¼–è¯‘ä¹‹å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="comment">/* loaded from: Test.class */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="number">98</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">97</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">98</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šçš„ä»£ç ä½œæ¯”è¾ƒæˆ‘ä»¬å‘ç°ï¼šå¯¹charç±»å‹è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯asciiç ï¼Œç¼–è¯‘å™¨ä¼šæŠŠcharå‹å˜é‡è½¬æ¢æˆå¯¹åº”çš„intå‹å˜é‡</p><h3 id="switchå¯¹å­—ç¬¦ä¸²æ”¯æŒçš„å®ç°"><a href="#switchå¯¹å­—ç¬¦ä¸²æ”¯æŒçš„å®ç°" class="headerlink" title="switchå¯¹å­—ç¬¦ä¸²æ”¯æŒçš„å®ç°"></a>switchå¯¹å­—ç¬¦ä¸²æ”¯æŒçš„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String str = <span class="string">&quot;world&quot;</span>;</span><br><span class="line">    <span class="keyword">switch</span> (str) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;hello&quot;</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;world&quot;</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡åç¼–è¯‘ä¹‹å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="comment">/* loaded from: Test.class */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = <span class="number">65535</span>;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="string">&quot;world&quot;</span>.hashCode()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">99162322</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;world&quot;</span>.equals(<span class="string">&quot;hello&quot;</span>)) &#123;</span><br><span class="line">                    c = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">113318802</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;world&quot;</span>.equals(<span class="string">&quot;world&quot;</span>)) &#123;</span><br><span class="line">                    c = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸæ¥å­—ç¬¦ä¸²çš„switchæ˜¯é€šè¿‡<code>equals()</code>å’Œ<code>hashCode()</code>æ–¹æ³•æ¥å®ç°çš„ã€‚<strong>è®°ä½ï¼Œswitchä¸­åªèƒ½ä½¿ç”¨æ•´å‹</strong>ï¼Œæ¯”å¦‚<code>byte</code>ã€‚<code>short</code>ï¼Œ<code>char</code>(ackiiç æ˜¯æ•´å‹)ä»¥åŠ<code>int</code>ã€‚è¿˜å¥½<code>hashCode()</code>æ–¹æ³•è¿”å›çš„æ˜¯<code>int</code>ï¼Œè€Œä¸æ˜¯<code>long</code>ã€‚é€šè¿‡è¿™ä¸ªå¾ˆå®¹æ˜“è®°ä½<code>hashCode</code>è¿”å›çš„æ˜¯<code>int</code>è¿™ä¸ªäº‹å®ã€‚ä»”ç»†çœ‹ä¸‹å¯ä»¥å‘ç°ï¼Œè¿›è¡Œ<code>switch</code>çš„å®é™…æ˜¯å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå“ˆå¸Œå¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ã€‚å› æ­¤å®ƒçš„æ€§èƒ½æ˜¯ä¸å¦‚ä½¿ç”¨æšä¸¾è¿›è¡Œswitchæˆ–è€…ä½¿ç”¨çº¯æ•´æ•°å¸¸é‡ï¼Œä½†è¿™ä¹Ÿä¸æ˜¯å¾ˆå·®ã€‚å› ä¸ºJavaç¼–è¯‘å™¨åªå¢åŠ äº†ä¸€ä¸ª<code>equals</code>æ–¹æ³•ï¼Œå¦‚æœä½ æ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è¯ä¼šéå¸¸å¿«ï¼Œæ¯”å¦‚â€abcâ€ ==â€abcâ€ã€‚å¦‚æœä½ æŠŠ<code>hashCode()</code>æ–¹æ³•çš„è°ƒç”¨ä¹Ÿè€ƒè™‘è¿›æ¥äº†ï¼Œé‚£ä¹ˆè¿˜ä¼šå†å¤šä¸€æ¬¡çš„è°ƒç”¨å¼€é”€ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºäº†ï¼Œå®ƒå°±ä¼šæŠŠå“ˆå¸Œå€¼ç¼“å­˜èµ·æ¥ã€‚å› æ­¤å¦‚æœè¿™ä¸ª<code>switch</code>è¯­å¥æ˜¯ç”¨åœ¨ä¸€ä¸ªå¾ªç¯é‡Œçš„ï¼Œæ¯”å¦‚é€é¡¹å¤„ç†æŸä¸ªå€¼ï¼Œæˆ–è€…æ¸¸æˆå¼•æ“å¾ªç¯åœ°æ¸²æŸ“å±å¹•ï¼Œè¿™é‡Œ<code>hashCode()</code>æ–¹æ³•çš„è°ƒç”¨å¼€é”€å…¶å®ä¸ä¼šå¾ˆå¤§ã€‚</p><p>æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ<strong>å…¶å®switchåªæ”¯æŒä¸€ç§æ•°æ®ç±»å‹ï¼Œé‚£å°±æ˜¯æ•´å‹ï¼Œå…¶ä»–æ•°æ®ç±»å‹éƒ½æ˜¯è½¬æ¢æˆæ•´å‹ä¹‹åå†ä½¿ç”¨switchçš„ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç¼–è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaç¼–è¯‘å™¨å¯¹&#39;+&#39;çš„é‡è½½</title>
      <link href="/2022/06/16/Java%E7%BC%96%E8%AF%91%E5%99%A8%E5%AF%B9&#39;+&#39;%E7%9A%84%E9%87%8D%E8%BD%BD/"/>
      <url>/2022/06/16/Java%E7%BC%96%E8%AF%91%E5%99%A8%E5%AF%B9&#39;+&#39;%E7%9A%84%E9%87%8D%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>Javaä¸­å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡Stirng.concat()æ–¹æ³•è¿›è¡Œæ‹¼æ¥ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨<code>+</code>å·æ‹¼æ¥ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚</p><p>æœ‰äººæŠŠJavaä¸­ä½¿ç”¨+æ‹¼æ¥å­—ç¬¦ä¸²çš„åŠŸèƒ½ç†è§£ä¸ºè¿ç®—ç¬¦é‡è½½ã€‚å…¶å®å¹¶ä¸æ˜¯ï¼ŒJavaæ˜¯ä¸æ”¯æŒè¿ç®—ç¬¦é‡è½½çš„ã€‚è¿™å…¶å®åªæ˜¯Javaæä¾›çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚</p><blockquote><p>è¿ç®—ç¬¦é‡è½½ï¼šåœ¨è®¡ç®—æœºç¨‹åºè®¾è®¡ä¸­ï¼Œè¿ç®—ç¬¦é‡è½½ï¼ˆè‹±è¯­ï¼šoperator overloadingï¼‰æ˜¯å¤šæ€çš„ä¸€ç§ã€‚è¿ç®—ç¬¦é‡è½½ï¼Œå°±æ˜¯å¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p></blockquote><blockquote><p>è¯­æ³•ç³–ï¼šè¯­æ³•ç³–ï¼ˆSyntactic sugarï¼‰ï¼Œä¹Ÿè¯‘ä¸ºç³–è¡£è¯­æ³•ï¼Œæ˜¯ç”±è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶å½¼å¾—Â·å…°ä¸å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚è¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚</p></blockquote><p>è¿™æ ·çš„ä¸€æ®µä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åç¼–è¯‘åçš„ç»“æœ</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102447895.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102447895.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220616102447895"></p><p>ä½¿ç”¨IDEAç›´æ¥æŸ¥çœ‹ç¼–è¯‘åçš„classæ–‡ä»¶</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102539916.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102539916.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220616102539916"></p><p>é€šè¿‡æŸ¥çœ‹åç¼–è¯‘ä»¥åçš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒåŸæ¥å­—ç¬¦ä¸²å¸¸é‡åœ¨æ‹¼æ¥è¿‡ç¨‹ä¸­ï¼Œæ˜¯å°†Stringè½¬æˆäº†StringBuilderåï¼Œä½¿ç”¨å…¶appendæ–¹æ³•è¿›è¡Œå¤„ç†çš„ã€‚</p><p>é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaä¸­çš„+å¯¹å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œå…¶å®ç°åŸç†æ˜¯ä½¿ç”¨StringBuilder.appendã€‚</p><p>ä½†æ˜¯ï¼ŒStringçš„ä½¿ç”¨+å­—ç¬¦ä¸²æ‹¼æ¥ä¹Ÿä¸å…¨éƒ½æ˜¯åŸºäºStringBuilder.appendï¼Œè¿˜æœ‰ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœæ˜¯ä¸¤ä¸ªå›ºå®šçš„å­—é¢é‡æ‹¼æ¥ï¼Œå¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String ab = <span class="string">&quot;a&quot;</span> + <span class="string">&quot;b&quot;</span>;</span><br></pre></td></tr></table></figure><p>åç¼–è¯‘å</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102923574.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220616102923574.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220616102923574"></p><p>è¿™ä¸»è¦æ˜¯å› ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œç¼–è¯‘æœŸå¯çŸ¥ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šè¿›è¡Œå¸¸é‡æŠ˜å ï¼Œç›´æ¥å˜æˆ String s = â€œabâ€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç¼–è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé”ç›¸å…³ï¼ˆäºŒï¼‰</title>
      <link href="/2022/02/28/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2022/02/28/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="Innodbè¡Œé”"><a href="#Innodbè¡Œé”" class="headerlink" title="Innodbè¡Œé”"></a>Innodbè¡Œé”</h2><div class="story post-story"><blockquote><p>è¡Œé”ç‰¹ç‚¹ ï¼šåå‘InnoDB å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½,å¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</p></blockquote><p>InnoDB ä¸ MyISAM çš„æœ€å¤§ä¸åŒæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯æ”¯æŒäº‹åŠ¡ï¼›äºŒæ˜¯ é‡‡ç”¨äº†è¡Œçº§é”ã€‚</p><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><h4 id="äº‹åŠ¡åŠå…¶ACIDå±æ€§"><a href="#äº‹åŠ¡åŠå…¶ACIDå±æ€§" class="headerlink" title="äº‹åŠ¡åŠå…¶ACIDå±æ€§"></a>äº‹åŠ¡åŠå…¶ACIDå±æ€§</h4><p>äº‹åŠ¡æ˜¯ç”±ä¸€ç»„SQLè¯­å¥ç»„æˆçš„é€»è¾‘å¤„ç†å•å…ƒã€‚</p><p>äº‹åŠ¡å…·æœ‰ä»¥ä¸‹4ä¸ªç‰¹æ€§ï¼Œç®€ç§°ä¸ºäº‹åŠ¡ACIDå±æ€§ã€‚</p><table><thead><tr><th>ACIDå±æ€§</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>åŸå­æ€§ï¼ˆAtomicityï¼‰</td><td>äº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œå•å…ƒï¼Œå…¶å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</td></tr><tr><td>ä¸€è‡´æ€§ï¼ˆConsistentï¼‰</td><td>åœ¨äº‹åŠ¡å¼€å§‹å’Œå®Œæˆæ—¶ï¼Œæ•°æ®éƒ½å¿…é¡»ä¿æŒä¸€è‡´çŠ¶æ€ã€‚</td></tr><tr><td>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</td><td>æ•°æ®åº“ç³»ç»Ÿæä¾›ä¸€å®šçš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ â€œç‹¬ç«‹â€ ç¯å¢ƒä¸‹è¿è¡Œã€‚</td></tr><tr><td>æŒä¹…æ€§ï¼ˆDurableï¼‰</td><td>äº‹åŠ¡å®Œæˆä¹‹åï¼Œå¯¹äºæ•°æ®çš„ä¿®æ”¹æ˜¯æ°¸ä¹…çš„ã€‚</td></tr></tbody></table><h4 id="å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜"><a href="#å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜"></a>å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜</h4><table><thead><tr><th>é—®é¢˜</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰</td><td>å½“ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡é€‰æ‹©åŒä¸€è¡Œï¼Œæœ€åˆçš„äº‹åŠ¡ä¿®æ”¹çš„å€¼ï¼Œä¼šè¢«åé¢çš„äº‹åŠ¡ä¿®æ”¹çš„å€¼è¦†ç›–ã€‚</td></tr><tr><td>è„è¯»ï¼ˆDirty Readsï¼‰</td><td>å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®ï¼Œå¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚</td></tr><tr><td>ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Readsï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–æŸäº›æ•°æ®åçš„æŸä¸ªæ—¶é—´ï¼Œå†æ¬¡è¯»å–ä»¥å‰è¯»è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å’Œä»¥å‰è¯»å‡ºçš„æ•°æ®ä¸ä¸€è‡´ã€‚</td></tr><tr><td>å¹»è¯»ï¼ˆPhantom Readsï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶é‡æ–°è¯»å–ä»¥å‰æŸ¥è¯¢è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å…¶ä»–äº‹åŠ¡æ’å…¥äº†æ»¡è¶³å…¶æŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®ã€‚</td></tr></tbody></table><h4 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h4><p>ä¸ºäº†è§£å†³ä¸Šè¿°æåˆ°çš„äº‹åŠ¡å¹¶å‘é—®é¢˜ï¼Œæ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»è¶Šä¸¥æ ¼ï¼Œå¹¶å‘å‰¯ä½œç”¨è¶Šå°ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·ä¹Ÿå°±è¶Šå¤§ï¼Œå› ä¸ºäº‹åŠ¡éš”ç¦»å®è´¨ä¸Šå°±æ˜¯ä½¿ç”¨äº‹åŠ¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šâ€œä¸²è¡ŒåŒ–â€ è¿›è¡Œï¼Œè¿™æ˜¾ç„¶ä¸â€œå¹¶å‘â€ æ˜¯çŸ›ç›¾çš„ã€‚</p><p>æ•°æ®åº“çš„éš”ç¦»çº§åˆ«æœ‰4ä¸ªï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸ºRead uncommittedã€Read committedã€Repeatable readã€Serializableï¼Œè¿™å››ä¸ªçº§åˆ«å¯ä»¥é€ä¸ªè§£å†³è„å†™ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»è¿™å‡ ç±»é—®é¢˜ã€‚</p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>ä¸¢å¤±æ›´æ–°</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>Ã—</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Read committed</td><td>Ã—</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Repeatable readï¼ˆé»˜è®¤ï¼‰</td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>Serializable</td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><blockquote><p>PS ï¼š âˆš ä»£è¡¨å¯èƒ½å‡ºç° ï¼Œ Ã— ä»£è¡¨ä¸ä¼šå‡ºç° ã€‚</p></blockquote><p>Mysql çš„æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ä¸º Repeatable read ï¼Œ æŸ¥çœ‹æ–¹å¼ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQL8ä»¥å‰</span></span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;tx_isolation&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL8ä»¥å</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation,@<span class="variable">@transaction</span>_isolation;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310102102301.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310102102301.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220310102102301"></p><h3 id="InnoDB-çš„è¡Œé”æ¨¡å¼"><a href="#InnoDB-çš„è¡Œé”æ¨¡å¼" class="headerlink" title="InnoDB çš„è¡Œé”æ¨¡å¼"></a>InnoDB çš„è¡Œé”æ¨¡å¼</h3><p>InnoDB å®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ã€‚</p><ul><li>å…±äº«é”ï¼ˆSï¼‰ï¼šåˆç§°ä¸ºè¯»é”ï¼Œç®€ç§°Sé”ï¼Œå…±äº«é”å°±æ˜¯å¤šä¸ªäº‹åŠ¡å¯¹äºåŒä¸€æ•°æ®å¯ä»¥å…±äº«ä¸€æŠŠé”ï¼Œéƒ½èƒ½è®¿é—®åˆ°æ•°æ®ï¼Œä½†æ˜¯åªèƒ½è¯»ä¸èƒ½ä¿®æ”¹ã€‚</li><li>æ’ä»–é”ï¼ˆXï¼‰ï¼šåˆç§°ä¸ºå†™é”ï¼Œç®€ç§°Xé”ï¼Œæ’ä»–é”å°±æ˜¯ä¸èƒ½ä¸å…¶ä»–é”å¹¶å­˜ï¼Œå¦‚ä¸€ä¸ªäº‹åŠ¡è·å–äº†ä¸€ä¸ªæ•°æ®è¡Œçš„æ’ä»–é”ï¼Œå…¶ä»–äº‹åŠ¡å°±ä¸èƒ½å†è·å–è¯¥è¡Œçš„å…¶ä»–é”ï¼ŒåŒ…æ‹¬å…±äº«é”å’Œæ’ä»–é”ï¼Œä½†æ˜¯è·å–æ’ä»–é”çš„äº‹åŠ¡æ˜¯å¯ä»¥å¯¹æ•°æ®å°±è¡Œè¯»å–å’Œä¿®æ”¹ã€‚</li></ul><p><code>å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)ï¼›</code></p><p><code>å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼›</code></p><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ˜¾ç¤ºç»™è®°å½•é›†åŠ å…±äº«é”æˆ–æ’ä»–é” ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å…±äº«é”ï¼ˆSï¼‰ï¼š<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ... LOCK <span class="keyword">IN</span> SHARE MODE</span><br><span class="line"></span><br><span class="line">æ’ä»–é”ï¼ˆX) ï¼š<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ... <span class="keyword">FOR</span> UPDATE    ï¼ˆæ‚²è§‚é”ï¼‰</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ‚²è§‚é”å’Œä¹è§‚é”</strong></p><p>æ‚²è§‚é”ï¼šäº‹åŠ¡å¿…é¡»æ’é˜Ÿæ‰§è¡Œã€‚æ•°æ®é”ä½äº†ï¼Œä¸å…è®¸å¹¶å‘ã€‚ï¼ˆè¡Œçº§é”ï¼šselectåé¢æ·»åŠ for updateï¼‰</p><p>ä¹è§‚é”ï¼šæ”¯æŒå¹¶å‘ï¼Œäº‹åŠ¡ä¹Ÿä¸éœ€è¦æ’é˜Ÿï¼Œåªä¸è¿‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701184001613.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701184001613.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701184001613"></p></blockquote><h3 id="è¡Œé”æµ‹è¯•"><a href="#è¡Œé”æµ‹è¯•" class="headerlink" title="è¡Œé”æµ‹è¯•"></a>è¡Œé”æµ‹è¯•</h3><table><thead><tr><th>Session-1</th><th>Session-2</th></tr></thead><tbody><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220310104005464">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104101547.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104101547.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220310104101547">å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ®</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104101547.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104101547.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ®</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134407384.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134407384.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">æŸ¥è¯¢id ä¸º3çš„æ•°æ® ï¼›</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134407384.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134407384.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">è·å–idä¸º3çš„æ•°æ® ï¼›</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134530170.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134530170.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311134530170">æ›´æ–°idä¸º3çš„æ•°æ®ï¼Œä½†æ˜¯ä¸æäº¤ï¼›</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134651586.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134651586.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311134651586">æ–°idä¸º3 çš„æ•°æ®ï¼Œ å‡ºäºç­‰å¾…çŠ¶æ€</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134713679.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134713679.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311134713679">é€šè¿‡commitï¼Œ æäº¤äº‹åŠ¡</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134722373.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134722373.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311134722373">è§£é™¤é˜»å¡ï¼Œæ›´æ–°æ­£å¸¸è¿›è¡Œ</td></tr><tr><td>ä»¥ä¸Šï¼Œ æ“ä½œçš„éƒ½æ˜¯åŒä¸€è¡Œçš„æ•°æ®ï¼Œæ¥ä¸‹æ¥ï¼Œæ¼”ç¤ºä¸åŒè¡Œçš„æ•°æ® ï¼š</td><td></td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134822086.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134822086.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">æ–°idä¸º3æ•°æ®ï¼Œæ­£å¸¸çš„è·å–åˆ°è¡Œé” ï¼Œ æ‰§è¡Œæ›´æ–° ï¼›</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134845350.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311134845350.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">ç”±äºä¸Session-1 æ“ä½œä¸æ˜¯åŒä¸€è¡Œï¼Œè·å–å½“å‰è¡Œé”ï¼Œæ‰§è¡Œæ›´æ–°ï¼›</td></tr></tbody></table><blockquote><p>å¦‚æœæ‰§è¡Œäº†æ›´æ–°è¯­å¥ï¼Œä¼šå¯¹è¿™ä¸€è¡Œæ•°æ®åŠ ä¸Šæ’ä»–é”ï¼ˆå†™é”ï¼‰ï¼Œæäº¤commitä¹‹åï¼Œä¼šé‡Šæ”¾é”ã€‚å¦å¤–ä¸€ä¸ªçº¿ç¨‹updateè¯­å¥æ‰å¯ä»¥æ‰§è¡Œè§£é™¤é˜»å¡çŠ¶æ€ã€‚å‰ææ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œåŒä¸€è¡Œæ•°æ®ã€‚</p></blockquote><h3 id="æ— ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é”"><a href="#æ— ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é”" class="headerlink" title="æ— ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é”"></a>æ— ç´¢å¼•æ—¶è¡Œé”å‡çº§ä¸ºè¡¨é”</h3><blockquote><p>å¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆInnoDBå°†å¯¹è¡¨ä¸­çš„æ‰€æœ‰è®°å½•åŠ é”ï¼Œå®é™…æ•ˆæœè·Ÿè¡¨é”ä¸€æ ·ã€‚</p></blockquote><p>æŸ¥çœ‹å½“å‰è¡¨çš„ç´¢å¼• ï¼š show index from test_innodb_lock\G;<em><strong>ï¼ˆåŠ ä¸Š \G è¡¨ç¤ºå°†æŸ¥è¯¢ç»“æœè¿›è¡ŒæŒ‰åˆ—æ‰“å°ï¼Œå¯ä»¥ä½¿æ¯ä¸ªå­—æ®µæ‰“å°åˆ°å•ç‹¬çš„è¡Œï¼‰</strong></em></p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311135321152.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311135321152.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311135321152"></p><table><thead><tr><th>Session-1</th><th>Session-2</th></tr></thead><tbody><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220310104005464">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140314838.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140314838.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311140314838"> æ‰§è¡Œæ›´æ–°è¯­å¥ ï¼š</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140358574.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140358574.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311140358574">æ‰§è¡Œæ›´æ–°è¯­å¥ï¼Œ ä½†å¤„äºé˜»å¡çŠ¶æ€ï¼š</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140435841.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140435841.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311140435841">æäº¤äº‹åŠ¡ï¼š</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140422475.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311140422475.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311140422475">è§£é™¤é˜»å¡ï¼Œæ‰§è¡Œæ›´æ–°æˆåŠŸ ï¼š</td></tr></tbody></table><blockquote><p>ç”±äº æ‰§è¡Œæ›´æ–°æ—¶ ï¼Œ nameå­—æ®µæœ¬æ¥ä¸ºvarcharç±»å‹ï¼Œ æˆ‘ä»¬æ˜¯ä½œä¸ºæ•°ç»„ç±»å‹ä½¿ç”¨ï¼Œå­˜åœ¨ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆï¼Œæœ€ç»ˆè¡Œé”å˜ä¸ºè¡¨é” ï¼›(å­—ç¬¦ä¸²ç±»å‹ï¼Œåœ¨SQLè¯­å¥ä½¿ç”¨çš„æ—¶å€™æ²¡æœ‰åŠ å•å¼•å·ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼ŒæŸ¥è¯¢æ²¡æœ‰èµ°ç´¢å¼•ï¼Œè¿›è¡Œå…¨è¡¨æ‰«ææ˜¯ï¼Œç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”å°±å‡çº§ä¸ºè¡¨é”)</p></blockquote><h3 id="é—´éš™é”å±å®³"><a href="#é—´éš™é”å±å®³" class="headerlink" title="é—´éš™é”å±å®³"></a>é—´éš™é”å±å®³</h3><blockquote><p>å½“æˆ‘ä»¬ç”¨èŒƒå›´æ¡ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è¿›è¡ŒåŠ é”ï¼› å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åš â€œé—´éš™ï¼ˆGAPï¼‰â€ ï¼Œ InnoDBä¹Ÿä¼šå¯¹è¿™ä¸ª â€œé—´éš™â€ åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„ é—´éš™é”ï¼ˆNext-Keyé”ï¼‰ ã€‚</p></blockquote><p>ç¤ºä¾‹ ï¼š</p><table><thead><tr><th>Session-1</th><th>Session-2</th></tr></thead><tbody><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220310104005464">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220310104005464.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143815755.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143815755.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311143815755">æ ¹æ®idèŒƒå›´æ›´æ–°æ•°æ®</td><td></td></tr><tr><td></td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143843041.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143843041.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311143843041">æ’å…¥idä¸º2çš„è®°å½•ï¼Œ å‡ºäºé˜»å¡çŠ¶æ€</td></tr><tr><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143911675.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143911675.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311143911675">æäº¤äº‹åŠ¡</td><td>ç”±äºè¡¨æ•°æ®ä¸­ä¸å­˜åœ¨id=2çš„æ•°æ®ï¼Œä½†æ˜¯id&lt;4çš„è¡Œè¢«åŠ äº†æ’ä»–é”ï¼Œæ­¤æ—¶ï¼Œè¿™è¡Œæ•°æ®å°±è¢«åŠ äº†é—´éš™é”ã€‚æ— æ³•æ’å…¥</td></tr><tr><td></td><td><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143934727.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311143934727.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311143934727">è§£é™¤é˜»å¡ ï¼Œ æ‰§è¡Œæ’å…¥æ“ä½œ ï¼š</td></tr></tbody></table><blockquote><p>æ€æ ·é¿å…é—´éš™é”å‘¢ï¼Ÿ</p><p>åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œæˆ–è€…å¯¹æ•°æ®è¡Œè¿›è¡ŒåŠ é”çš„æ—¶å€™ï¼Œå°½é‡å»ç¼©å°æ¡ä»¶ï¼Œä½¿å¾—é—´éš™æ•°æ®å°½é‡çš„å°‘ï¼Œæœ€å¤§ç¨‹åº¦é¿å…é—´éš™é”çš„å­˜åœ¨ã€‚</p></blockquote><h3 id="InnoDB-è¡Œé”äº‰ç”¨æƒ…å†µ"><a href="#InnoDB-è¡Œé”äº‰ç”¨æƒ…å†µ" class="headerlink" title="InnoDB è¡Œé”äº‰ç”¨æƒ…å†µ"></a>InnoDB è¡Œé”äº‰ç”¨æƒ…å†µ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span>  status <span class="keyword">like</span> <span class="string">&#x27;innodb_row_lock%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311144126277.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220311144126277.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220311144126277"></p><p><strong>Innodb_row_lock_current_waits</strong>: å½“å‰æ­£åœ¨ç­‰å¾…é”å®šçš„æ•°é‡</p><p><strong>Innodb_row_lock_time</strong>: ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨é”å®šæ€»æ—¶é—´é•¿åº¦</p><p><strong>Innodb_row_lock_time_avg</strong>:æ¯æ¬¡ç­‰å¾…æ‰€èŠ±å¹³å‡æ—¶é•¿</p><p><strong>Innodb_row_lock_time_max</strong>:ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨ç­‰å¾…æœ€é•¿çš„ä¸€æ¬¡æ‰€èŠ±çš„æ—¶é—´</p><p><strong>Innodb_row_lock_waits</strong>: ç³»ç»Ÿå¯åŠ¨ååˆ°ç°åœ¨æ€»å…±ç­‰å¾…çš„æ¬¡æ•°</p><p>å½“ç­‰å¾…çš„æ¬¡æ•°å¾ˆé«˜ï¼Œè€Œä¸”æ¯æ¬¡ç­‰å¾…çš„æ—¶é•¿ä¹Ÿä¸å°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ†æç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆä¼šæœ‰å¦‚æ­¤å¤šçš„ç­‰å¾…ï¼Œç„¶åæ ¹æ®åˆ†æç»“æœç€æ‰‹åˆ¶å®šä¼˜åŒ–è®¡åˆ’ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>InnoDBå­˜å‚¨å¼•æ“ç”±äºå®ç°äº†è¡Œçº§é”å®šï¼Œè™½ç„¶åœ¨é”å®šæœºåˆ¶çš„å®ç°æ–¹é¢å¸¦æ¥äº†æ€§èƒ½æŸè€—å¯èƒ½æ¯”è¡¨é”ä¼šæ›´é«˜ä¸€äº›ï¼Œä½†æ˜¯åœ¨æ•´ä½“å¹¶å‘å¤„ç†èƒ½åŠ›æ–¹é¢è¦è¿œè¿œä¼˜äºMyISAMçš„è¡¨é”çš„ã€‚å½“ç³»ç»Ÿå¹¶å‘é‡è¾ƒé«˜çš„æ—¶å€™ï¼ŒInnoDBçš„æ•´ä½“æ€§èƒ½å’ŒMyISAMç›¸æ¯”å°±ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</p></blockquote><blockquote><p>ä½†æ˜¯ï¼ŒInnoDBçš„è¡Œçº§é”åŒæ ·ä¹Ÿæœ‰å…¶è„†å¼±çš„ä¸€é¢ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸å½“çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè®©InnoDBçš„æ•´ä½“æ€§èƒ½è¡¨ç°ä¸ä»…ä¸èƒ½æ¯”MyISAMé«˜ï¼Œç”šè‡³å¯èƒ½ä¼šæ›´å·®ã€‚</p></blockquote><p>ä¼˜åŒ–å»ºè®®ï¼š</p><ul><li>å°½å¯èƒ½è®©æ‰€æœ‰æ•°æ®æ£€ç´¢éƒ½èƒ½é€šè¿‡ç´¢å¼•æ¥å®Œæˆï¼Œé¿å…æ— ç´¢å¼•è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚</li><li>åˆç†è®¾è®¡ç´¢å¼•ï¼Œå°½é‡ç¼©å°é”çš„èŒƒå›´</li><li>å°½å¯èƒ½å‡å°‘ç´¢å¼•æ¡ä»¶ï¼ŒåŠç´¢å¼•èŒƒå›´ï¼Œé¿å…é—´éš™é”</li><li>å°½é‡æ§åˆ¶äº‹åŠ¡å¤§å°ï¼Œå‡å°‘é”å®šèµ„æºé‡å’Œæ—¶é—´é•¿åº¦</li><li>å°½å¯ä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»ï¼ˆä½†æ˜¯éœ€è¦ä¸šåŠ¡å±‚é¢æ»¡è¶³éœ€æ±‚ï¼‰</li></ul></div>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> è¡Œé” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé”ç›¸å…³ï¼ˆä¸€ï¼‰</title>
      <link href="/2022/02/27/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2022/02/27/MySQL%E9%94%81%E7%9B%B8%E5%85%B3%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="é”åˆ†ç±»"><a href="#é”åˆ†ç±»" class="headerlink" title="é”åˆ†ç±»"></a>é”åˆ†ç±»</h2><div class="story post-story"><p>ä»å¯¹æ•°æ®æ“ä½œçš„ç²’åº¦åˆ† ï¼š</p><p>1ï¼‰ è¡¨é”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šæ•´ä¸ªè¡¨ã€‚</p><p>2ï¼‰ è¡Œé”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šå½“å‰æ“ä½œè¡Œã€‚</p><p>ä»å¯¹æ•°æ®æ“ä½œçš„ç±»å‹åˆ†ï¼š</p><p>1ï¼‰ è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚</p><p>2ï¼‰ å†™é”ï¼ˆæ’å®ƒé”ï¼‰ï¼šå½“å‰æ“ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚</p></div><h2 id="MySQLä¸­çš„é”"><a href="#MySQLä¸­çš„é”" class="headerlink" title="MySQLä¸­çš„é”"></a>MySQLä¸­çš„é”</h2><div class="story post-story"><p>ç›¸å¯¹å…¶ä»–æ•°æ®åº“è€Œè¨€ï¼ŒMySQLçš„é”æœºåˆ¶æ¯”è¾ƒç®€å•ï¼Œå…¶æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ã€‚ä¸‹è¡¨ä¸­ç½—åˆ—å‡ºäº†å„å­˜å‚¨å¼•æ“å¯¹é”çš„æ”¯æŒæƒ…å†µï¼š</p><table><thead><tr><th>å­˜å‚¨å¼•æ“</th><th>è¡¨çº§é”</th><th>è¡Œçº§é”</th><th align="left">é¡µé¢é”</th></tr></thead><tbody><tr><td>MyISAM</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td align="left">ä¸æ”¯æŒ</td></tr><tr><td>InnoDB</td><td>æ”¯æŒ</td><td>æ”¯æŒ(é»˜è®¤)</td><td align="left">ä¸æ”¯æŒ</td></tr><tr><td>MEMORY</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td align="left">ä¸æ”¯æŒ</td></tr><tr><td>BDB</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td align="left">æ”¯æŒ</td></tr></tbody></table><p>MySQLè¿™3ç§é”çš„ç‰¹æ€§å¯å¤§è‡´å½’çº³å¦‚ä¸‹ ï¼š</p><table><thead><tr><th>é”ç±»å‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>è¡¨çº§é”</td><td><code>åå‘MyISAM å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜,å¹¶å‘åº¦æœ€ä½ã€‚</code></td></tr><tr><td>è¡Œçº§é”</td><td><code>åå‘InnoDB å­˜å‚¨å¼•æ“ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½,å¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</code></td></tr><tr><td>é¡µé¢é”</td><td>å¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬ã€‚</td></tr></tbody></table><p>ä»ä¸Šè¿°ç‰¹ç‚¹å¯è§ï¼Œå¾ˆéš¾ç¬¼ç»Ÿåœ°è¯´å“ªç§é”æ›´å¥½ï¼Œåªèƒ½å°±å…·ä½“åº”ç”¨çš„ç‰¹ç‚¹æ¥è¯´å“ªç§é”æ›´åˆé€‚ï¼ä»…ä»é”çš„è§’åº¦æ¥è¯´ï¼šè¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Web åº”ç”¨ï¼›è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ç³»ç»Ÿã€‚</p></div><h2 id="MyISAMçš„è¡¨é”"><a href="#MyISAMçš„è¡¨é”" class="headerlink" title="MyISAMçš„è¡¨é”"></a>MyISAMçš„è¡¨é”</h2><div class="story post-story"><p>MyISAM å­˜å‚¨å¼•æ“åªæ”¯æŒè¡¨é”ï¼Œè¿™ä¹Ÿæ˜¯MySQLå¼€å§‹å‡ ä¸ªç‰ˆæœ¬ä¸­å”¯ä¸€æ”¯æŒçš„é”ç±»å‹ã€‚</p><h3 id="å¦‚ä½•åŠ è¡¨é”"><a href="#å¦‚ä½•åŠ è¡¨é”" class="headerlink" title="å¦‚ä½•åŠ è¡¨é”"></a>å¦‚ä½•åŠ è¡¨é”</h3><blockquote><p>MyISAM åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERT ç­‰ï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œå› æ­¤ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨ LOCK TABLE å‘½ä»¤ç»™ MyISAM è¡¨æ˜¾å¼åŠ é”ã€‚</p></blockquote><p>æ˜¾ç¤ºåŠ è¡¨é”è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åŠ è¯»é” ï¼š lock <span class="keyword">table</span> table_name read;</span><br><span class="line"></span><br><span class="line">åŠ å†™é” ï¼š lock <span class="keyword">table</span> table_name writeï¼›</span><br></pre></td></tr></table></figure><h3 id="è¯»é”"><a href="#è¯»é”" class="headerlink" title="è¯»é”"></a>è¯»é”</h3><p>Session-1 ï¼š</p><p>1ï¼‰è·å¾—tb_book è¡¨çš„è¯»é”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lock <span class="keyword">table</span> tb_book read;</span><br></pre></td></tr></table></figure><p>2ï¼‰ æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_book;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309100813822.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309100813822.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309100813822">å¯ä»¥æ­£å¸¸æ‰§è¡Œ ï¼Œ æŸ¥è¯¢å‡ºæ•°æ®ã€‚</p><p>Session-2ï¼š</p><p>3ï¼‰ æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_book;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309100908848.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309100908848.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309100908848"></p><p>ä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼ŒæŸ¥è¯¢å‡ºæ•°æ®ã€‚</p><p>Session-1ï¼š</p><p>4ï¼‰æŸ¥è¯¢æœªé”å®šçš„è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> tb_seller;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101119113.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101119113.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309101119113"></p><p>Session-1æŸ¥è¯¢æœªé”å®šçš„è¡¨å¤±è´¥ã€‚å› ä¸ºæŒæœ‰äº†ä¸€å¼ tb_bookçš„è¯»é”ï¼Œå¹¶æœªé‡Šæ”¾é”ã€‚</p><p>Session-2ï¼š</p><p>5ï¼‰æŸ¥è¯¢æœªé”å®šçš„è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> tb_seller;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101105517.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101105517.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309101105517"></p><p>å¯ä»¥æ­£å¸¸æŸ¥è¯¢å‡ºæœªé”å®šçš„è¡¨ï¼›</p><p>Session-1 ï¼š</p><p>6ï¼‰ æ‰§è¡Œæ’å…¥æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_book <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;Mysqlé«˜çº§&#x27;</span>,<span class="string">&#x27;2088-01-01&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101227948.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101227948.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309101227948"></p><p>æ‰§è¡Œæ’å…¥ï¼Œ ç›´æ¥æŠ¥é”™ ï¼Œ ç”±äºå½“å‰tb_book è·å¾—çš„æ˜¯ è¯»é”ï¼Œ ä¸èƒ½æ‰§è¡Œæ›´æ–°æ“ä½œã€‚åªèƒ½è¯»</p><p>Session-2 ï¼š</p><p>7ï¼‰ æ‰§è¡Œæ’å…¥æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_book <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;Mysqlé«˜çº§&#x27;</span>,<span class="string">&#x27;2088-01-01&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101338314.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101338314.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309101338314"></p><p>æ­¤æ—¶ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“åœ¨Session-1ä¸­é‡Šæ”¾é”æŒ‡ä»¤ unlock tables å ï¼Œ Session-2ä¸­çš„ inesrt è¯­å¥ ï¼Œ ç«‹å³æ‰§è¡Œ ï¼›</p><blockquote><p>å¦‚æœå¯¹æŸä¸€å¼ è¡¨åŠ äº†è¯»é”ï¼Œä¸ä¼šé˜»å¡å…¶å®ƒçº¿ç¨‹çš„è¯»æ“ä½œï¼Œä½†æ˜¯ä¼šé˜»å¡å…¶å®ƒçº¿ç¨‹çš„å†™æ“ä½œã€‚</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101524172.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309101524172.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309101524172"></p><h3 id="å†™é”"><a href="#å†™é”" class="headerlink" title="å†™é”"></a>å†™é”</h3><p>Session-1 :</p><p>1ï¼‰è·å¾—tb_book è¡¨çš„å†™é”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lock <span class="keyword">table</span> tb_book write ;</span><br></pre></td></tr></table></figure><p>2ï¼‰æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_book ;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102636048.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102636048.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309102636048"></p><p>æŸ¥è¯¢æ“ä½œæ‰§è¡ŒæˆåŠŸï¼›åŠ äº†å†™é”å¯ä»¥è¯»ã€‚</p><p>3ï¼‰æ‰§è¡Œæ›´æ–°æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update tb_book <span class="keyword">set</span> name <span class="operator">=</span> <span class="string">&#x27;javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬äºŒç‰ˆï¼‰&#x27;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102712715.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102712715.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309102712715"></p><p>æ›´æ–°æ“ä½œæ‰§è¡ŒæˆåŠŸ ï¼›ï¼ˆåŠ äº†å†™é”å½“ç„¶å¯ä»¥å†™ï¼‰</p><p>Session-2 :</p><p>4ï¼‰æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_book ;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102905513.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102905513.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309102905513"></p><p>å½“åœ¨Session-1ä¸­é‡Šæ”¾é”æŒ‡ä»¤ unlock tables å ï¼Œ Session-2ä¸­çš„ select è¯­å¥ ï¼Œ ç«‹å³æ‰§è¡Œ ï¼›ï¼ˆå› ä¸ºSession-1çº¿ç¨‹åŠ çš„æ˜¯å†™é”ï¼Œå†™é”æ˜¯æ’ä»–é”ï¼Œä¼šé˜»æ–­å…¶ä»–çº¿ç¨‹çš„è¯»å’Œå†™æ“ä½œï¼‰</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102937221.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309102937221.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309102937221"></p></div><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><div class="story post-story"><p>é”æ¨¡å¼çš„ç›¸äº’å…¼å®¹æ€§å¦‚è¡¨ä¸­æ‰€ç¤ºï¼š</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1553905621992.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1553905621992.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1553905621992"></p><p>ç”±ä¸Šè¡¨å¯è§ï¼š</p><p> 1ï¼‰ <code>å¯¹MyISAM è¡¨çš„è¯»æ“ä½œï¼Œä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»è¯·æ±‚ï¼Œä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨çš„å†™è¯·æ±‚ï¼›</code></p><p> 2ï¼‰ <code>å¯¹MyISAM è¡¨çš„å†™æ“ä½œï¼Œåˆ™ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼›</code></p><p> <code>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯»é”ä¼šé˜»å¡å†™ï¼Œä½†æ˜¯ä¸ä¼šé˜»å¡è¯»ã€‚è€Œå†™é”ï¼Œåˆ™æ—¢ä¼šé˜»å¡è¯»ï¼Œåˆä¼šé˜»å¡å†™ã€‚</code></p><blockquote><p>æ­¤å¤–ï¼ŒMyISAM çš„è¯»å†™é”è°ƒåº¦æ˜¯å†™ä¼˜å…ˆï¼Œè¿™ä¹Ÿæ˜¯MyISAMä¸é€‚åˆåšå†™ä¸ºä¸»çš„è¡¨çš„å­˜å‚¨å¼•æ“çš„åŸå› ã€‚å› ä¸ºå†™é”åï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½åšä»»ä½•æ“ä½œï¼Œå¤§é‡çš„æ›´æ–°ä¼šä½¿æŸ¥è¯¢å¾ˆéš¾å¾—åˆ°é”ï¼Œä»è€Œé€ æˆæ°¸è¿œé˜»å¡ã€‚</p></blockquote></div><h2 id="æŸ¥çœ‹é”çš„äº‰ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹é”çš„äº‰ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹é”çš„äº‰ç”¨æƒ…å†µ"></a>æŸ¥çœ‹é”çš„äº‰ç”¨æƒ…å†µ</h2><div class="story post-story"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">open</span> tablesï¼›</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309112041868.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309112041868.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309112041868"></p><p><code>In_user : è¡¨å½“å‰è¢«æŸ¥è¯¢ä½¿ç”¨çš„æ¬¡æ•°ã€‚å¦‚æœè¯¥æ•°ä¸ºé›¶ï¼Œåˆ™è¡¨æ˜¯æ‰“å¼€çš„ï¼Œä½†æ˜¯å½“å‰æ²¡æœ‰è¢«ä½¿ç”¨ã€‚</code></p><p><code>Name_lockedï¼šè¡¨åç§°æ˜¯å¦è¢«é”å®šã€‚åç§°é”å®šç”¨äºå–æ¶ˆè¡¨æˆ–å¯¹è¡¨è¿›è¡Œé‡å‘½åç­‰æ“ä½œã€‚</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> status <span class="keyword">like</span> <span class="string">&#x27;Table_locks%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309112122232.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220309112122232.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220309112122232"></p><p><code>Table_locks_immediate ï¼š æŒ‡çš„æ˜¯èƒ½å¤Ÿç«‹å³è·å¾—è¡¨çº§é”çš„æ¬¡æ•°ï¼Œæ¯ç«‹å³è·å–é”ï¼Œå€¼åŠ 1ã€‚</code></p><p><code>Table_locks_waited ï¼š æŒ‡çš„æ˜¯ä¸èƒ½ç«‹å³è·å–è¡¨çº§é”è€Œéœ€è¦ç­‰å¾…çš„æ¬¡æ•°ï¼Œæ¯ç­‰å¾…ä¸€æ¬¡ï¼Œè¯¥å€¼åŠ 1ï¼Œæ­¤å€¼é«˜è¯´æ˜å­˜åœ¨ç€è¾ƒä¸ºä¸¥é‡çš„è¡¨çº§é”äº‰ç”¨æƒ…å†µã€‚</code></p></div>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> è¡¨é” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼•çš„å¤±æ•ˆåœºæ™¯</title>
      <link href="/2022/02/25/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E5%A4%B1%E6%95%88%E5%9C%BA%E6%99%AF/"/>
      <url>/2022/02/25/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E5%A4%B1%E6%95%88%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç´¢å¼•è®¾ç½®</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104054069.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104054069.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301104054069"></p></blockquote><h2 id="1-æœ€å·¦å‰ç¼€æ³•åˆ™"><a href="#1-æœ€å·¦å‰ç¼€æ³•åˆ™" class="headerlink" title="1. æœ€å·¦å‰ç¼€æ³•åˆ™"></a>1. æœ€å·¦å‰ç¼€æ³•åˆ™</h2><div class="story post-story"><blockquote><p>æœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚</p></blockquote><ul><li>åŒ¹é…æœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œwhereæ¡ä»¶ä¸­çš„é¡ºåºä¸å½±å“ä½¿ç”¨ç´¢å¼•ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨é€‰æ‹©</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104006580.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104006580.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301104006580"></p><ul><li>è¿åæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæ­¤æ—¶ä¸èµ°ç´¢å¼•</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104321534.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104321534.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301104321534"></p><ul><li>ç¬¦åˆæœ€å·¦ç´¢å¼•ï¼Œä½†ä¸­é—´æœ‰è·³è·ƒï¼Œæ­¤æ—¶åªä¼šèµ°æœ€å·¦è¾¹çš„éƒ¨åˆ†ç´¢å¼•ï¼Œå¯ä»¥çœ‹åˆ°key_lenï¼ˆå³ä½¿ç”¨çš„ç´¢å¼•é•¿åº¦ï¼‰æ˜¯æ¯”ç¬¬ä¸€å¼ å›¾ä¸­çš„key_lenå°çš„</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104536762.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301104536762.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301104536762"></p></div><h2 id="2-èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—"><a href="#2-èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—" class="headerlink" title="2. èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—"></a>2. èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—</h2><div class="story post-story"><ul><li>éƒ½èµ°ç´¢å¼•æ—¶ï¼Œkey_lenå­—æ®µä¸º456</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110423472.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110423472.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301110423472"></p><ul><li>ç¬¬äºŒä¸ªæ¡ä»¶ä½¿ç”¨èŒƒå›´æœç´¢æ—¶ï¼Œæ­¤æ—¶key_lenæ˜¯304ï¼Œä¸åªä½¿ç”¨ä¸¤ä¸ªå­—æ®µæŸ¥è¯¢çš„key_lenç›¸åŒï¼Œè¯´æ˜åé¢çš„data_idå­—æ®µæ²¡æœ‰èµ°ç´¢å¼•</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110512163.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110512163.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301110512163"></p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110606981.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110606981.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301110606981"></p></div><h2 id="3-åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æ“ä½œ"><a href="#3-åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æ“ä½œ" class="headerlink" title="3.åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æ“ä½œ"></a>3.åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æ“ä½œ</h2><div class="story post-story"><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110951494.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301110951494.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301110951494"></p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301111000293.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301111000293.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301111000293"></p></div><h2 id="4-å­—æ®µç±»å‹éšå¼è½¬æ¢"><a href="#4-å­—æ®µç±»å‹éšå¼è½¬æ¢" class="headerlink" title="4.å­—æ®µç±»å‹éšå¼è½¬æ¢"></a>4.å­—æ®µç±»å‹éšå¼è½¬æ¢</h2><div class="story post-story"><blockquote><p>ç”±äºcorpidå­—æ®µæ˜¯varcharç±»å‹ï¼Œå½“whereæ¡ä»¶ä¸­ä¸åŠ å¼•å·æ—¶ï¼Œmysqlä¼šè¿›è¡Œéšå¼è½¬æ¢ï¼Œæ­¤æ—¶ç´¢å¼•ä¼šå¤±æ•ˆ</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301111054075.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301111054075.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301111054075"></p></div><h2 id="5-ç”¨oråˆ†å‰²çš„å­—æ®µæ¡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼•"><a href="#5-ç”¨oråˆ†å‰²çš„å­—æ®µæ¡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼•" class="headerlink" title="5.ç”¨oråˆ†å‰²çš„å­—æ®µæ¡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼•"></a>5.ç”¨oråˆ†å‰²çš„å­—æ®µæ¡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µæœªå»ºç«‹ç´¢å¼•</h2><div class="story post-story"><blockquote><p>corpidä¸ºç´¢å¼•å­—æ®µï¼Œè€Œdelä¸ºéç´¢å¼•å­—æ®µ</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112058830.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112058830.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301112058830"></p></div><h2 id="6-MySQLä¼˜åŒ–å™¨åˆ¤æ–­ç´¢å¼•æŸ¥è¯¢æ›´æ…¢"><a href="#6-MySQLä¼˜åŒ–å™¨åˆ¤æ–­ç´¢å¼•æŸ¥è¯¢æ›´æ…¢" class="headerlink" title="6. MySQLä¼˜åŒ–å™¨åˆ¤æ–­ç´¢å¼•æŸ¥è¯¢æ›´æ…¢"></a>6. MySQLä¼˜åŒ–å™¨åˆ¤æ–­ç´¢å¼•æŸ¥è¯¢æ›´æ…¢</h2><div class="story post-story"><blockquote><p>å½“è¡¨ä¸­æ•°æ®è¾ƒå°‘ï¼Œæˆ–è€…æŸ¥è¯¢çš„æ¡ä»¶å è¡¨ä¸­æ•°æ®çš„æå¤§éƒ¨åˆ†æ—¶ï¼Œæ­¤æ—¶ç´¢å¼•æ•ˆç‡å¯èƒ½ä¸å¦‚å…¨è¡¨æ‰«æï¼ŒMySQLä¼šé€‰æ‹©å…¨è¡¨æ‰«æ</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112911831.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112911831.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301112911831"></p></div><h2 id="7-ä»¥-å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢"><a href="#7-ä»¥-å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="7.ä»¥%å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢"></a>7.ä»¥%å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢</h2><div class="story post-story"><blockquote><p>å¦‚æœåªæ˜¯å°¾éƒ¨çš„æ¨¡ç³ŠæŸ¥è¯¢æ˜¯ä¸ä¼šå¤±æ•ˆçš„</p><p>ä¸‹å›¾ä¸­ä½¿ç”¨å¼ºåˆ¶ç´¢å¼•æ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå› ä¸ºè¡¨ä¸­æ•°æ®è¾ƒå°‘ï¼Œmysqlåˆ¤æ–­ç´¢å¼•é€Ÿåº¦ä¸å¦‚å…¨è¡¨æ‰«ææ‰€ä»¥é»˜è®¤èµ°äº†å…¨è¡¨æ‰«æ</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112413109.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112413109.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301112413109"></p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112452546.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112452546.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301112452546"></p><p>å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥è§£å†³è¯¥é—®é¢˜ï¼Œå³æŸ¥è¯¢çš„åˆ—å¯ä»¥åœ¨ç´¢å¼•ä¸­æ‰¾åˆ°</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112637100.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20220301112637100.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220301112637100"></p></div>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> ç´¢å¼•å¤±æ•ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä¸­çš„è§¦å‘å™¨</title>
      <link href="/2022/02/24/MySQL%E4%B8%AD%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8/"/>
      <url>/2022/02/24/MySQL%E4%B8%AD%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h2><div class="story post-story"><blockquote><p>è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼ŒæŒ‡åœ¨ insert/update/delete ä¹‹å‰æˆ–ä¹‹åï¼Œè§¦å‘å¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„SQLè¯­å¥é›†åˆã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯<strong>ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§</strong> , <strong>æ—¥å¿—è®°å½•</strong> , <strong>æ•°æ®æ ¡éªŒ</strong>ç­‰æ“ä½œ ã€‚</p></blockquote><p>ä½¿ç”¨åˆ«å OLD å’Œ NEW æ¥å¼•ç”¨è§¦å‘å™¨ä¸­å‘ç”Ÿå˜åŒ–çš„è®°å½•å†…å®¹ï¼Œè¿™ä¸å…¶ä»–çš„æ•°æ®åº“æ˜¯ç›¸ä¼¼çš„ã€‚ç°åœ¨è§¦å‘å™¨è¿˜åªæ”¯æŒè¡Œçº§è§¦å‘ï¼Œä¸æ”¯æŒè¯­å¥çº§è§¦å‘ã€‚ï¼ˆOracleæ—¢æœ‰è¡Œçº§è§¦å‘å™¨ï¼Œåˆæœ‰è¯­å¥çº§è§¦å‘å™¨ï¼‰</p><table><thead><tr><th>è§¦å‘å™¨ç±»å‹</th><th>NEW å’Œ OLDçš„ä½¿ç”¨</th></tr></thead><tbody><tr><td>INSERT å‹è§¦å‘å™¨</td><td>NEW è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»æ–°å¢çš„æ•°æ®</td></tr><tr><td>UPDATE å‹è§¦å‘å™¨</td><td>OLD è¡¨ç¤ºä¿®æ”¹ä¹‹å‰çš„æ•°æ® , NEW è¡¨ç¤ºå°†è¦æˆ–å·²ç»ä¿®æ”¹åçš„æ•°æ®</td></tr><tr><td>DELETE å‹è§¦å‘å™¨</td><td>OLD è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»åˆ é™¤çš„æ•°æ®</td></tr></tbody></table></div><h2 id="2-åˆ›å»ºè§¦å‘å™¨"><a href="#2-åˆ›å»ºè§¦å‘å™¨" class="headerlink" title="2. åˆ›å»ºè§¦å‘å™¨"></a>2. åˆ›å»ºè§¦å‘å™¨</h2><div class="story post-story"><h3 id="2-1-è¯­æ³•ç»“æ„"><a href="#2-1-è¯­æ³•ç»“æ„" class="headerlink" title="2.1 è¯­æ³•ç»“æ„ :"></a>2.1 è¯­æ³•ç»“æ„ :</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name trigger_time trigger_event <span class="keyword">ON</span> tb_name <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> trigger_stmt</span><br></pre></td></tr></table></figure><p>tb_name ï¼šéœ€è¦å»ºç«‹è§¦å‘å™¨çš„è¡¨å(åªèƒ½æ˜¯æ°¸ä¹…è¡¨ï¼Œä¸èƒ½å¯¹ä¸´æ—¶è¡¨åˆ›å»ºè§¦å‘å™¨)</p><p>trigger_name ï¼šè§¦å‘å™¨åç§°ï¼Œè‡ªè¡ŒæŒ‡å®š</p><p>trigger_timeï¼šè§¦å‘æ—¶æœºï¼Œå–å€¼BEFOREã€AFTER</p><p>trigger_event ï¼šè§¦å‘äº‹ä»¶ï¼ŒINSERTã€UPDATEã€DELETE</p><p>trigger_stmt ï¼š è§¦å‘ç¨‹åºä½“ï¼Œå¯ä»¥æ˜¯ä¸€æ¡SQLè¯­å¥æˆ–æ˜¯BEGINå’ŒENDåŒ…å«çš„å¤šæ¡è¯­å¥</p><h3 id="2-2-ç¤ºä¾‹"><a href="#2-2-ç¤ºä¾‹" class="headerlink" title="2.2 ç¤ºä¾‹"></a>2.2 ç¤ºä¾‹</h3><h4 id="2-2-1-éœ€æ±‚"><a href="#2-2-1-éœ€æ±‚" class="headerlink" title="2.2.1 éœ€æ±‚"></a>2.2.1 éœ€æ±‚</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡è§¦å‘å™¨è®°å½• emp è¡¨çš„æ•°æ®å˜æ›´æ—¥å¿— , åŒ…å«å¢åŠ , ä¿®æ”¹ , åˆ é™¤ ;</span><br></pre></td></tr></table></figure><h4 id="2-2-2-é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨"><a href="#2-2-2-é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨" class="headerlink" title="2.2.2 é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨ :"></a>2.2.2 é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨ :</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_logs(</span><br><span class="line">  id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> auto_increment,</span><br><span class="line">  operation <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ“ä½œç±»å‹, insert/update/delete&#x27;</span>,</span><br><span class="line">  operate_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,</span><br><span class="line">  operate_id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ“ä½œè¡¨çš„ID&#x27;</span>,</span><br><span class="line">  operate_params <span class="type">varchar</span>(<span class="number">500</span>) comment <span class="string">&#x27;æ“ä½œå‚æ•°&#x27;</span>,</span><br><span class="line">  <span class="keyword">primary</span> key(`id`)</span><br><span class="line">)engine<span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><h4 id="2-2-3-åˆ›å»º-insert-å‹è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•"><a href="#2-2-3-åˆ›å»º-insert-å‹è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•" class="headerlink" title="2.2.3 åˆ›å»º insert å‹è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :"></a>2.2.3 åˆ›å»º insert å‹è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> emp_logs_insert_trigger</span><br><span class="line">after <span class="keyword">insert</span> </span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs (id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;insert&#x27;</span>,now(),new.id,concat(<span class="string">&#x27;æ’å…¥å(id:&#x27;</span>,new.id,<span class="string">&#x27;, name:&#x27;</span>,new.name,<span class="string">&#x27;, age:&#x27;</span>,new.age,<span class="string">&#x27;, salary:&#x27;</span>,new.salary,<span class="string">&#x27;)&#x27;</span>));</span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h4 id="2-2-4-åˆ›å»º-update-å‹è§¦å‘å™¨ï¼Œå®Œæˆæ›´æ–°æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•"><a href="#2-2-4-åˆ›å»º-update-å‹è§¦å‘å™¨ï¼Œå®Œæˆæ›´æ–°æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•" class="headerlink" title="2.2.4 åˆ›å»º update å‹è§¦å‘å™¨ï¼Œå®Œæˆæ›´æ–°æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :"></a>2.2.4 åˆ›å»º update å‹è§¦å‘å™¨ï¼Œå®Œæˆæ›´æ–°æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> emp_logs_update_trigger</span><br><span class="line">after update </span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs (id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;update&#x27;</span>,now(),new.id,concat(<span class="string">&#x27;ä¿®æ”¹å‰(id:&#x27;</span>,old.id,<span class="string">&#x27;, name:&#x27;</span>,old.name,<span class="string">&#x27;, age:&#x27;</span>,old.age,<span class="string">&#x27;, salary:&#x27;</span>,old.salary,<span class="string">&#x27;) , ä¿®æ”¹å(id&#x27;</span>,new.id, <span class="string">&#x27;name:&#x27;</span>,new.name,<span class="string">&#x27;, age:&#x27;</span>,new.age,<span class="string">&#x27;, salary:&#x27;</span>,new.salary,<span class="string">&#x27;)&#x27;</span>));                                                                      </span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h4 id="2-2-5-åˆ›å»ºdelete-è¡Œçš„è§¦å‘å™¨-å®Œæˆåˆ é™¤æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•"><a href="#2-2-5-åˆ›å»ºdelete-è¡Œçš„è§¦å‘å™¨-å®Œæˆåˆ é™¤æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•" class="headerlink" title="2.2.5 åˆ›å»ºdelete è¡Œçš„è§¦å‘å™¨ , å®Œæˆåˆ é™¤æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :"></a>2.2.5 åˆ›å»ºdelete è¡Œçš„è§¦å‘å™¨ , å®Œæˆåˆ é™¤æ•°æ®æ—¶çš„æ—¥å¿—è®°å½• :</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> emp_logs_delete_trigger</span><br><span class="line">after <span class="keyword">delete</span> </span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs (id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;delete&#x27;</span>,now(),old.id,concat(<span class="string">&#x27;åˆ é™¤å‰(id:&#x27;</span>,old.id,<span class="string">&#x27;, name:&#x27;</span>,old.name,<span class="string">&#x27;, age:&#x27;</span>,old.age,<span class="string">&#x27;, salary:&#x27;</span>,old.salary,<span class="string">&#x27;)&#x27;</span>));                                                                      </span><br><span class="line"><span class="keyword">end</span> $</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h4 id="2-2-6-æµ‹è¯•ï¼š"><a href="#2-2-6-æµ‹è¯•ï¼š" class="headerlink" title="2.2.6 æµ‹è¯•ï¼š"></a>2.2.6 æµ‹è¯•ï¼š</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(id,name,age,salary) <span class="keyword">values</span>(<span class="keyword">null</span>, <span class="string">&#x27;å…‰æ˜å·¦ä½¿&#x27;</span>,<span class="number">30</span>,<span class="number">3500</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(id,name,age,salary) <span class="keyword">values</span>(<span class="keyword">null</span>, <span class="string">&#x27;å…‰æ˜å³ä½¿&#x27;</span>,<span class="number">33</span>,<span class="number">3200</span>);</span><br><span class="line"></span><br><span class="line">update emp <span class="keyword">set</span> age <span class="operator">=</span> <span class="number">39</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure></div><h2 id="3-åˆ é™¤è§¦å‘å™¨"><a href="#3-åˆ é™¤è§¦å‘å™¨" class="headerlink" title="3. åˆ é™¤è§¦å‘å™¨"></a>3. åˆ é™¤è§¦å‘å™¨</h2><div class="story post-story"><p>è¯­æ³•ç»“æ„ :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> [schema_name.]trigger_name</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æŒ‡å®š schema_nameï¼Œé»˜è®¤ä¸ºå½“å‰æ•°æ®åº“ ã€‚</p><h3 id="4-æŸ¥çœ‹è§¦å‘å™¨"><a href="#4-æŸ¥çœ‹è§¦å‘å™¨" class="headerlink" title="4. æŸ¥çœ‹è§¦å‘å™¨"></a>4. æŸ¥çœ‹è§¦å‘å™¨</h3><p>å¯ä»¥é€šè¿‡æ‰§è¡Œ SHOW TRIGGERS å‘½ä»¤æŸ¥çœ‹è§¦å‘å™¨çš„çŠ¶æ€ã€è¯­æ³•ç­‰ä¿¡æ¯ã€‚</p><p>è¯­æ³•ç»“æ„ ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers ;</span><br></pre></td></tr></table></figure></div><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><div class="story post-story"><ul><li><p>ä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨æ•°æ®åº“å±‚é¢ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¹¶ä¸”å¯ä»¥å°‘å†™ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ä¾‹å¦‚è®°å½•æ—¥å¿—çš„åŠŸèƒ½ï¼Œå¯ä»¥èŠ‚çœæå¤§é‡çš„é€»è¾‘ä»£ç </p></li><li><p>ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé€»è¾‘åœ¨æ•°æ®åº“å±‚é¢ï¼Œåº”ç”¨å±‚è°ƒè¯•å›°éš¾ï¼Œå‡ºç°é—®é¢˜éš¾ä»¥å®šä½</p></li><li><p>æ³¨æ„ç‚¹</p><ul><li><p>å¦‚æœBEFOREè§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQLæ— æ³•æ­£ç¡®æ‰§è¡Œã€‚</p></li><li><p>SQLæ‰§è¡Œå¤±è´¥æ—¶ï¼ŒAFTERå‹è§¦å‘å™¨ä¸ä¼šè§¦å‘ã€‚</p></li><li><p>AFTERç±»å‹çš„è§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQLä¼šå›æ»šã€‚</p></li></ul></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> è§¦å‘å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼•ç»“æ„</title>
      <link href="/2022/02/22/MySQL%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84/"/>
      <url>/2022/02/22/MySQL%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p><code>ç´¢å¼•æ˜¯åœ¨MySQLçš„å­˜å‚¨å¼•æ“å±‚ä¸­å®ç°çš„ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨å±‚å®ç°çš„</code>ã€‚æ‰€ä»¥æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•éƒ½ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å­˜å‚¨å¼•æ“éƒ½æ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹çš„ã€‚MySQLç›®å‰æä¾›äº†ä»¥ä¸‹4ç§ç´¢å¼•ï¼š</p><ul><li>BTREE ç´¢å¼• ï¼š æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†ç´¢å¼•éƒ½æ”¯æŒ B æ ‘ç´¢å¼•ã€‚</li><li>HASH ç´¢å¼•ï¼šåªæœ‰Memoryå¼•æ“æ”¯æŒ ï¼Œ ä½¿ç”¨åœºæ™¯ç®€å• ã€‚</li><li>R-tree ç´¢å¼•ï¼ˆç©ºé—´ç´¢å¼•ï¼‰ï¼šç©ºé—´ç´¢å¼•æ˜¯MyISAMå¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘ï¼Œä¸åšç‰¹åˆ«ä»‹ç»ã€‚</li><li>Full-text ï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰ ï¼šå…¨æ–‡ç´¢å¼•ä¹Ÿæ˜¯MyISAMçš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºå…¨æ–‡ç´¢å¼•ï¼ŒInnoDBä»Mysql5.6ç‰ˆæœ¬å¼€å§‹æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚</li></ul><p><strong>MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ</strong></p><table><thead><tr><th>ç´¢å¼•</th><th>InnoDBå¼•æ“</th><th>MyISAMå¼•æ“</th><th>Memoryå¼•æ“</th></tr></thead><tbody><tr><td>BTREEç´¢å¼•</td><td><code>æ”¯æŒ</code></td><td><code>æ”¯æŒ</code></td><td><code>æ”¯æŒ</code></td></tr><tr><td>HASH ç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td><code>æ”¯æŒ</code></td></tr><tr><td>R-tree ç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Full-text</td><td>5.6ç‰ˆæœ¬ä¹‹åæ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table><p>æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ï¼Œéƒ½æ˜¯æŒ‡B+æ ‘ï¼ˆå¤šè·¯æœç´¢æ ‘ï¼Œå¹¶ä¸ä¸€å®šæ˜¯äºŒå‰çš„ï¼‰ç»“æ„ç»„ç»‡çš„ç´¢å¼•ã€‚å…¶ä¸­èšé›†ç´¢å¼•ã€å¤åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•é»˜è®¤éƒ½æ˜¯ä½¿ç”¨ B+tree ç´¢å¼•ï¼Œç»Ÿç§°ä¸º ç´¢å¼•ã€‚</p><h3 id="BTreeç´¢å¼•"><a href="#BTreeç´¢å¼•" class="headerlink" title="BTreeç´¢å¼•"></a>BTreeç´¢å¼•</h3><p>BTreeåˆå«å¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼Œä¸€é¢—må‰çš„BTreeç‰¹æ€§å¦‚ä¸‹ï¼š</p><ul><li>æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«mä¸ªå­©å­ã€‚</li><li>é™¤æ ¹èŠ‚ç‚¹ä¸å¶å­èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘æœ‰[(m/2)]ä¸ªå­©å­ã€‚</li><li>è‹¥æ ¹èŠ‚ç‚¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤ä¸ªå­©å­ã€‚</li><li>æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ã€‚</li><li>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ç”±nä¸ªkeyä¸n+1ä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­[ceil(m/2)-1] &lt;= n &lt;= m-1</li></ul><p>ä»¥5å‰BTreeä¸ºä¾‹ï¼Œkeyçš„æ•°é‡ï¼šå…¬å¼æ¨å¯¼[ceil(m/2)-1] &lt;= n &lt;= m-1ã€‚æ‰€ä»¥ 2 &lt;= n &lt;=4 ã€‚å½“n&gt;4æ—¶ï¼Œä¸­é—´èŠ‚ç‚¹åˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ï¼Œä¸¤è¾¹èŠ‚ç‚¹åˆ†è£‚ã€‚</p><p>æ’å…¥ C N G A H E K Q M F W L T Z D P R X Y S æ•°æ®ä¸ºä¾‹ã€‚</p><p>æ¼”å˜è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>1). æ’å…¥å‰4ä¸ªå­—æ¯ C N G A</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944126588.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944126588.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944126588"></p><p>2). æ’å…¥Hï¼Œn&gt;4ï¼Œä¸­é—´å…ƒç´ Gå­—æ¯å‘ä¸Šåˆ†è£‚åˆ°æ–°çš„èŠ‚ç‚¹</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944549825.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944549825.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944549825"></p><p>3). æ’å…¥Eï¼ŒKï¼ŒQä¸éœ€è¦åˆ†è£‚</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944596893.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944596893.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944596893"></p><p>4). æ’å…¥Mï¼Œä¸­é—´å…ƒç´ Må­—æ¯å‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹G</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944652560.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944652560.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944652560"></p><p>5). æ’å…¥Fï¼ŒWï¼ŒLï¼ŒTä¸éœ€è¦åˆ†è£‚</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944686928.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944686928.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944686928"></p><p>6). æ’å…¥Zï¼Œä¸­é—´å…ƒç´ Tå‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ä¸­</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944713486.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944713486.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944713486"></p><p>7). æ’å…¥Dï¼Œä¸­é—´å…ƒç´ Då‘ä¸Šåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ä¸­ã€‚ç„¶åæ’å…¥Pï¼ŒRï¼ŒXï¼ŒYä¸éœ€è¦åˆ†è£‚</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944749984.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944749984.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944749984"></p><p>8). æœ€åæ’å…¥Sï¼ŒNPQRèŠ‚ç‚¹n&gt;5ï¼Œä¸­é—´èŠ‚ç‚¹Qå‘ä¸Šåˆ†è£‚ï¼Œä½†åˆ†è£‚åçˆ¶èŠ‚ç‚¹DGMTçš„n&gt;5ï¼Œä¸­é—´èŠ‚ç‚¹Må‘ä¸Šåˆ†è£‚</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944848294.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555944848294.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555944848294"></p><p>åˆ°æ­¤ï¼Œè¯¥BTREEæ ‘å°±å·²ç»æ„å»ºå®Œæˆäº†ï¼Œ <code>BTREEæ ‘ å’Œ äºŒå‰æ ‘ ç›¸æ¯”ï¼Œ æŸ¥è¯¢æ•°æ®çš„æ•ˆç‡æ›´é«˜ï¼Œ å› ä¸ºå¯¹äºç›¸åŒçš„æ•°æ®é‡æ¥è¯´ï¼ŒBTREEçš„å±‚çº§ç»“æ„æ¯”äºŒå‰æ ‘å°ï¼Œå› æ­¤æœç´¢é€Ÿåº¦å¿«ã€‚</code></p><h3 id="B-TREE-ç»“æ„"><a href="#B-TREE-ç»“æ„" class="headerlink" title="B+TREE ç»“æ„"></a>B+TREE ç»“æ„</h3><p>B+Treeä¸ºBTreeçš„å˜ç§ï¼ŒB+Treeä¸BTreeçš„åŒºåˆ«ä¸ºï¼š</p><blockquote><p>1). nå‰B+Treeæœ€å¤šå«æœ‰nä¸ªkeyï¼Œè€ŒBTreeæœ€å¤šå«æœ‰n-1ä¸ªkeyã€‚</p><p>2). B+Treeçš„å¶å­èŠ‚ç‚¹ä¿å­˜æ‰€æœ‰çš„keyä¿¡æ¯ï¼Œä¾keyå¤§å°é¡ºåºæ’åˆ—ã€‚</p><p>3). æ‰€æœ‰çš„éå¶å­èŠ‚ç‚¹éƒ½å¯ä»¥çœ‹ä½œæ˜¯keyçš„ç´¢å¼•éƒ¨åˆ†ã€‚</p></blockquote><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/00001.jpg" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/00001.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555906287178"></p><p>ç”±äºB+Treeåªæœ‰å¶å­èŠ‚ç‚¹ä¿å­˜keyä¿¡æ¯ï¼ŒæŸ¥è¯¢ä»»ä½•keyéƒ½è¦ä»rootèµ°åˆ°å¶å­ã€‚æ‰€ä»¥B+Treeçš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šã€‚</p><h4 id="MySQLä¸­çš„B-Tree"><a href="#MySQLä¸­çš„B-Tree" class="headerlink" title="MySQLä¸­çš„B+Tree"></a>MySQLä¸­çš„B+Tree</h4><p><code>MySqlç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„B+Treeè¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸB+Treeçš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚</code></p><p>MySQLä¸­çš„ B+Tree ç´¢å¼•ç»“æ„ç¤ºæ„å›¾:</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555906287178.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/1555906287178.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="1555906287178"></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> ç´¢å¼• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8ã€ElasticSearchç´¢å¼•Mappingæ˜ å°„å…³ç³»</title>
      <link href="/2021/10/28/8%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95Mapping%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB/"/>
      <url>/2021/10/28/8%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95Mapping%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ElasticSearchä¸­çš„æ˜ å°„å…³ç³»ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œç”¨äºè¯´æ˜è¯¥å­—æ®µçš„ç±»å‹åŠçº¦æŸæ¡ä»¶</p></blockquote><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT user</span><br></pre></td></tr></table></figure></div><h2 id="åˆ›å»ºæ˜ å°„"><a href="#åˆ›å»ºæ˜ å°„" class="headerlink" title="åˆ›å»ºæ˜ å°„"></a>åˆ›å»ºæ˜ å°„</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">PUT user/_mapping</span><br><span class="line">&#123;</span><br><span class="line">  &quot;properties&quot;: &#123;</span><br><span class="line">    &quot;name&quot;:&#123;</span><br><span class="line">    &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">    &quot;index&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;sex&quot;:&#123;</span><br><span class="line">    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">    &quot;index&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;tel&quot;:&#123;</span><br><span class="line">    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">    &quot;index&quot;: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028101350171.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028101350171.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028101350171"></p></div><h2 id="æŸ¥è¯¢æ˜ å°„"><a href="#æŸ¥è¯¢æ˜ å°„" class="headerlink" title="æŸ¥è¯¢æ˜ å°„"></a>æŸ¥è¯¢æ˜ å°„</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET user/_mapping</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028101648202.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028101648202.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028101648202"></p></div><h2 id="æ˜ å°„ä½œç”¨"><a href="#æ˜ å°„ä½œç”¨" class="headerlink" title="æ˜ å°„ä½œç”¨"></a>æ˜ å°„ä½œç”¨</h2><div class="story post-story"><ul><li>å…ˆæ’å…¥ä¸€æ¡æ•°æ®</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT user/_create/1001</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;:&quot;å°ç±³&quot;,</span><br><span class="line">&quot;sex&quot;:&quot;ç”·çš„&quot;,</span><br><span class="line">&quot;tel&quot;:&quot;1111&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢nameä¸­å«æœ‰â€œå°â€çš„æ•°æ®</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET user/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;name&quot;:&quot;å°&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102103591.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102103591.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028102103591"></p><ul><li>æŸ¥è¯¢sexå«æœ‰â€ç”·â€œçš„æ•°æ®</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET user/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;sex&quot;:&quot;ç”·&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102210981.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102210981.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028102210981"></p><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰è¿”å›æ•°æ®ï¼ŒåŸå› æ˜¯sexè¿™ä¸ªå­—æ®µæŒ‡å®šäº†ç±»å‹ä¸ºkeywordï¼Œè€Œkeywordç±»å‹çš„å­—æ®µä¸ä¼šè¢«åˆ†è¯ï¼Œå› æ­¤éœ€è¦å®Œå…¨åŒ¹é…ä¸Šæ‰å¯ä»¥æŸ¥è¯¢å‡ºæ•°æ®</p><ul><li>æŸ¥è¯¢sexå«æœ‰â€ç”·çš„â€œçš„æ•°æ®</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET user/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;sex&quot;:&quot;ç”·çš„&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102411955.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102411955.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028102411955"></p><ul><li>æŸ¥è¯¢ç”µè¯</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET user/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;tel&quot;:&quot;11&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102518193.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211028102518193.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211028102518193"></p><p>æ­¤æ—¶ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯åˆ›å»ºæ˜ å°„æ—¶ï¼ŒæŒ‡å®šäº†indexä¸ºfalseï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡è¿™ä¸ªå­—æ®µæŸ¥è¯¢æ•°æ®</p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(3)</title>
      <link href="/2021/10/27/7%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(3)/"/>
      <url>/2021/10/27/7%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(3)/</url>
      
        <content type="html"><![CDATA[<h2 id="é«˜äº®æŸ¥è¯¢"><a href="#é«˜äº®æŸ¥è¯¢" class="headerlink" title="é«˜äº®æŸ¥è¯¢"></a>é«˜äº®æŸ¥è¯¢</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match_phrase&quot;:&#123;</span><br><span class="line">&quot;category&quot; : &quot;ä¸º&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">  &quot;highlight&quot;:&#123;</span><br><span class="line">    &quot;fields&quot;:&#123;</span><br><span class="line">      &quot;category&quot;:&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027170038855.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027170038855.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027170038855"></p></div><h2 id="èšåˆæŸ¥è¯¢"><a href="#èšåˆæŸ¥è¯¢" class="headerlink" title="èšåˆæŸ¥è¯¢"></a>èšåˆæŸ¥è¯¢</h2><div class="story post-story"><p>èšåˆæŸ¥è¯¢ç±»ä¼¼å…³ç³»å‹æ•°æ®åº“ä¸­çš„ group byï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„èšåˆï¼Œä¾‹å¦‚å–æœ€å¤§å€¼maxã€å¹³å‡å€¼avgç­‰ç­‰ã€‚</p><ul><li>æŒ‰priceå­—æ®µè¿›è¡Œåˆ†ç»„ï¼š</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;aggs&quot;:&#123;</span><br><span class="line">&quot;price_group&quot;:&#123;</span><br><span class="line">&quot;terms&quot;:&#123;</span><br><span class="line">&quot;field&quot;:&quot;price&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027210556871.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027210556871.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027210556871"></p><p>ä¸Šè¿°çš„è¿”å›ç»“æœä¼šæºå¸¦åŸå§‹æ•°æ®ï¼Œå¦‚æœä¸æƒ³æºå¸¦å¯ä»¥æ–°å¢ä¸€ä¸ªsizeçš„å­—æ®µ</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;aggs&quot;:&#123;</span><br><span class="line">&quot;price_group&quot;:&#123;</span><br><span class="line">&quot;terms&quot;:&#123;</span><br><span class="line">&quot;field&quot;:&quot;price&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;size&quot;: 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027210746054.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027210746054.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027210746054"></p><ul><li>å¯¹æ‰€æœ‰æ‰‹æœºä»·æ ¼æ±‚å¹³å‡å€¼</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;aggs&quot;:&#123;</span><br><span class="line">&quot;price_avg&quot;:&#123;</span><br><span class="line">&quot;avg&quot;:&#123;</span><br><span class="line">&quot;field&quot;:&quot;price&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">  &quot;size&quot;:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027211110652.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027211110652.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027211110652"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(2)</title>
      <link href="/2021/10/27/6%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(2)/"/>
      <url>/2021/10/27/6%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(2)/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šæ¡ä»¶æŸ¥è¯¢"><a href="#å¤šæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="å¤šæ¡ä»¶æŸ¥è¯¢"></a>å¤šæ¡ä»¶æŸ¥è¯¢</h2><div class="story post-story"><ul><li>å‡è®¾æƒ³æ‰¾å‡ºå°ç±³ç‰Œå­ï¼Œä»·æ ¼ä¸º3999å…ƒçš„ã€‚ï¼ˆmustç›¸å½“äºæ•°æ®åº“çš„&amp;&amp;ï¼‰</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;bool&quot;:&#123;</span><br><span class="line">&quot;must&quot;:[&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;category&quot;:&quot;å°ç±³&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;price&quot;:3999.00</span><br><span class="line">&#125;</span><br><span class="line">&#125;]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027161613978.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027161613978.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027161613978"></p><ul><li>å‡è®¾æƒ³æ‰¾å‡ºå°ç±³å’Œåä¸ºçš„ç‰Œå­ã€‚ï¼ˆshouldç›¸å½“äºæ•°æ®åº“çš„||ï¼‰</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;bool&quot;:&#123;</span><br><span class="line">&quot;should&quot;:[&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;category&quot;:&quot;å°ç±³&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;category&quot;:&quot;åä¸º&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027164254939.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027164254939.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027164254939"></p><ul><li>å‡è®¾æƒ³æ‰¾å‡ºå°ç±³å’Œåä¸ºçš„ç‰Œå­ï¼Œä»·æ ¼å¤§äº4000å…ƒçš„æ‰‹æœºã€‚</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;should&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;match&quot;: &#123;</span><br><span class="line">            &quot;category&quot;: &quot;å°ç±³&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;match&quot;: &#123;</span><br><span class="line">            &quot;category&quot;: &quot;åä¸º&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;filter&quot;: &#123;</span><br><span class="line">      &quot;range&quot;: &#123;</span><br><span class="line">          &quot;price&quot;: &#123;</span><br><span class="line">            &quot;gt&quot;: 4000</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027164444808.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027164444808.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027164444808"></p></div><h2 id="å®Œå…¨åŒ¹é…æŸ¥è¯¢"><a href="#å®Œå…¨åŒ¹é…æŸ¥è¯¢" class="headerlink" title="å®Œå…¨åŒ¹é…æŸ¥è¯¢"></a>å®Œå…¨åŒ¹é…æŸ¥è¯¢</h2><div class="story post-story"><p>å³éœ€è¦å®Œå…¨åŒ…å«æœç´¢æ¡ä»¶çš„æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åšåˆ†è¯å¤„ç†</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;match_phrase&quot;: &#123;</span><br><span class="line">      &quot;category&quot;: &quot;å°ä¸º&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027165009701.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027165009701.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027165009701"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5ã€ElasticSearchæ–‡æ¡£çš„æŸ¥è¯¢(1)</title>
      <link href="/2021/10/27/5%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(1)/"/>
      <url>/2021/10/27/5%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E6%9F%A5%E8%AF%A2(1)/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸»é”®æŸ¥è¯¢"><a href="#ä¸»é”®æŸ¥è¯¢" class="headerlink" title="ä¸»é”®æŸ¥è¯¢"></a>ä¸»é”®æŸ¥è¯¢</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_doc/1</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027140851488.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027140851488.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027140851488"></p></div><h2 id="å…¨æŸ¥è¯¢"><a href="#å…¨æŸ¥è¯¢" class="headerlink" title="å…¨æŸ¥è¯¢"></a>å…¨æŸ¥è¯¢</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027140943179.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027140943179.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027140943179"></p></div><h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><div class="story post-story"><h3 id="é€šè¿‡é“¾æ¥ä¸Šæ‹¼æ¥å‚æ•°çš„æ–¹å¼"><a href="#é€šè¿‡é“¾æ¥ä¸Šæ‹¼æ¥å‚æ•°çš„æ–¹å¼" class="headerlink" title="é€šè¿‡é“¾æ¥ä¸Šæ‹¼æ¥å‚æ•°çš„æ–¹å¼"></a>é€šè¿‡é“¾æ¥ä¸Šæ‹¼æ¥å‚æ•°çš„æ–¹å¼</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search?q=category:åä¸º</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152139551.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152139551.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027152139551"></p><p><code>PS:ä¸å»ºè®®å°†å‚æ•°æ‹¼æ¥åœ¨é“¾æ¥ä¸Šï¼Œå¯èƒ½ä¼šæœ‰ä¹±ç é—®é¢˜</code></p><h3 id="é€šè¿‡è¯·æ±‚ä½“"><a href="#é€šè¿‡è¯·æ±‚ä½“" class="headerlink" title="é€šè¿‡è¯·æ±‚ä½“"></a>é€šè¿‡è¯·æ±‚ä½“</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match&quot;:&#123;</span><br><span class="line">&quot;category&quot;:&quot;åä¸º&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152616844.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152616844.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027152616844"></p><h3 id="é€šè¿‡è¯·æ±‚ä½“æŸ¥è¯¢æ‰€æœ‰"><a href="#é€šè¿‡è¯·æ±‚ä½“æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="é€šè¿‡è¯·æ±‚ä½“æŸ¥è¯¢æ‰€æœ‰"></a>é€šè¿‡è¯·æ±‚ä½“æŸ¥è¯¢æ‰€æœ‰</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match_all&quot;:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152938043.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027152938043.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027152938043"></p><h3 id="æŸ¥è¯¢æŒ‡å®šå­—æ®µ"><a href="#æŸ¥è¯¢æŒ‡å®šå­—æ®µ" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šå­—æ®µ"></a>æŸ¥è¯¢æŒ‡å®šå­—æ®µ</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match_all&quot;:&#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;_source&quot;:[&quot;title&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027154525570.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027154525570.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027154525570"></p><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match_all&quot;:&#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;from&quot;:0,</span><br><span class="line">&quot;size&quot;:1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027154739085.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027154739085.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027154739085"></p><h3 id="æŸ¥è¯¢æ’åº"><a href="#æŸ¥è¯¢æ’åº" class="headerlink" title="æŸ¥è¯¢æ’åº"></a>æŸ¥è¯¢æ’åº</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_search</span><br><span class="line">&#123;</span><br><span class="line">&quot;query&quot;:&#123;</span><br><span class="line">&quot;match_all&quot;:&#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;sort&quot;:&#123;</span><br><span class="line">&quot;price&quot;:&#123;</span><br><span class="line">&quot;order&quot;:&quot;desc&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027155008884.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027155008884.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027155008884"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4ã€ElasticSearchæ–‡æ¡£çš„ä¿®æ”¹</title>
      <link href="/2021/10/27/4%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E4%BF%AE%E6%94%B9/"/>
      <url>/2021/10/27/4%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E4%BF%AE%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="å®Œå…¨è¦†ç›–ä¿®æ”¹"><a href="#å®Œå…¨è¦†ç›–ä¿®æ”¹" class="headerlink" title="å®Œå…¨è¦†ç›–ä¿®æ”¹"></a>å®Œå…¨è¦†ç›–ä¿®æ”¹</h2><div class="story post-story"><p>å®Œå…¨è¦†ç›–æ“ä½œæ˜¯å¹‚ç­‰æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨PUTæ–¹æ³•</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT shopping/_doc/1</span><br><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;:&quot;åä¸ºæ‰‹æœº&quot;,</span><br><span class="line">    &quot;category&quot;:&quot;åä¸º&quot;,</span><br><span class="line">    &quot;images&quot;:&quot;http://www.gulixueyuan.com/hw.jpg&quot;,</span><br><span class="line">    &quot;price&quot;:1999.00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027141420028.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027141420028.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027141420028"></p><p>æ­¤æ—¶å†è·å–ä¸€ä¸‹</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping/_doc/1</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027141504405.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027141504405.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027141504405"></p><p>å¯ä»¥çœ‹åˆ°æ•´ä¸ªæ•°æ®ä½“è¢«å®Œå…¨è¦†ç›–äº†</p></div><h2 id="å±€éƒ¨ä¿®æ”¹"><a href="#å±€éƒ¨ä¿®æ”¹" class="headerlink" title="å±€éƒ¨ä¿®æ”¹"></a>å±€éƒ¨ä¿®æ”¹</h2><div class="story post-story"><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST shopping/_upodate/1</span><br><span class="line">&#123;</span><br><span class="line">&quot;doc&quot;: &#123;</span><br><span class="line">&quot;title&quot;:&quot;OPPOæ‰‹æœº&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027143257707.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027143257707.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027143257707"></p><p>æ­¤æ—¶å†è·å–ä¸€é</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027143420473.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027143420473.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027143420473"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3ã€ElasticSearchæ–‡æ¡£çš„åˆ›å»ºåŠåˆ é™¤</title>
      <link href="/2021/10/27/3%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%9B%E5%BB%BA/"/>
      <url>/2021/10/27/3%E3%80%81ElasticSearch%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%9B%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºæ–‡æ¡£"><a href="#åˆ›å»ºæ–‡æ¡£" class="headerlink" title="åˆ›å»ºæ–‡æ¡£"></a>åˆ›å»ºæ–‡æ¡£</h2><div class="story post-story"><p>åˆ›å»ºæ–‡æ¡£éœ€è¦ä½¿ç”¨POSTè¯·æ±‚ï¼Œå¦‚æœç”¨PUTè¯·æ±‚åˆ™ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯PUTè¯·æ±‚åº”å½“ä¸ºå¹‚ç­‰æ€§æ“ä½œï¼Œè€Œä¸æŒ‡å®šidç›´æ¥åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œä¼šä¸æ–­ç”Ÿæˆæ–°çš„æ–‡æ¡£ï¼Œè¯¥æ“ä½œä¸ä¸ºå¹‚ç­‰æ“ä½œï¼Œå› æ­¤æ— æ³•ä½¿ç”¨PUTè¯·æ±‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT shopping/_doc</span><br><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;,</span><br><span class="line">    &quot;category&quot;:&quot;å°ç±³&quot;,</span><br><span class="line">    &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;,</span><br><span class="line">    &quot;price&quot;:3999.00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112442078.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112442078.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027112442078"></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST shopping/_doc</span><br><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;,</span><br><span class="line">    &quot;category&quot;:&quot;å°ç±³&quot;,</span><br><span class="line">    &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;,</span><br><span class="line">    &quot;price&quot;:3999.00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112509288.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112509288.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027112509288"></p><p><code>PS:åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œå¦‚æœæŒ‡å®šç´¢å¼•ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥ç´¢å¼•</code></p><p><code>_id</code>ä¸ºElasticSearchè‡ªåŠ¨ä¸ºè¯¥æ–‡æ¡£ç”Ÿæˆçš„idï¼Œå¦‚æœæƒ³è¦è‡ªå·±æŒ‡å®šidï¼Œåˆ™éœ€è¦åœ¨urlåé¢æ‹¼æ¥ä¸Šid</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST shopping/_doc/1</span><br><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;,</span><br><span class="line">    &quot;category&quot;:&quot;å°ç±³&quot;,</span><br><span class="line">    &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;,</span><br><span class="line">    &quot;price&quot;:3999.00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112840556.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027112840556.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027112840556"></p><p>æŒ‡å®šidåï¼Œæ“ä½œå°±æ˜¯å¹‚ç­‰æ“ä½œäº†ï¼Œå› æ­¤ç†è®ºä¸Šå¯ä»¥æ¢æˆPUTæ–¹å¼è¯·æ±‚ï¼Œ</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT shopping/_doc/1</span><br><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;:&quot;å°ç±³æ‰‹æœº&quot;,</span><br><span class="line">    &quot;category&quot;:&quot;å°ç±³&quot;,</span><br><span class="line">    &quot;images&quot;:&quot;http://www.gulixueyuan.com/xm.jpg&quot;,</span><br><span class="line">    &quot;price&quot;:3999.00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027134733636.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027134733636.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027134733636"></p></div><h2 id="åˆ é™¤æ–‡æ¡£"><a href="#åˆ é™¤æ–‡æ¡£" class="headerlink" title="åˆ é™¤æ–‡æ¡£"></a>åˆ é™¤æ–‡æ¡£</h2><div class="story post-story"><p>åŒç†ï¼Œåªè¦å°†è¯·æ±‚æ–¹å¼æ”¹ä¸ºDELETEå³å¯</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE shopping/_doc/1</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027135132674.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027135132674.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027135132674"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2ã€ElasticSearchç´¢å¼•çš„åˆ›å»ºæŸ¥è¯¢åŠåˆ é™¤</title>
      <link href="/2021/10/27/2%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E6%9F%A5%E8%AF%A2%E5%8F%8A%E5%88%A0%E9%99%A4/"/>
      <url>/2021/10/27/2%E3%80%81ElasticSearch%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E6%9F%A5%E8%AF%A2%E5%8F%8A%E5%88%A0%E9%99%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åç»­æ“ä½œå‡åœ¨Kibanaçš„Dev Toolsä¸­å®Œæˆ</p></blockquote><h2 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h2><div class="story post-story"><p>åˆ›å»ºä½¿ç”¨PUTçš„è¯·æ±‚æ–¹å¼</p><p>å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºshoppingçš„ç´¢å¼•</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT shopping</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103327907.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103327907.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027103327907"></p><p>æ­¤æ—¶å†æ¬¡è°ƒç”¨åˆ™ä¼šæŠ¥é”™</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103455940.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103455940.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027103455940"></p></div><h2 id="æŸ¥è¯¢ç´¢å¼•"><a href="#æŸ¥è¯¢ç´¢å¼•" class="headerlink" title="æŸ¥è¯¢ç´¢å¼•"></a>æŸ¥è¯¢ç´¢å¼•</h2><div class="story post-story"><ul><li><p>æŸ¥è¯¢æŒ‡å®šç´¢å¼•</p><p>å°†PUTæ”¹ä¸ºGETå³å¯</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103955039.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027103955039.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027103955039"></p><ul><li><p>æŸ¥è¯¢æ‰€æœ‰çš„ç´¢å¼•</p><p>åŠ ä¸Š<code>?v</code>åä¼šå±•ç¤ºå­—æ®µå¤´ä¿¡æ¯</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET _cat/indices?v</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104156013.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104156013.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027104156013"></p></div><h2 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h2><div class="story post-story"><p>ä¸æŸ¥è¯¢æŒ‡å®šç´¢å¼•çš„é€»è¾‘ä¸€è‡´ï¼Œå°†è¯·æ±‚æ–¹å¼æ”¹ä¸ºDELETEå³å¯</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE shopping</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104517785.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104517785.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027104517785"></p><p>æ­¤æ—¶å†æŸ¥è¯¢åˆ™ä¼šè¿”å›404</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET shopping</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104611499.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20211027104611499.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211027104611499"></p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1ã€Dockerå®‰è£…ElasticSearchå’ŒKibana</title>
      <link href="/2021/10/26/1%E3%80%81Docker%E5%AE%89%E8%A3%85ElasticSearch%E5%92%8CKibana/"/>
      <url>/2021/10/26/1%E3%80%81Docker%E5%AE%89%E8%A3%85ElasticSearch%E5%92%8CKibana/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…ElasticSearch"><a href="#å®‰è£…ElasticSearch" class="headerlink" title="å®‰è£…ElasticSearch"></a>å®‰è£…ElasticSearch</h2><div class="story post-story"><p>å…ˆæ‹‰ä¸‹esçš„é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull elasticsearch:7.12.0</span><br></pre></td></tr></table></figure><p>é•œåƒæ‹‰å–å®Œæ¯•åæ–°å»ºå®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name elasticsearch -p 9200:9200 -d elasticsearch:7.12.0</span><br></pre></td></tr></table></figure><p>ç­‰eså¯åŠ¨å®Œæˆåï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://127.0.0.1:9200</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a href="http://">http://127.0.0.1:9200</a>è¿™ä¸ªç½‘å€ï¼Œå¦‚æœèƒ½çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜æˆ‘ä»¬çš„esæ˜¯å·²ç»å®‰è£…å¥½äº†çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;e0c0b0ff715b&quot;,</span><br><span class="line">    &quot;cluster_name&quot;: &quot;elasticsearch&quot;,</span><br><span class="line">    &quot;cluster_uuid&quot;: &quot;c42jGCPrRHiGTix4pUl9EQ&quot;,</span><br><span class="line">    &quot;version&quot;: &#123;</span><br><span class="line">        &quot;number&quot;: &quot;7.12.0&quot;,</span><br><span class="line">        &quot;build_flavor&quot;: &quot;default&quot;,</span><br><span class="line">        &quot;build_type&quot;: &quot;docker&quot;,</span><br><span class="line">        &quot;build_hash&quot;: &quot;78722783c38caa25a70982b5b042074cde5d3b3a&quot;,</span><br><span class="line">        &quot;build_date&quot;: &quot;2021-03-18T06:17:15.410153305Z&quot;,</span><br><span class="line">        &quot;build_snapshot&quot;: false,</span><br><span class="line">        &quot;lucene_version&quot;: &quot;8.8.0&quot;,</span><br><span class="line">        &quot;minimum_wire_compatibility_version&quot;: &quot;6.8.0&quot;,</span><br><span class="line">        &quot;minimum_index_compatibility_version&quot;: &quot;6.0.0-beta1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;tagline&quot;: &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…IKåˆ†è¯å™¨"><a href="#å®‰è£…IKåˆ†è¯å™¨" class="headerlink" title="å®‰è£…IKåˆ†è¯å™¨"></a>å®‰è£…IKåˆ†è¯å™¨</h4><p>esè‡ªå¸¦çš„åˆ†è¯å™¨å¯¹ä¸­æ–‡åˆ†è¯ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸‹è½½å¼€æºçš„IKåˆ†è¯å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆè¿›å…¥å®¹å™¨ï¼Œç„¶åè¿›å…¥pluginsç›®å½•ä¸­ä¸‹è½½åˆ†è¯å™¨ï¼Œä¸‹è½½å®Œæˆåé‡å¯eså³å¯ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹:</p><p><strong>æ³¨æ„ï¼š</strong>elasticsearchçš„ç‰ˆæœ¬å’Œikåˆ†è¯å™¨çš„ç‰ˆæœ¬éœ€è¦ä¿æŒä¸€è‡´ï¼Œä¸ç„¶åœ¨é‡å¯çš„æ—¶å€™ä¼šå¤±è´¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it elasticsearch /bin/bash</span><br><span class="line">cd /usr/share/elasticsearch/plugins/</span><br><span class="line">elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.12.0/elasticsearch-analysis-ik-7.12.0.zip</span><br></pre></td></tr></table></figure></div><h2 id="å®‰è£…Kibana"><a href="#å®‰è£…Kibana" class="headerlink" title="å®‰è£…Kibana"></a>å®‰è£…Kibana</h2><div class="story post-story"><p>åŒæ ·é€‚ç”¨dockerå®‰è£…kibanaå‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull kibana:7.12.0</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä»¥åéœ€è¦å¯åŠ¨kibanaå®¹å™¨ï¼Œéœ€è¦ä½¿ç”¨<code>--link</code>è¿æ¥åˆ°elasticsearchå®¹å™¨ï¼Œ<code>--link</code>å‘½ä»¤çš„æ ¼å¼ä¸ºname:aliasï¼Œå³éœ€è¦ç»‘å®šçš„å®¹å™¨åç§°ä»¥åŠèµ‹äºˆçš„åˆ«å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name kibana --link=elasticsearch:es  -p 5601:5601 -d kibana:7.12.0</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åéœ€è¦ä¿®æ”¹kibanaçš„é…ç½®æ–‡ä»¶ï¼Œå°†è¿æ¥esçš„åœ°å€ä¿®æ”¹ä¸ºåˆ›å»ºå®¹å™¨æ—¶å¡«å…¥çš„åˆ«å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it elasticsearch /bin/bash</span><br><span class="line">cd /usr/share/kibana/config/</span><br><span class="line">vi kibana.yml</span><br></pre></td></tr></table></figure><p>å°†<code>elasticsearch.hosts</code>é¡¹ä¿®æ”¹ä¸º <code>[ &quot;http://es:9200&quot; ]</code></p><p>é‡å¯kibanaååœ¨æµè§ˆå™¨ä¸­è¾“å…¥kibanaçš„åœ°å€å³å¯æ‰“å¼€kibanaçš„é¡µé¢äº†</p></div>]]></content>
      
      
      <categories>
          
          <category> ElasticSearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL-limitæ•°æ®ä¸¢å¤±é—®é¢˜</title>
      <link href="/2021/10/26/Mysql-limit%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/"/>
      <url>/2021/10/26/Mysql-limit%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©åœ¨é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„bugï¼Œå‰ç«¯è°ƒæ¥å£åˆ†é¡µè¿”å›æ•°æ®æ—¶ï¼Œæœ‰ä¸¤æ¡æ•°æ®åœ¨ç¬¬ä¸€é¡µçš„æœ€åè¿”å›äº†ï¼Œç„¶ååˆåœ¨ç¬¬äºŒé¡µçš„å¤´è¿”å›äº†ï¼Œæœ¬ä»¥ä¸ºæ˜¯ç¨‹åºçš„é—®é¢˜ï¼Œæ’æŸ¥äº†åŠå¤©æœ€åå‘ç°æ˜¯Mysqlçš„é—®é¢˜ã€‚</p></blockquote><h2 id="Mysqlè¡¨æ•°æ®"><a href="#Mysqlè¡¨æ•°æ®" class="headerlink" title="Mysqlè¡¨æ•°æ®"></a>Mysqlè¡¨æ•°æ®</h2><div class="story post-story"><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091251361.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091251361.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701091251361"></p></div><h2 id="æŸ¥è¯¢æµç¨‹"><a href="#æŸ¥è¯¢æµç¨‹" class="headerlink" title="æŸ¥è¯¢æµç¨‹"></a>æŸ¥è¯¢æµç¨‹</h2><div class="story post-story"><h4 id="å…ˆå°è¯•æŸ¥è¯¢å‰äºŒåæ¡æ•°æ®"><a href="#å…ˆå°è¯•æŸ¥è¯¢å‰äºŒåæ¡æ•°æ®" class="headerlink" title="å…ˆå°è¯•æŸ¥è¯¢å‰äºŒåæ¡æ•°æ®"></a>å…ˆå°è¯•æŸ¥è¯¢å‰äºŒåæ¡æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tb_customer_open_sea WHERE corpid = &#x27;1&#x27; AND del = 0 LIMIT 0,20;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœ</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091352328.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091352328.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701091352328"></p><p>å¯ä»¥çœ‹åˆ°idä¸º2å’Œ3çš„æ•°æ®ä¸¢å¤±äº†ï¼ŒåŒæ—¶è¿”å›äº†idä¸º21å’Œ22çš„æ•°æ®ï¼Œæ­¤æ—¶å†æŸ¥è¯¢ç¬¬äºŒé¡µçš„æ•°æ®æ—¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tb_customer_open_sea WHERE corpid = &#x27;1&#x27; AND del = 0 LIMIT 20,20;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091429496.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091429496.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701091429496"></p><p>å†æ¬¡è¿”å›äº†idä¸º21å’Œ22çš„æ•°æ®ï¼Œè¿™å°±ç¦»è°±äº†ï¼Œä¸¢äº†ä¸¤æ¡æ•°æ®ï¼Œéš¾é“æ˜¯æ²¡æ»¡è¶³whereæ¡ä»¶å—ï¼Ÿäºæ˜¯æˆ‘å»æ‰äº†limitè¯•äº†è¯•</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091532394.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091532394.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701091532394"></p><p>idä¸º2å’Œ3çš„æ•°æ®å‡ºç°äº†â€¦.è€Œå’Œåˆšæ‰é‚£æ¡SQLçš„åŒºåˆ«åªæ˜¯å»æ‰äº†limitï¼Œéš¾é“limitè¿˜ä¼šå½±å“æŸ¥è¯¢ç»“æœï¼Ÿï¼Ÿï¼Ÿç„¶åæˆ‘åˆåœ¨limitçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†order by</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210630224930575.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210630224930575.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210630224930575"></p><p>æ­¤æ—¶è¿”å›çš„æ•°æ®ä¸­åŒ…å«äº†2å’Œ3ï¼Œè¯´æ˜æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œåªæ˜¯è¿”å›çš„é¡ºåºä¸å¯¹å¯èƒ½2å’Œ3çš„æ•°æ®æ’åœ¨äº†äºŒåæ¡ä»¥åï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒé¡µä¹Ÿä¸åŒ…å«è¿™ä¸¤æ¡æ•°æ®å‘¢</p><p>äºæ˜¯æˆ‘explainäº†ä¸€ä¸‹è¿™ä¸¤æ¡sqlï¼Œå‘ç°è¿™ä¸¤æ¡sqlå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸€æ¡èµ°äº†è”åˆç´¢å¼•ï¼Œç¬¬äºŒæ¡æ²¡èµ°è”åˆç´¢å¼•ï¼Œäºæ˜¯æˆ‘åˆå°è¯•äº†è®©ç¬¬äºŒæ¡sqlèµ°ç´¢å¼•</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091626683.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210701091626683.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210701091626683"></p><p>æ¶ˆå¤±çš„æ•°æ®åˆå‡ºç°äº†ï¼Œæœç„¶æ˜¯ç´¢å¼•çš„é—®é¢˜(ä¸ç”¨limit 20,9æ˜¯å› ä¸ºè¡¨ä¸­ä¸€å…±å°±29æ¡æ•°æ®ï¼Œè¿™æ ·çš„è¯å°±æ˜¯å…¨è¡¨æ‰«æä¸ä¼šèµ°ç´¢å¼•äº†)</p></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><div class="story post-story"><p>å½“ä½¿ç”¨limitä¸ä½¿ç”¨order byæ—¶ï¼Œä¸”æŸ¥è¯¢æ¡ä»¶èµ°äº†æ™®é€šç´¢å¼•ï¼Œå°±å¯èƒ½ä¼šæŒ‰æ™®é€šç´¢å¼•çš„é¡ºåºè¿”å›æ•°æ®ï¼Œæ‰€ä»¥ç”¨äº†limitå°±å°½é‡åŠ ä¸Šorder by</p></div>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> ç´¢å¼• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¹¶å‘-CAS-ä¹è§‚é”-è§£æ</title>
      <link href="/2021/05/26/Java%E5%B9%B6%E5%8F%91-CAS-%E4%B9%90%E8%A7%82%E9%94%81-%E8%A7%A3%E6%9E%90/"/>
      <url>/2021/05/26/Java%E5%B9%B6%E5%8F%91-CAS-%E4%B9%90%E8%A7%82%E9%94%81-%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<blockquote><p> æœ¬æ–‡è®²è§£CASæœºåˆ¶ï¼Œä¸»è¦æ˜¯å› ä¸ºæœ€è¿‘å‡†å¤‡é¢è¯•é¢˜ï¼Œå‘ç°è¿™ä¸ªé—®é¢˜åœ¨é¢è¯•ä¸­å‡ºç°çš„é¢‘ç‡éå¸¸çš„é«˜ï¼Œå› æ­¤æŠŠè‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¸€äº›ç†è§£è®°å½•ä¸‹æ¥ã€‚</p></blockquote><h3 id="ä¹è§‚é”ä¸æ‚²è§‚é”"><a href="#ä¹è§‚é”ä¸æ‚²è§‚é”" class="headerlink" title="ä¹è§‚é”ä¸æ‚²è§‚é”"></a>ä¹è§‚é”ä¸æ‚²è§‚é”</h3><ul><li><p>synchronizedæ˜¯æ‚²è§‚é”ï¼Œè¿™ç§çº¿ç¨‹ä¸€æ—¦å¾—åˆ°é”ï¼Œå…¶ä»–éœ€è¦é”çš„çº¿ç¨‹å°±æŒ‚èµ·çš„æƒ…å†µå°±æ˜¯æ‚²è§‚é”ã€‚</p></li><li><p>CASæ“ä½œçš„å°±æ˜¯ä¹è§‚é”ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚</p></li></ul><h3 id="æ¨¡æ‹Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#æ¨¡æ‹Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="æ¨¡æ‹Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜"></a>æ¨¡æ‹Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>å…ˆçœ‹ä¸‹é¢çš„ä»£ç ï¼Œæ‰§è¡Œç»“æœä¸è¨€è€Œå–»ï¼Œæœ€ç»ˆçš„ç»“æœä¸€å®šæ˜¯å°äºé¢„æœŸçš„1000</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¹¶å‘æ—¶çº¿ç¨‹å®‰å…¨é—®é¢˜</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Suave</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 2021/3/5 1:50 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">int</span> threadSize = <span class="number">100</span>;</span><br><span class="line">        CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(threadSize);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; threadSize; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        request();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                countDownLatch.countDown();</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        countDownLatch.await();</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.printf(<span class="string">&quot;æ¶ˆè€—æ—¶é•¿: %d, ç»“æœ: %d&quot;</span>, endTime - startTime, count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        TimeUnit.MILLISECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305154019790.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305154019790.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="&quot;æ‰§è¡Œç»“æœ&quot;"></p><p>è¿™æ®µä»£ç çº¿ç¨‹ä¸å®‰å…¨çš„å…·ä½“åŸå› æ˜¯ <strong>count++</strong> å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œcount++å®é™…ä¼šç»è¿‡ä¸‰ä¸ªæ­¥éª¤</p><ul><li>è·å– count çš„å€¼ï¼Œå…ˆè®°ä¸º A    A = count</li><li>å°† A çš„å€¼åŠ ä¸€ï¼Œå¾—åˆ°B    B = A+1</li><li>å°† B çš„å€¼èµ‹ç»™ count    count = B</li></ul><p>åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶èµ°åˆ°ç¬¬ä¸€æ­¥ï¼ŒåŒæ—¶è·å–åˆ°äº†ç›¸åŒçš„A</p><p>æ­¤æ—¶æ–°å¢åå°†å€¼èµ‹ç»™Bå°±ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ç»“æœcountåªåŠ äº†ä¸€çš„æƒ…å†µ</p><h3 id="çº¿ç¨‹å®‰å…¨é—®é¢˜è§£å†³"><a href="#çº¿ç¨‹å®‰å…¨é—®é¢˜è§£å†³" class="headerlink" title="çº¿ç¨‹å®‰å…¨é—®é¢˜è§£å†³"></a>çº¿ç¨‹å®‰å…¨é—®é¢˜è§£å†³</h3><ul><li>çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å¯ä»¥é€šè¿‡åŠ é”çš„æ–¹å¼è§£å†³ï¼Œå…ˆæ¥è¯•è¯•æœ€å¸¸ç”¨ä¹Ÿæœ€æ–¹ä¾¿çš„synchronizedå…³é”®å­—ï¼Œå³å‡è®¾æ¯æ¬¡éƒ½ä¼šæœ‰å†²çªï¼Œä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥çš„æ‚²è§‚é”</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨requestæ–¹æ³•ä¸Šé¢åŠ ä¸Šsynchronizedå…³é”®å­—</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        TimeUnit.MILLISECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹    å†æ¥è¿è¡Œè¯•ä¸€ä¸‹</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305155226372.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305155226372.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="&quot;æ‰§è¡Œç»“æœ&quot;"></p><p>â€‹    å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ï¼Œçº¿ç¨‹å·²ç»å®‰å…¨äº†ã€‚</p><p>â€‹    ä½†æ˜¯ï¼Œè¿™ä¸ªè¿è¡Œæ•ˆç‡å°±å¾ˆæ„Ÿäººäº†â€¦â€¦â€¦</p><ul><li>ç”¨CASä¹è§‚é”è§£å†³</li></ul><p>å¢åŠ ä¸€ä¸ªCASæ–¹æ³•ï¼ŒåŒæ—¶æ›´æ”¹requestæ–¹æ³•ï¼Œæ¯æ¬¡èµ‹å€¼çš„æ—¶å€™å»æ¯”è¾ƒä¸€ä¸‹å€¼æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œæ”¹å˜äº†å°±é‡è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * CASæ–¹æ³•</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> expectCount æœŸæœ›å€¼count</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> newCount    éœ€è¦ç»™countèµ‹çš„æ–°å€¼</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> true æˆåŠŸ false å¤±è´¥</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">compareAndSwap</span><span class="params">(<span class="keyword">int</span> expectCount, <span class="keyword">int</span> newCount)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count == expectCount) &#123;</span><br><span class="line">      count = newCount;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">request</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">      TimeUnit.MILLISECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">      <span class="keyword">int</span> expectCount;</span><br><span class="line">      <span class="comment">// expectCountè¿”å›falseæ—¶è¦å†è·å–countçš„å€¼å¹¶é‡æ–°èµ‹å€¼</span></span><br><span class="line">      <span class="keyword">while</span> (!compareAndSwap(expectCount=count, expectCount + <span class="number">1</span>)) &#123;&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305160816328.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210305160816328.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="&quot;æ‰§è¡Œç»“æœ&quot;"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œç»“æœä¸æˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ï¼Œæ€§èƒ½ä¹Ÿè¦å¼ºäºsynchronizedæ‚²è§‚é”</p><p><em><strong>é‚£ä¹ˆè¿™æ®µä¹è§‚é”çš„ä»£ç å°±ä¸€å®šä¸ä¼šå‡ºé—®é¢˜äº†å—ï¼Ÿ</strong></em></p><p>CPUæ‰§è¡ŒæŸä¸€æ®µä»£ç çš„æ—¶å€™ï¼Œä¼šå…ˆå°†æ•°æ®è¯»å–åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå½“è¯¥çº¿ç¨‹å°†æ•°æ®è¯»å–åˆ°é«˜é€Ÿç¼“å­˜ä¸­æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ›´æ–°äº†ä¸»å­˜ä¸­çš„å€¼ï¼Œæ­¤æ—¶æˆ‘ä»¬ç¼“å­˜ä¸­çš„å€¼å°±ä¸å‡†ç¡®äº†</p><p>å½“æˆ‘ä»¬ä»¥ç¼“å­˜ä¸­çš„å€¼åšCASæ“ä½œæ—¶ï¼Œå°±ä¼šä¸é¢„æœŸå€¼ä¸ä¸€è‡´äº†ï¼Œå› æ­¤ï¼Œè¿˜è¦åœ¨ <strong>count</strong> å±æ€§ä¸ŠåŠ ä¸Š <em><strong>volatile</strong></em> å…³é”®å­—ï¼Œä¿è¯ç¨‹åºçš„å¯è§æ€§ï¼Œæ¯æ¬¡è·å–è¯¥å€¼æ—¶éƒ½å»ä¸»å­˜ä¸­è·å–</p><h3 id="CASçš„ç¼ºç‚¹"><a href="#CASçš„ç¼ºç‚¹" class="headerlink" title="CASçš„ç¼ºç‚¹"></a>CASçš„ç¼ºç‚¹</h3><p>å½“ç„¶ï¼ŒCASä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„</p><ol><li><p>CPUå¼€é”€è¾ƒå¤§<br>åœ¨å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè®¸å¤šçº¿ç¨‹åå¤å°è¯•æ›´æ–°æŸä¸€ä¸ªå˜é‡ï¼Œå´åˆä¸€ç›´æ›´æ–°ä¸æˆåŠŸï¼Œå¾ªç¯å¾€å¤ï¼Œä¼šç»™CPUå¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ã€‚</p></li><li><p>ä¸èƒ½ä¿è¯ä»£ç å—çš„åŸå­æ€§<br>CASæœºåˆ¶æ‰€ä¿è¯çš„åªæ˜¯ä¸€ä¸ªå˜é‡çš„åŸå­æ€§æ“ä½œï¼Œè€Œä¸èƒ½ä¿è¯æ•´ä¸ªä»£ç å—çš„åŸå­æ€§ã€‚æ¯”å¦‚éœ€è¦ä¿è¯3ä¸ªå˜é‡å…±åŒè¿›è¡ŒåŸå­æ€§çš„æ›´æ–°ï¼Œå°±ä¸å¾—ä¸ä½¿ç”¨Synchronizedäº†ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> é”æœºåˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé›†åˆç±»-RandomAccessæ¥å£</title>
      <link href="/2021/04/26/Java%E9%9B%86%E5%90%88%E7%B1%BB-RandomAccess%E6%8E%A5%E5%8F%A3/"/>
      <url>/2021/04/26/Java%E9%9B%86%E5%90%88%E7%B1%BB-RandomAccess%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="å‘ç°RandomAccessæ¥å£"><a href="#å‘ç°RandomAccessæ¥å£" class="headerlink" title="å‘ç°RandomAccessæ¥å£"></a>å‘ç°RandomAccessæ¥å£</h2><div class="story post-story"><p>å› ä¸ºé¢è¯•çš„æ—¶å€™é—®åˆ°äº†æ€æ ·ä½¿ä¸€ä¸ª <strong>ArrayList</strong> å˜å¾—çº¿ç¨‹å®‰å…¨</p><ol><li>ä½¿ç”¨è€ç‰Œçš„Vetor</li><li>ä½¿ç”¨CopyOnWriteArrayList</li><li>ä½¿ç”¨Collections.syncronizedList()æ–¹æ³•ä¼ å…¥ä¸€ä¸ªListï¼Œä¼šè¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„List</li></ol><p>ç­”å®Œåå¼•ç”³åˆ°Collections.syncronizedList()çš„å®ç°åŸç†ï¼Œå½“æ—¶æ²¡çœ‹è¿‡å…·ä½“å®ç°å¹¶æœªå›ç­”ä¸Šæ¥ã€‚å¤ç›˜æ—¶ç ”ç©¶äº†ä¸‹ï¼Œå‘ç°é¦–å…ˆä¼šå…ˆåˆ¤æ–­ä¼ è¿‡æ¥çš„Listæ˜¯å¦å®ç°äº†RandomAccessæ¥å£<br><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302112045.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302112045.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p></div><h2 id="RandomAccessæ¥å£è¯¦è§£"><a href="#RandomAccessæ¥å£è¯¦è§£" class="headerlink" title="RandomAccessæ¥å£è¯¦è§£"></a>RandomAccessæ¥å£è¯¦è§£</h2><div class="story post-story"><p>ç‚¹è¿›Randomæ¥å£å‘ç°è¯¥æ¥å£å¹¶æ²¡æœ‰ä»»ä½•å±æ€§å’Œä»»ä½•æ–¹æ³•</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302112503.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302112503.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>äºæ˜¯æŸ¥çœ‹jdk8å®˜æ–¹æ–‡æ¡£</p><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302113604.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/20210302113604.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p><p>å®˜æ–¹æ–‡æ¡£å†™æ˜äº†ï¼ŒRandomAccessæ¥å£ä¸»è¦æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œç”¨æ¥æ³¨æ˜è¿™ä¸ªListæ˜¯å¦æ”¯æŒéšæœºè®¿é—®ã€‚</p><blockquote><p>ArrayListå®ç°äº†Randomæ¥å£è€ŒLinkedListå¹¶æœªå®ç°</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">RandomAccess</span>, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>ArrayListåº•å±‚æ˜¯æ•°ç»„ï¼Œå ç”¨ä¸€ç‰‡è¿ç»­çš„ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—åç§»é‡æ¥ç›´æ¥è·å–å…ƒç´ ï¼Œå³æ”¯æŒéšæœºè®¿é—®ï¼Œæ­¤æ—¶ä½¿ç”¨for (int i=0, n=list.size(); i &lt; n; i++){}å¾ªç¯æ—¶çš„é€Ÿåº¦è¦å¿«äºiteratoré¡ºåºå¾ªç¯è®¿é—®</p><p>LinkedListåº•å±‚æ˜¯åŒå‘é“¾è¡¨ï¼Œéå†è¦æŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹æŸ¥è¯¢ä¸‹å»ï¼Œæ­¤æ—¶iteratoré€Ÿåº¦è¦å¿«äºfor (int i=0, n=list.size(); i &lt; n; i++){}</p></div><h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><div class="story post-story"><ul><li>éšæœºå¾€æ•°ç»„å’Œé“¾è¡¨ä¸­æ’å…¥100000ä¸ªå…ƒç´ ï¼Œå¹¶åˆ†åˆ«æ‰“å°éå†æ—¶é—´</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210302211040899.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210302211040899.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210302211040899"></p><ul><li>éå†ç»“æœ</li></ul><p><img src="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210302211247553.png" class="lazyload" data-srcset="https://blog-pic-project.oss-cn-hangzhou.aliyuncs.com/img/image-20210302211247553.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210302211247553"></p></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><div class="story post-story"><p>å¯ä»¥çœ‹åˆ°ArrayListï¼ˆå³RandomAccessæ¥å£æ ‡è¯†çš„ç±»ï¼‰ä½¿ç”¨æ™®é€šforå¾ªç¯éå†é€Ÿåº¦è¾ƒå¿«</p><p>è€ŒLinkedListï¼ˆå³æœªè¢«RandomAccessæ¥å£æ ‡è¯†çš„ç±»ï¼‰ä½¿ç”¨è¿­ä»£å™¨éå†é€Ÿåº¦è¿œå¿«äºæ™®é€šforéå†</p><p>åç»­éå†æ—¶å¯ä»¥æ ¹æ®æ˜¯å¦è¢«RandomAccessæ¥å£æ ‡è¯†é€‰æ‹©æ›´ä¼˜çš„éå†æ–¹å¼</p></div>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> é›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’</title>
      <link href="/2020/07/26/Java%E4%B8%AD%E7%9A%84%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/"/>
      <url>/2020/07/26/Java%E4%B8%AD%E7%9A%84%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Javaä¸­çš„å‚æ•°ä¼ é€’åˆ†ä¸ºå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ï¼ŒåŸºæœ¬ç±»å‹æ˜¯å€¼ä¼ é€’ï¼Œå°è£…ç±»æ˜¯å¼•ç”¨ä¼ é€’ã€‚</p></blockquote><h1 id="å€¼ä¼ é€’"><a href="#å€¼ä¼ é€’" class="headerlink" title="å€¼ä¼ é€’"></a>å€¼ä¼ é€’</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        num = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        change(num);</span><br><span class="line">        System.out.println(<span class="string">&quot;num=&quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœæ˜¯<code>num=0</code>ã€‚</p><p>å½“è°ƒç”¨<code>change</code>æ–¹æ³•æ—¶ï¼Œjvmå®é™…ä¸Šæ˜¯å¤åˆ¶äº†ä¸€ä»½å‚æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæ— è®ºè¿™ä¸ªå¤åˆ¶åçš„å‚æ•°æ€ä¹ˆå˜ï¼Œ<code>main</code>æ–¹æ³•ä¸­çš„<code>num</code>å‚æ•°éƒ½æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚</p><p>ä»å†…å­˜åˆ†é…çš„è§’åº¦æ¥çœ‹ï¼Œæ ˆä¸­æ˜¯æœ‰ä¸¤ä¸ªå˜é‡çš„ã€‚ä¸€ä¸ªæ˜¯<code>main</code>æ–¹æ³•ä¸­å®šä¹‰çš„<code>num</code>ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åœ¨ä¼ å‚æ—¶jvmå¤åˆ¶çš„ä¸€ä»½<code>num</code>å‰¯æœ¬ï¼Œæˆ‘ä»¬å°±å«å®ƒ<code>temp</code>ã€‚ä¸è®º<code>temp</code>å€¼æ€ä¹ˆæ”¹å˜ï¼Œ<code>num</code>æ˜¯ä¸ä¼šå˜çš„ã€‚</p><h1 id="å¼•ç”¨ä¼ å€¼"><a href="#å¼•ç”¨ä¼ å€¼" class="headerlink" title="å¼•ç”¨ä¼ å€¼"></a>å¼•ç”¨ä¼ å€¼</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">changeAge</span><span class="params">(Student student)</span> </span>&#123;</span><br><span class="line">        student.setAge(<span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setAge(<span class="number">18</span>);</span><br><span class="line">        changeAge(student);</span><br><span class="line">        System.out.println(<span class="string">&quot;student.age=&quot;</span> + student.getAge());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> age;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœæ˜¯<code>student.age=20</code>ã€‚</p><p><code>main</code>æ–¹æ³•<code>new Student</code>æ—¶ï¼Œjvmåœ¨å †ä¸­åˆ†é…äº†ä¸€å—å†…å­˜ç”¨äºå­˜æ”¾<code>Student</code>å¯¹è±¡ã€‚å¹¶ä¸”åœ¨æ ˆä¸­å­˜æ”¾ä¸€ä¸ª<code>student</code>å¯¹è±¡ï¼Œå€¼æ˜¯æŒ‡å‘å †ä¸­<code>Student</code>å¯¹è±¡çš„åœ°å€ã€‚</p><p>æŠŠ<code>student</code>å˜é‡ä¼ å…¥<code>changeAge()</code>æ–¹æ³•æ—¶ï¼Œjvmå¤åˆ¶äº†ä¸€ä»½<code>student</code>å˜é‡ã€‚ä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬å«å®ƒ<code>temp</code>ï¼Œ<code>temp</code>çš„å€¼å’Œ<code>student</code>æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŒ‡å‘å †ä¸­<code>Student</code>å¯¹è±¡çš„åœ°å€ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘äº†å †ä¸­<code>Student</code>å¯¹è±¡çš„åœ°å€ï¼Œæ­¤æ—¶ä¿®æ”¹çš„ä¹Ÿå°±æ˜¯å †ä¸­çš„è¯¥å¯¹è±¡ï¼Œå› æ­¤<code>main</code>ä¸­çš„<code>student</code>å¯¹è±¡ä¹Ÿå‘ç”Ÿäº†å˜åŒ–</p><h1 id="ç‰¹æ®Šçš„String"><a href="#ç‰¹æ®Šçš„String" class="headerlink" title="ç‰¹æ®Šçš„String"></a>ç‰¹æ®Šçš„String</h1><blockquote><p>æŒ‰ç…§ä¸Šé¢çš„è¯´æ³•ï¼ŒStringä¸æ˜¯åŸºæœ¬ç±»å‹ï¼ŒæŒ‰ç†æ¥è¯´åº”è¯¥æ˜¯å¼•ç”¨ä¼ é€’</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        str = <span class="string">&quot;456&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">        change(str);</span><br><span class="line">        System.out.println(<span class="string">&quot;str = &quot;</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šä¸Šé¢è¾“å‡ºçš„ç»“æœæ˜¯<code>str = 123</code>ã€‚</p><p>jvmåœ¨å®ä¾‹åŒ–å­—ç¬¦ä¸²æ—¶ä¼šä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ŒæŠŠ<code>str</code>ä½œä¸ºå‚æ•°ä¼ å…¥<code>change()</code>æ–¹æ³•ã€‚jvmå¤åˆ¶äº†ä¸€ä»½<code>str</code>å˜é‡ï¼Œä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬å«å®ƒ<code>temp</code>ã€‚è¿™ä¸ªæ—¶å€™<code>str</code>å’Œ<code>temp</code>éƒ½æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„<code>&quot;123&quot;</code>ã€‚</p><p>åç»­ç»™<code>temp</code>é‡æ–°èµ‹å€¼ä¸º<code>&quot;456&quot;</code>ï¼Œå¯ä»¥ç†è§£ä¸ºåœ¨å¸¸é‡æ± ä¸­æ–°å»ºäº†<code>&quot;456&quot;</code>è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†<code>temp</code>æŒ‡å‘å¸¸é‡æ± ä¸­çš„<code>&quot;456&quot;</code>ï¼Œæ­¤æ—¶<code>str</code>çš„æŒ‡å‘æ˜¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„ï¼Œå› æ­¤è¿˜æ˜¯<code>&quot;123&quot;</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
